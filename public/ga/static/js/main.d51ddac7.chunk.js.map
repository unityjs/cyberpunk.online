{"version":3,"sources":["components/MyComponents.tsx","pages/datas/rooms.tsx","pages/datas/users.tsx","pages/datas/guilds.tsx","pages/datas/leaderboards.tsx","pages/datas/battleRecords.tsx","pages/datas/reportLogs.tsx","pages/datas/configs.tsx","providers/apiProvider.ts","providers/dataProvider.ts","i18n/zh.ts","i18n/en.ts","components/polyglot.ts","components/MyChart.tsx","components/MyMonitor.tsx","utils.ts","components/RetentionTable.tsx","providers/contextProvider.tsx","pages/Dashboard.tsx","providers/authProvider.tsx","themeReducer.ts","themes/default.ts","themes/index.ts","themes/light.ts","themes/dark.ts","pages/configuration.tsx","components/AnalyticsQuery.tsx","pages/analytics/users.tsx","pages/analytics/realtime.tsx","pages/analytics/events.tsx","pages/analytics/funnels.tsx","pages/analytics/personas.tsx","pages/analytics/keys.tsx","pages/appConfig.tsx","routes.tsx","components/AppSwitcher.tsx","layout/AppBar.tsx","layout/SubMenu.tsx","layout/Menu.tsx","layout/Layout.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["useElapsedTimeFieldStyles","makeStyles","link","textDecoration","icon","width","height","paddingLeft","root","textAlign","ElapsedTimeField","props","classes","rest","FunctionField","className","render","record","source","moment","get","fromNow","TextInputs","resource","keys","perfix","sm","length","xs","Grid","container","spacing","map","item","TextInput","NumberInputs","NumberInput","BooleanInputs","BooleanInput","DateTimeInputs","DateTimeInput","userFilters","alwaysOn","allowEmpty","RoomTitle","name","roomId","Aside","style","margin","Typography","variant","updatedAt","list","List","filters","Datagrid","TextField","t","isAI","nickname","join","NumberField","BooleanField","label","EditButton","edit","isSmall","useMediaQuery","theme","breakpoints","down","Edit","title","aside","SimpleForm","UserTitle","id","TabbedForm","FormTab","ArrayInput","SimpleFormIterator","GuildTitle","DateField","showTime","LeaderboardTitle","JSON","stringify","slice","sortable","score","BattleRecordTitle","user","DateInput","ReportLogTitle","condition","text","etc","exec","multiline","ConfigTitle","ApiProvider","apiUrl","_profile","this","token","localStorage","getItem","value","setItem","removeItem","key","path","query","body","method","a","url","isGet","Object","assign","fetchUtils","fetchJson","undefined","res","json","request","adminApi","appApi","_id2id","Array","isArray","forEach","_id","friendIds","blockedUserIds","hasOwnProperty","id2_id","filterStringify","filter","obj","result","recurse","src","prefix","flatten","isNaN","Number","Date","parse","dataProvider","getList","params","pagination","page","perPage","sort","field","order","limit","skip","select","ret1","ret2","data","total","count","getOne","getMany","$in","ids","getManyReference","target","update","put","updateMany","create","post","delete","deleteMany","customChineseMessages","chineseMessages","pos","configuration","language","light","dark","menu","analytics","sales","catalog","customers","ai","logs","aiConfig","appConfig","dashboard","welcome","subtitle","rooms","cpu","memory","bugs","activeTrend","userTrend","retentionTrend","realtimeTrend","eventTrend","funnelTrend","regionDist","languageDist","keysEdit","appConfigEdit","dateFrom","dateTo","selectChannel","selectVersion","selectCloud","selectEvent","selectFunnel","dayInfo","time","active","new","earn","dod","chart","login","today","yesterday","lastWeek","totalValue","totalTimes","valuePerTime","valuePerUser","timesPerUser","retention","date","d1","d2","d3","d4","d5","d6","d7","d14","d30","users","realtime","events","funnels","personas","resources","fields","isAnonymous","devices","platform","metadata","seasonHightScore","seasonRewardLevel","seasonRewardScore","seasonRewardUnlockLevel","coin","diamond","isVip","isNewFace","offlineAt","heroList","heroList_","card","power","matchPower","guild","flag","intro","joinType","membersCount","membersMax","memberSeasonScoreReq","members_","showHero","type","onlineTime","leaderboard","roomCache","server","processId","clients","maxClients","locked","private","unlisted","battleRecord","winRate","aiWinCount","aiInvokeCount","reportLog","stackTrace","config","aisByTimes","summary","items","heros","other","members","joinRequests","frames","level","seasonLevel","seasonScore","lang","version","createdAt","deleteAt","loginAt","elapsedTime","region","top10","highest","lowest","customEnglishMessages","englishMessages","messages","zh","en","languageNames","languageToMomentLocale","getLocale","resolveBrowserLocale","locale","l","getMomentLocale","i18nProvider","polyglotI18nProvider","onMissingKey","options","index","lastIndexOf","substring","__","_","includes","console","log","translate","replaceAll","withStyles","marginBottom","split","mainText","subText","component","createStyles","display","justifyContent","flexWrap","patchProps","hoverIndex","state","BarPoint","Point","SplinePoint","point","size","AreaPoint","patched","SplineWithPoints","Path","AreaWithPoints","TooltipContent","series","shows","format","alignStyle","tooltipFormat","val","formatCount","valueField","color","cx","cy","r","fill","palette","Content","align","getHoverIndex","formatW","tick","Math","abs","toFixed","formatK","MyChart","chartData","chartSeries","seriesList","LegendRoot","LegendLabel","LegendItem","LegendMarker","changeHoverTime","changeHover","setState","switchShow","find","tab","createLegend","createTooltip","prevProps","prevState","createSeries","forceUpdate","Root","gridTemplateColumns","Item","flexDirection","paddingRight","Label","onClick","toString","whiteSpace","opacity","fillOpacity","getHoverProps","connectProps","argumentField","show","scaleName","seriesType","category","BarSeries","pointComponent","AreaSeries","seriesComponent","SplineSeries","React","tabs","CardContent","Chip","FormGroup","row","FormControlLabel","control","Checkbox","checkedIcon","checked","onChange","rotated","tickFormat","argumentFormat","valueFormat","hover","onHoverChange","targetItem","contentComponent","useStyles","padding","room","getContrastText","green","backgroundColor","blue","orange","bug","red","rounded","small","MyMonitor","useState","fetchDashboard","RoomIcon","second","CpuIcon","MemoryIcon","usedMemMb","unit","ReportLogIcon","useEffect","timer","setInterval","clearInterval","useTranslate","it","md","Card","Avatar","getDayString","day","utc","isSame","getDayFullString","sleep","Promise","resolve","setTimeout","groupChartDate","groupFields","firstKey","secondKey","groupChartData","k","firstValue","secondValue","values","StyledTableCell","paddingTop","paddingBottom","TableCell","StyledTableRow","action","TableRow","table","formatRetention","RetentionTable","xsSeries","startOf","unix","TableContainer","Divider","Table","aria-label","TableHead","Hidden","smDown","TableBody","scope","min","padStart","myContext","createContext","useMyContext","useContext","ContextProvider","defaultApp","apps","clientKeys","flatKeys","_setState","setProfile","setDefaultApp","Provider","setApps","setKeys","initializeCount","_childCount","_allChildCount","startsWith","_enable","flattenPaths","object","flat","itemPath","push","initialize","minFlatCount","expand","_expand","_children","initializeValues","lodash","cloneDeep","getKeysList","setConfig","roomConsoleUrl","children","formatDoD","yesterdayData","chartActiveData","dayEnd","dayBegin","yesterdayItem","twoDaysAgoItem","Box","Container","maxWidth","CardHeader","subheader","local","gutterBottom","sx","alignItems","pt","tooltipTitleFormat","authProvider","username","password","role","logout","checkError","status","reject","checkAuth","getPermissions","CHANGE_THEME","GetTheme","useSelector","themeReducer","previousState","payload","overrides","MuiTextField","RaFormInput","input","themes","primary","main","secondary","contrastText","background","default","shape","borderRadius","RaMenuItemLink","borderLeft","MuiPaper","elevation1","boxShadow","border","backgroundClip","MuiButton","contained","MuiButtonBase","content","position","top","right","MuiAppBar","colorSecondary","MuiLinearProgress","colorPrimary","barColorPrimary","MuiFilledInput","MuiSnackbarContent","disableRipple","merge","defaultTheme","button","Configuration","useLocale","_setLocale","useSetLocale","dispatch","useDispatch","entries","Button","changeTheme","setLocale","types","multipleType","defaultValue","required","itemClientKeys","itemValue","fullWidth","charAt","toUpperCase","SelectProps","native","disabled","_name","subtract","channel","cloud","queryString","location","search","series2","tabs2","handleChange","event","history","pathname","updateApi","seriesKeys","retentionKeys","secondKeys","filterPaths","seriesOrTabs","seriesOrTabs2","newData","cutNameStart","AnalyticsQuery","realtimeData","updateRealtime","hours","hoursEnd","findIndex","splice","i","stop","getHours","filterKeys","eventKey","multipleEventKeys","eventValue","_value","_count","itemData","vpt","vpu","tpu","chartData2","otherFields","b","newData2","saveEnable","setSaveEnable","ref","handleSaveClick","current","handleJsonChange","updated_src","startIcon","onEdit","onAdd","onDelete","displayDataTypes","collapsed","exact","AppSwitcher","anchorEl","setAnchorEl","getAppList","aria-controls","aria-haspopup","currentTarget","keepMounted","open","Boolean","onClose","MenuItem","window","reload","selected","flex","overflow","spacer","ConfigurationMenu","forwardRef","MenuItemLink","to","primaryText","leftIcon","sidebarIsOpen","CustomUserMenu","UserMenu","CustomAppBar","AppBar","elevation","userMenu","minWidth","transition","sidebarIsClosed","SubMenu","handleToggle","isOpen","dense","admin","ui","sidebarOpen","header","ListItemIcon","Tooltip","placement","Collapse","in","timeout","unmountOnExit","disablePadding","marginTop","Menu","menuCatalog","menuSales","menuCustomers","menuAnalytics","menuData","menuAi","menuLogs","menus","setMenus","DashboardMenuItem","smart_count","guilds","leaderboards","battleRecords","reportLogs","configs","CustomSidebar","Sidebar","Layout","appBar","sidebar","App","Admin","customReducers","customRoutes","Dashboard","layout","disableTelemetry","Resource","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d51ddac7.chunk.js","sourcesContent":["\r\nimport * as React from \"react\";\r\nimport { TextInput, NumberInput, useRecordContext, TextField, BooleanInput, DateTimeInput, FunctionField } from 'react-admin';\r\nimport get from 'lodash/get';\r\nimport { Box } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport LaunchIcon from '@material-ui/icons/Launch';\r\nimport Typography, { TypographyProps } from '@material-ui/core/Typography';\r\nimport Grid, { GridSize } from '@material-ui/core/Grid';\r\nimport moment from \"moment\";\r\n\r\nconst useStyles = makeStyles({\r\n    link: {\r\n        textDecoration: 'none',\r\n    },\r\n    icon: {\r\n        width: '0.5em',\r\n        height: '0.5em',\r\n        paddingLeft: 2,\r\n    },\r\n});\r\n\r\nexport const MyUrlField = ({ source }) => {\r\n    const record = useRecordContext();\r\n    const classes = useStyles();\r\n    return record ? (\r\n        <a href={record[source]} className={classes.link}>\r\n            {record[source]}\r\n            <LaunchIcon className={classes.icon} />\r\n        </a>\r\n    ) : null;\r\n}\r\n/*\r\n    const { className, source, emptyText, ...rest } = props;\r\n    const record = useRecordContext(props);\r\n    const value = get(record, source);\r\n\r\n    return (\r\n        <Typography\r\n            component=\"span\"\r\n            variant=\"body2\"\r\n            className={className}\r\n            {...sanitizeFieldRestProps(rest)}\r\n        >\r\n            {value != null && typeof value !== 'string'\r\n                ? JSON.stringify(value)\r\n                : value || emptyText}\r\n        </Typography>\r\n    );\r\n*/\r\n\r\nexport const TagsField = props => {\r\n    const { resource, source, ...rest } = props;\r\n    const record = useRecordContext(props);\r\n    const value = get(record, source);\r\n    return <ul>\r\n        {value.map(item => (\r\n            <li key={item.id}>{item.id}</li>\r\n        ))}\r\n    </ul>\r\n}\r\nTagsField.defaultProps = {\r\n    addLabel: true\r\n};\r\n\r\nconst useElapsedTimeFieldStyles = makeStyles({\r\n    root: {\r\n        textAlign: 'right',\r\n    },\r\n});\r\nexport const ElapsedTimeField = props => {\r\n    const classes = useElapsedTimeFieldStyles();\r\n    const { ...rest } = props\r\n    return (<FunctionField className={classes.root} render={(record, source) => moment(get(record, source)).fromNow()} {...rest} />)\r\n}\r\n\r\n/*\r\n<FunctionField source=\"user.heros\" render={(record, source) => JSON.stringify(record[source]?.map(t => t.id))} />\r\nexport const ArrayIdsField = props => {\r\n    const { className, source, emptyText, ...rest } = props;\r\n    const record = useRecordContext(props);\r\n    const value = get(record, source)?.map(t=>t.id);\r\n    return (\r\n        <Typography\r\n            component=\"span\"\r\n            variant=\"body2\"\r\n            className={className}\r\n            {...rest}\r\n        >\r\n            {value != null && typeof value !== 'string'\r\n                ? JSON.stringify(value)\r\n                : value || emptyText}\r\n        </Typography>\r\n    );\r\n}*/\r\n\r\nexport const TextInputs = props => {\r\n    const { resource, source, keys, ...rest } = props;\r\n    const perfix = source ? source + '.' : ''\r\n    const sm = props.sm || (12 / keys.length) as GridSize\r\n    const xs = props.xs || 12\r\n    return (\r\n        <Grid container spacing={1}>\r\n            {keys.map(item => <Grid item xs={xs} sm={sm}><TextInput source={perfix + item} resource={resource} /> </Grid>)}\r\n        </Grid>)\r\n    /*return (\r\n        <Box display=\"flex\">\r\n            {keys.map(item => <Box flex={1} mr=\"0.1em\"><TextInput source={perfix + item} resource={resource}  /> </Box>)}\r\n        </Box>\r\n    );*/\r\n};\r\n\r\nexport const NumberInputs = props => {\r\n    const { resource, source, keys, ...rest } = props;\r\n    const perfix = source ? source + '.' : ''\r\n    const sm = props.sm || (12 / keys.length) as GridSize\r\n    const xs = props.xs || 12\r\n    return (\r\n        <Grid container spacing={1}>\r\n            {keys.map(item => <Grid item xs={xs} sm={sm}><NumberInput source={perfix + item} resource={resource} /> </Grid>)}\r\n        </Grid>)\r\n};\r\n\r\nexport const BooleanInputs = props => {\r\n    const { resource, source, keys, ...rest } = props;\r\n    const perfix = source ? source + '.' : ''\r\n    const sm = props.sm || (12 / keys.length) as GridSize\r\n    const xs = props.xs || 12\r\n    return (\r\n        <Grid container spacing={1}>\r\n            {keys.map(item => <Grid item xs={xs} sm={sm}><BooleanInput source={perfix + item} resource={resource} /> </Grid>)}\r\n        </Grid>)\r\n};\r\n\r\n\r\nexport const DateTimeInputs = props => {\r\n    const { resource, source, keys, ...rest } = props;\r\n    const perfix = source ? source + '.' : ''\r\n    const sm = props.sm || (12 / keys.length) as GridSize\r\n    const xs = props.xs || 12\r\n    return (\r\n        <Grid container spacing={1}>\r\n            {keys.map(item => <Grid item xs={xs} sm={sm}><DateTimeInput source={perfix + item} resource={resource} /> </Grid>)}\r\n        </Grid>)\r\n};\r\n\r\n/*<ArrayInput source=\"devicesLog\"><SimpleFormIterator>\r\n    <TextInput source=\"id\" />\r\n    <TextInput source=\"platform\" />\r\n</SimpleFormIterator></ArrayInput>\r\n         <Box display=\"flex\">\r\n                        <Box flex={1} mr=\"0.5em\">\r\n                            <TextInput source=\"devices.id\" label=\"Id\"  />\r\n                        </Box>\r\n                        <Box flex={1} ml=\"0.5em\">\r\n                            <TextInput source=\"devices.platform\" label=\"Platform\"  />\r\n                        </Box>\r\n                    </Box>\r\n                    <Typography variant=\"h6\" gutterBottom>Device</Typography>\r\n*/","import * as React from \"react\";\r\nimport {\r\n    List, Datagrid, TextField, EditButton, Edit,\r\n    ListProps, TextInput, NumberField, BooleanField, BooleanInput, NumberInput, ArrayInput, SimpleFormIterator, DateField, DateTimeInput, FormTab, TabbedForm, AutocompleteArrayInput, ArrayField, SingleFieldList, ChipField, FunctionField, SimpleForm, useRefresh,\r\n} from 'react-admin';\r\nimport { Typography, Box } from '@material-ui/core';\r\nimport { useMediaQuery } from '@material-ui/core';\r\nimport { TextInputs, NumberInputs, TagsField, ElapsedTimeField } from '../../components/MyComponents';\r\nimport get from 'lodash/get';\r\nimport { useEffect, useRef } from \"react\";\r\nimport icon from '@material-ui/icons/SportsEsports';\r\n\r\nconst userFilters = [\r\n    <TextInput source=\"roomId\" alwaysOn allowEmpty />,\r\n    <TextInput source=\"name\" allowEmpty />,\r\n    <TextInput source=\"version\" allowEmpty />,\r\n    <NumberInput source=\"seasonLevel\" allowEmpty />,\r\n];\r\n\r\nfunction useRecursiveTimeout(callback, delay) {\r\n    const savedCallback = useRef(callback)\r\n    useEffect(() => { savedCallback.current = callback }, [callback])\r\n    useEffect(() => {\r\n        let id\r\n        function tick() {\r\n            const ret = savedCallback.current()\r\n            if (ret instanceof Promise) {\r\n                ret.then(() => { id = setTimeout(tick, delay) })\r\n            } else id = setTimeout(tick, delay)\r\n        }\r\n        if (delay !== null) {\r\n            id = setTimeout(tick, delay)\r\n            return () => id && clearTimeout(id)\r\n        }\r\n    }, [delay])\r\n}\r\n\r\nconst ResList = (props: ListProps) => {\r\n    //const refresh = useRefresh()\r\n    //useRecursiveTimeout(() => refresh(), 2000)\r\n\r\n    return (<List filters={userFilters} {...props}>\r\n        <Datagrid>\r\n            <TextField source=\"roomId\" />\r\n            <TextField source=\"name\" />\r\n            <FunctionField source=\"users\" textAlign=\"right\" render={(record, source) => {\r\n                const users = get(record, source) as any[]\r\n                return users.map(t => t.isAI ? 'AI' : t.nickname).join(' | ')\r\n            }} />\r\n            <TextField source=\"processId\" />\r\n            <TextField source=\"version\" />\r\n            <NumberField source=\"seasonLevel\" />\r\n            <BooleanField source=\"locked\" />\r\n            <ElapsedTimeField textAlign='right' source=\"updatedAt\" />\r\n            <ElapsedTimeField textAlign='right' source=\"createdAt\" label=\"elapsedTime\" />\r\n            <EditButton />\r\n        </Datagrid>\r\n    </List>)\r\n}\r\n\r\n\r\nconst RoomTitle = ({ record }) => {\r\n    return <span>Room {record ? `\"${record.name}:${record.roomId}\"` : ''}</span>;\r\n};\r\n\r\nconst Aside = ({ record }) => (\r\n    <div style={{ width: 200, margin: '1em' }}>\r\n        <Typography variant=\"h6\">Room details</Typography>\r\n        {record && (\r\n            <Typography variant=\"body2\">\r\n                Updated date: {record.updatedAt}\r\n            </Typography>\r\n        )}\r\n    </div>\r\n);\r\n\r\nconst ResEdit = props => {\r\n    const isSmall = useMediaQuery((theme: any) => theme.breakpoints.down('sm'));\r\n    return (\r\n        <Edit title={<RoomTitle {...props} />} aside={isSmall ? null : <Aside {...props} />}  {...props}>\r\n            <SimpleForm>\r\n                <TextInput source=\"roomId\" />\r\n                <TextInput source=\"name\" />\r\n                <TextInput source=\"processId\" />\r\n                <TextInput source=\"version\" />\r\n                <NumberInput source=\"seasonLevel\" />\r\n                <NumberInputs keys={['clients', 'maxClients']} />\r\n                <BooleanInput source=\"locked\" />\r\n                <BooleanInput source=\"private\" />\r\n                <BooleanInput source=\"unlisted\" />\r\n                <DateTimeInput source=\"createdAt\" />\r\n            </SimpleForm>\r\n        </Edit>\r\n    );\r\n}\r\n//create: VisitorCreate,\r\nexport default { name: \"roomCache\", list: ResList, edit: ResEdit, icon }","import * as React from \"react\";\r\n\r\nimport {\r\n    List, Datagrid, TextField, EditButton, Edit,\r\n    /*ReferenceField, SimpleForm, ReferenceInput, SelectInput, Create, SimpleList, DateInput,*/\r\n    ListProps, TextInput, NumberField, BooleanField, BooleanInput, NumberInput, ArrayInput, SimpleFormIterator, DateField, DateTimeInput, FormTab, TabbedForm, AutocompleteArrayInput,\r\n} from 'react-admin';\r\n//import MyUrlField from './MyUrlField';\r\nimport { /*Accordion, AccordionDetails, AccordionSummary,*/ Typography, Box } from '@material-ui/core';\r\nimport { useMediaQuery } from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { TextInputs, NumberInputs, BooleanInputs, DateTimeInputs, ElapsedTimeField } from '../../components/MyComponents';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport icon from '@material-ui/icons/Group';\r\n\r\nconst userFilters = [\r\n    <TextInput source=\"nickname\" alwaysOn allowEmpty />,\r\n    <TextInput source=\"id\" allowEmpty />,\r\n    <TextInput source=\"ip\" allowEmpty />,\r\n    <TextInput source=\"region\" allowEmpty />,\r\n    <TextInput source=\"devices.id\" allowEmpty />,\r\n];\r\n\r\nconst ResList = (props: ListProps) => (\r\n    <List filters={userFilters} {...props}>\r\n        <Datagrid>\r\n            <TextField source=\"id\" />\r\n            <TextField source=\"nickname\" />\r\n            <TextField source=\"ip\" />\r\n            <TextField source=\"region\" />\r\n            <NumberField source=\"metadata.seasonLevel\" />\r\n            <NumberField source=\"metadata.coin\" />\r\n            <NumberField source=\"metadata.diamond\" />\r\n            <BooleanField source=\"metadata.isVip\" />\r\n            <BooleanField source=\"metadata.isNewFace\" />\r\n            <BooleanField source=\"isAnonymous\" />\r\n            <ElapsedTimeField textAlign='right' source=\"createdAt\" />\r\n            <ElapsedTimeField textAlign='right' source=\"updatedAt\" />\r\n            <EditButton />\r\n        </Datagrid>\r\n    </List>\r\n);\r\n\r\nconst UserTitle = ({ record }) => {\r\n    return <span>User {record ? `\"${record.id}:${record.nickname}\"` : ''}</span>;\r\n};\r\n\r\nconst Aside = ({ record }) => (\r\n    <div style={{ width: 200, margin: '1em' }}>\r\n        <Typography variant=\"h6\">User details</Typography>\r\n        {record && (\r\n            <Typography variant=\"body2\">\r\n                Updated date: {record.updatedAt}\r\n            </Typography>\r\n        )}\r\n    </div>\r\n);\r\n\r\nconst ResEdit = props => {\r\n    const isSmall = useMediaQuery((theme: any) => theme.breakpoints.down('sm'));\r\n    return (\r\n        <Edit title={<UserTitle {...props} />} aside={isSmall ? null : <Aside {...props} />}  {...props}>\r\n            <TabbedForm>\r\n                <FormTab label=\"summary\" >\r\n                    <TextInputs keys={['id', 'nickname']} />\r\n                    <TextInputs keys={['ip', 'region']} />\r\n                    <TextInputs source=\"devices\" keys={['id', 'platform']} />\r\n                    <BooleanInputs keys={['metadata.isVip', 'metadata.isNewFace', 'isAnonymous']} />\r\n                    <NumberInputs xs={6} source=\"metadata\" keys={['coin', 'diamond']} />\r\n                    <NumberInputs source=\"metadata\" keys={['seasonLevel', 'seasonScore', 'seasonHightScore']} />\r\n                    <NumberInputs source=\"metadata\" keys={['seasonRewardLevel', 'seasonRewardScore', 'seasonRewardUnlockLevel']} />\r\n                    <DateTimeInputs keys={['createdAt', 'deleteAt']} />\r\n                    <DateTimeInputs keys={['metadata.loginAt', 'metadata.offlineAt']} />\r\n\r\n\r\n                </FormTab>\r\n                <FormTab label=\"items\">\r\n                    <ArrayInput source=\"metadata.bagList\"><SimpleFormIterator>\r\n                        <NumberInputs xs={4} keys={['id', 'state', 'openTime']} />\r\n                    </SimpleFormIterator></ArrayInput>\r\n                </FormTab>\r\n                <FormTab label=\"heros\">\r\n                    <NumberInput source=\"metadata.teamSelected\" />\r\n                    <ArrayInput source=\"metadata.teams\"><SimpleFormIterator>\r\n                        <ArrayInput source=\"metadata.teams\"><SimpleFormIterator>\r\n                            <NumberInput source=\"\" />\r\n                        </SimpleFormIterator></ArrayInput>\r\n                    </SimpleFormIterator></ArrayInput>\r\n\r\n                    <ArrayInput source=\"metadata.heroList\"><SimpleFormIterator>\r\n                        <NumberInputs xs={4} keys={['id', 'level', 'card']} />\r\n                    </SimpleFormIterator></ArrayInput>\r\n\r\n                    <ArrayInput source=\"metadata.talents\"><SimpleFormIterator>\r\n                        <NumberInput source=\"\" />\r\n                    </SimpleFormIterator></ArrayInput>\r\n\r\n                    <NumberInput source=\"metadata.useFightBg\" />\r\n                    <ArrayInput source=\"metadata.useBqs\"><SimpleFormIterator>\r\n                        <NumberInput source=\"\" />\r\n                    </SimpleFormIterator></ArrayInput>\r\n                </FormTab>\r\n                <FormTab label=\"other\">\r\n                    <NumberInput source=\"metadata.power\" />\r\n                    <NumberInput source=\"metadata.matchPower\" />\r\n                    <NumberInput source=\"metadata.loginDays\" />\r\n                    <NumberInput source=\"metadata.allOpenBags\" />\r\n                    <NumberInput source=\"metadata.allVictorys\" />\r\n                    <NumberInput source=\"metadata.allBattles\" />\r\n                    <NumberInput source=\"metadata.continuousLossCount\" />\r\n                    <NumberInput source=\"metadata.cooperationGetGiftBit\" />\r\n                    <NumberInput source=\"metadata.cooperationNum\" />\r\n                    <NumberInput source=\"metadata.dailyActivity\" />\r\n                    <NumberInput source=\"metadata.dailyActivityLevel\" />\r\n                    <NumberInput source=\"metadata.genericMarks\" />\r\n                </FormTab>\r\n            </TabbedForm>\r\n        </Edit>\r\n    );\r\n}\r\n\r\nexport default { name: \"user\", list: ResList, edit: ResEdit, icon }","import * as React from \"react\";\r\nimport {\r\n    List, Datagrid, TextField, EditButton, Edit,\r\n    ListProps, TextInput, NumberField, BooleanField, BooleanInput, NumberInput, ArrayInput, SimpleFormIterator, DateField, DateTimeInput, FormTab, TabbedForm, AutocompleteArrayInput, FunctionField,\r\n} from 'react-admin';\r\nimport { Typography, Box } from '@material-ui/core';\r\nimport { useMediaQuery } from '@material-ui/core';\r\nimport { TextInputs, NumberInputs } from '../../components/MyComponents';\r\nimport icon from '@material-ui/icons/Flag';\r\nimport get from 'lodash/get';\r\n\r\nconst userFilters = [\r\n    <TextInput source=\"name\" alwaysOn allowEmpty />,\r\n    <TextInput source=\"intro\" allowEmpty />,\r\n    <TextInput source=\"id\" allowEmpty />,\r\n];\r\n\r\n//creater: \"610cf1c11a5b1bf46c5ad531\"\r\n//joinRequests: []\r\n//members: [{id: \"610cf1c11a5b1bf46c5ad531\", name: \"ink001\", showHero: 10039, type: 1,…}]\r\n\r\nconst ResList = (props: ListProps) => (\r\n    <List filters={userFilters} {...props}>\r\n        <Datagrid>\r\n            <TextField source=\"id\" />\r\n            <TextField source=\"name\" />\r\n            <TextField source=\"flag\" />\r\n            <TextField source=\"intro\" />\r\n            <NumberField source=\"joinType\" />\r\n            <FunctionField source=\"membersCount\" textAlign=\"right\" render={(record, source) => {\r\n                const clients = get(record, source) as string\r\n                const maxClients = get(record, \"membersMax\") as string\r\n                return clients + \"/\" + maxClients\r\n            }} />\r\n            <NumberField source=\"seasonScore\" />\r\n            <NumberField source=\"memberSeasonScoreReq\" />\r\n            <DateField source=\"createdAt\" showTime />\r\n            <EditButton />\r\n        </Datagrid>\r\n    </List>\r\n);\r\n\r\nconst GuildTitle = ({ record }) => {\r\n    return <span>Guild {record ? `\"${record.id}:${record.name}\"` : ''}</span>;\r\n};\r\n\r\nconst Aside = ({ record }) => (\r\n    <div style={{ width: 200, margin: '1em' }}>\r\n        <Typography variant=\"h6\">Guild details</Typography>\r\n        {record && (\r\n            <Typography variant=\"body2\">\r\n                Updated date: {record.updatedAt}\r\n            </Typography>\r\n        )}\r\n    </div>\r\n);\r\n\r\nconst ResEdit = props => {\r\n    const isSmall = useMediaQuery((theme: any) => theme.breakpoints.down('sm'));\r\n    return (\r\n        <Edit title={<GuildTitle {...props} />} aside={isSmall ? null : <Aside {...props} />}  {...props}>\r\n\r\n            <TabbedForm>\r\n                <FormTab label=\"summary\">\r\n                    <TextInput source=\"id\" />\r\n                    <TextInput source=\"name\" />\r\n                    <TextInput source=\"flag\" />\r\n                    <TextInput source=\"intro\" />\r\n                    <NumberInput source=\"joinType\" />\r\n                    <NumberInputs keys={['membersCount', 'membersMax']} />\r\n                    <NumberInputs keys={['seasonScore', 'memberSeasonScoreReq']} />\r\n                    <DateTimeInput source=\"createdAt\" />\r\n                </FormTab>\r\n                <FormTab label=\"members\">\r\n                    <ArrayInput source=\"members\"><SimpleFormIterator>\r\n                        <TextInput source=\"id\" />\r\n                        <TextInput source=\"name\" />\r\n                        <NumberInput source=\"seasonScore\" />\r\n                        <NumberInput source=\"showHero\" />\r\n                        <NumberInput source=\"type\" />\r\n                        <DateTimeInput source=\"onlineTime\" />\r\n                    </SimpleFormIterator></ArrayInput>\r\n                </FormTab>\r\n                <FormTab label=\"joinRequests\">\r\n                </FormTab>\r\n            </TabbedForm>\r\n        </Edit>\r\n    );\r\n}\r\n\r\nexport default { name: \"guild\", list: ResList, edit: ResEdit, icon }","import * as React from \"react\";\r\nimport {\r\n    List, Datagrid, TextField, EditButton, Edit,\r\n    ListProps, TextInput, NumberField, BooleanField, BooleanInput, NumberInput, ArrayInput, SimpleFormIterator, DateField, DateTimeInput, FormTab, TabbedForm, AutocompleteArrayInput, FunctionField, SimpleForm,\r\n} from 'react-admin';\r\nimport { Typography, Box } from '@material-ui/core';\r\nimport { useMediaQuery } from '@material-ui/core';\r\nimport { TextInputs, NumberInputs } from '../../components/MyComponents';\r\nimport get from 'lodash/get';\r\nimport icon from '@material-ui/icons/Assessment';\r\n\r\nconst userFilters = [\r\n    <TextInput source=\"name\" alwaysOn allowEmpty />,\r\n    <TextInput source=\"intro\" allowEmpty />,\r\n    <TextInput source=\"id\" allowEmpty />,\r\n];\r\n\r\n//creater: \"610cf1c11a5b1bf46c5ad531\"\r\n//joinRequests: []\r\n//members: [{id: \"610cf1c11a5b1bf46c5ad531\", name: \"ink001\", showHero: 10039, type: 1,…}]\r\n\r\nconst ResList = (props: ListProps) => (\r\n    <List filters={userFilters} {...props}>\r\n        <Datagrid>\r\n            <TextField source=\"name\" />\r\n            <NumberField source=\"total\" />\r\n            <FunctionField source=\"top\" render={(record, source) => JSON.stringify(get(record, source).slice(0, 10)?.map(t => t.name))} label=\"top10\" />\r\n            <FunctionField source=\"top\" sortable={false} render={(record, source) => JSON.stringify(get(record, source)[0]?.score)} label=\"highest\" />\r\n            <FunctionField source=\"top\" sortable={false} render={(record, source) => JSON.stringify(get(record, source).slice(-1)[0]?.score)} label=\"lowest\" />\r\n            <EditButton />\r\n        </Datagrid>\r\n    </List>\r\n);\r\n\r\nconst LeaderboardTitle = ({ record }) => {\r\n    return <span>Leaderboard {record ? `\"${record.name}\"` : ''}</span>;\r\n};\r\n\r\nconst Aside = ({ record }) => (\r\n    <div style={{ width: 200, margin: '1em' }}>\r\n        <Typography variant=\"h6\">Leaderboard details</Typography>\r\n        {record && (\r\n            <Typography variant=\"body2\">\r\n                Updated date: {record.updatedAt}\r\n            </Typography>\r\n        )}\r\n    </div>\r\n);\r\n\r\nconst ResEdit = props => {\r\n    const isSmall = useMediaQuery((theme: any) => theme.breakpoints.down('sm'));\r\n    return (\r\n        <Edit title={<LeaderboardTitle {...props} />} aside={isSmall ? null : <Aside {...props} />}  {...props}>\r\n            <SimpleForm>\r\n                <TextInput source=\"name\" />\r\n                <NumberInput source=\"total\" />\r\n                <ArrayInput source=\"top\"><SimpleFormIterator>\r\n                    <TextInputs xs={4} keys={['id', 'name', 'score']} />\r\n                </SimpleFormIterator></ArrayInput>\r\n            </SimpleForm>\r\n        </Edit>\r\n    );\r\n}\r\n\r\nexport default { name: \"leaderboard\", list: ResList, edit: ResEdit, icon }","import * as React from \"react\";\r\nimport {\r\n    List, Datagrid, TextField, EditButton, Edit,\r\n    ListProps, TextInput, NumberField, BooleanField, BooleanInput, NumberInput, ArrayInput, SimpleFormIterator, DateField, DateTimeInput, FormTab, TabbedForm, AutocompleteArrayInput, ArrayField, SingleFieldList, ChipField, FunctionField,\r\n} from 'react-admin';\r\nimport { Typography, Box } from '@material-ui/core';\r\nimport { useMediaQuery } from '@material-ui/core';\r\nimport { TextInputs, NumberInputs, TagsField } from '../../components/MyComponents';\r\nimport get from 'lodash/get';\r\nimport icon from '@material-ui/icons/History';\r\n\r\nconst userFilters = [\r\n    <TextInput source=\"user.nickname\" alwaysOn allowEmpty />,\r\n    <NumberInput source=\"user.level\" allowEmpty />,\r\n    <TextInput source=\"id\" allowEmpty />,\r\n];\r\n\r\n\r\n/*aiInvokeCount: 3\r\naiWinCount: 2\r\nframes: [[58, [\"buy\"]], [63, [\"buy\"]], [66, [\"buy\"]], [70, [\"buy\"]], [74, [\"buy\"]], [77, [\"buy\"]],…]\r\nmainSeed: 176264427\r\nuser: {talent: [3, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], nickname: \"玛法里奥\", avatar: \"10039\",…}\r\nuserSeed: 104399722\r\nwinRate:\r\n<ArrayField source=\"user.heros\">\r\n                <SingleFieldList>\r\n                    <ChipField source=\"id\" />\r\n                </SingleFieldList>\r\n            </ArrayField>\r\n */\r\n\r\nconst ResList = (props: ListProps) => (\r\n    <List filters={userFilters} {...props}>\r\n        <Datagrid>\r\n            <TextField source=\"id\" />\r\n            <TextField source=\"user.nickname\" />\r\n            <NumberField source=\"user.seasonLevel\" />\r\n            <NumberField source=\"user.power\" />\r\n            <NumberField source=\"user.expWin\" />\r\n            <NumberField source=\"user.allWins\" />\r\n            <NumberField source=\"user.allBattles\" />\r\n            <FunctionField source=\"user.heros\" render={(record, source) => JSON.stringify(get(record, source)?.map(t => t.id))} />\r\n            <DateField source=\"createdAt\" showTime />\r\n            <EditButton />\r\n        </Datagrid>\r\n    </List>\r\n);\r\n\r\nconst BattleRecordTitle = ({ record }) => {\r\n    return <span>BattleRecord {record ? `\"${record.id}:${record.user.nickname}\"` : ''}</span>;\r\n};\r\n\r\nconst Aside = ({ record }) => (\r\n    <div style={{ width: 200, margin: '1em' }}>\r\n        <Typography variant=\"h6\">BattleRecord details</Typography>\r\n        {record && (\r\n            <Typography variant=\"body2\">\r\n                Updated date: {record.updatedAt}\r\n            </Typography>\r\n        )}\r\n    </div>\r\n);\r\n\r\nconst ResEdit = props => {\r\n    const isSmall = useMediaQuery((theme: any) => theme.breakpoints.down('sm'));\r\n    return (\r\n        <Edit title={<BattleRecordTitle {...props} />} aside={isSmall ? null : <Aside {...props} />}  {...props}>\r\n\r\n            <TabbedForm>\r\n                <FormTab label=\"summary\">\r\n                    <TextInput source={'id'} />\r\n                    <TextInputs source=\"user\" keys={['sessionId', 'nickname']} />\r\n                    <TextInputs source=\"user\" keys={['avatar', 'guildName', 'guildFlag']} />\r\n                    <NumberInputs source=\"user\" keys={['power', 'expWin', 'allWins', 'allBattles']} />\r\n                    <NumberInputs source=\"user\" keys={['bg', 'level', 'seasonLevel', 'seasonScore']} />\r\n                    <TextInputs source=\"user\" keys={['seed', 'framesId']} />\r\n                    <BooleanInput source=\"user.isAI\" />\r\n                </FormTab>\r\n                <FormTab label=\"heros\">\r\n                    <ArrayInput source=\"user.heros\"><SimpleFormIterator>\r\n                        <NumberInputs xs={6} keys={['id', 'level']} />\r\n                    </SimpleFormIterator></ArrayInput>\r\n                </FormTab>\r\n            </TabbedForm>\r\n        </Edit>\r\n    );\r\n}\r\n\r\nexport default { name: \"battleRecord\", list: ResList, edit: ResEdit, icon }","import * as React from \"react\";\r\nimport {\r\n    List, Datagrid, TextField, EditButton, Edit,\r\n    ListProps, TextInput, NumberField, BooleanField, BooleanInput, NumberInput, ArrayInput, SimpleFormIterator, DateField, DateInput, DateTimeInput, FormTab, TabbedForm, AutocompleteArrayInput, SimpleForm, FunctionField,\r\n} from 'react-admin';\r\nimport { Typography, Box } from '@material-ui/core';\r\nimport { useMediaQuery } from '@material-ui/core';\r\nimport { TextInputs, NumberInputs, ElapsedTimeField } from '../../components/MyComponents';\r\nimport get from 'lodash/get';\r\nimport icon from '@material-ui/icons/BugReport';\r\n\r\nconst userFilters = [\r\n    <TextInput source=\"source\" alwaysOn allowEmpty />,\r\n    <TextInput source=\"condition\" alwaysOn allowEmpty />,\r\n    <TextInput source=\"stackTrace\" allowEmpty />,\r\n    <TextInput source=\"version\" allowEmpty />,\r\n    <DateInput source=\"updatedAt\" allowEmpty />,\r\n];\r\n\r\n//const renderStackTrace = (record, source) => (get(record, source) as string).replaceAll(\\\\g, '');\r\nconst ResList = (props: ListProps) => (\r\n    <List filters={userFilters} {...props}>\r\n        <Datagrid>\r\n            <TextField source=\"source\" />\r\n            <TextField source=\"condition\" />\r\n            <FunctionField source=\"stackTrace\" render={(record, source) => {\r\n                const text = get(record, source) as string;\r\n                const etc = /^(.*?)\\(at <00000000000000000000000000000000>:0\\)/.exec(text)?.[1]\r\n                return etc ? etc + \"...\" : text\r\n            }} />\r\n            <TextField source=\"version\" />\r\n            <NumberField source=\"count\" />\r\n            <DateField source=\"updatedAt\" />\r\n            <EditButton />\r\n        </Datagrid>\r\n    </List>\r\n);\r\n\r\nconst ReportLogTitle = ({ record }) => {\r\n    return <span>ReportLog {record ? `\"${record.condition}\"` : ''}</span>;\r\n};\r\n\r\nconst ResEdit = props => {\r\n    const isSmall = useMediaQuery((theme: any) => theme.breakpoints.down('sm'));\r\n    return (\r\n        <Edit title={<ReportLogTitle {...props} />} {...props}>\r\n            <SimpleForm>\r\n                <DateInput source=\"date\" />\r\n                <TextInput source=\"source\" />\r\n                <TextInput source=\"condition\" />\r\n                <TextInput source=\"stackTrace\" multiline />\r\n                <TextInput source=\"version\" />\r\n                <NumberInput source=\"count\" />\r\n                <DateTimeInput source=\"createdAt\" />\r\n                <DateTimeInput source=\"updatedAt\" />\r\n            </SimpleForm>\r\n        </Edit>\r\n    );\r\n}\r\n\r\nexport default { name: \"reportLog\", list: ResList, edit: ResEdit, icon }","import * as React from \"react\";\r\n\r\nimport {\r\n    List, Datagrid, TextField, EditButton, Edit,\r\n    /*ReferenceField, SimpleForm, ReferenceInput, SelectInput, Create, SimpleList, DateInput,*/\r\n    ListProps, TextInput, NumberField, BooleanField, BooleanInput, NumberInput, ArrayInput, SimpleFormIterator, DateField, DateTimeInput, FormTab, TabbedForm, AutocompleteArrayInput,\r\n} from 'react-admin';\r\n//import MyUrlField from './MyUrlField';\r\nimport { /*Accordion, AccordionDetails, AccordionSummary,*/ Typography, Box } from '@material-ui/core';\r\nimport { useMediaQuery } from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { TextInputs, NumberInputs, BooleanInputs, DateTimeInputs, ElapsedTimeField } from '../../components/MyComponents';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport icon from '@material-ui/icons/Settings'\r\n\r\nconst ConfigTitle = ({ record }) => {\r\n    return <span>Config</span>;\r\n};\r\n\r\nconst ResEdit = props => {\r\n    return (\r\n        <Edit title={<ConfigTitle {...props} />}  {...props}>\r\n            <TabbedForm>\r\n                <FormTab label=\"ai\">\r\n                    <ArrayInput source=\"aisByTimes\"><SimpleFormIterator>\r\n                        <ArrayInput source=\"\" ><SimpleFormIterator>\r\n                            <TextInput source=\"\" />\r\n                        </SimpleFormIterator></ArrayInput>\r\n                    </SimpleFormIterator></ArrayInput>\r\n                </FormTab>\r\n                <FormTab label=\"other\">\r\n                </FormTab>\r\n            </TabbedForm>\r\n        </Edit>\r\n    );\r\n}\r\n\r\nexport default { name: \"config\", edit: ResEdit, icon }","import { fetchUtils } from 'react-admin'\r\nimport { stringify } from 'query-string';\r\n\r\nexport default class ApiProvider {\r\n    name: string\r\n    apiUrl: string\r\n    private _profile: { [name: string]: any } = {}\r\n\r\n    get token() { return this._profile.token }\r\n    set token(value) {\r\n        if (this._profile.token == value) return\r\n        this._profile.token = value\r\n        if (value) localStorage.setItem(this.name + '_token', value)\r\n        else localStorage.removeItem(this.name + '_token')\r\n    }\r\n\r\n    public setProfile(key: string, value: any) { this._profile[key] = value }\r\n    public getProfile(key: string) { return this._profile[key] }\r\n\r\n    constructor(apiUrl: string, name: string) {\r\n        this.apiUrl = apiUrl\r\n        this.name = name\r\n        this._profile.token = localStorage.getItem(this.name + '_token')\r\n    }\r\n\r\n    async request(path: string, query?: any, body?: any, method?: string) {\r\n        let url: string = `${this.apiUrl}/${path}`\r\n        const isGet = !method || method == 'GET'\r\n        if (isGet || query) url = `${url}?${stringify(Object.assign({ ...this._profile }, query))}`\r\n        const res = await fetchUtils.fetchJson(url, isGet ? undefined : {\r\n            method,\r\n            body: JSON.stringify(Object.assign({ ...this._profile }, body)),\r\n        })\r\n        return res.json\r\n    }\r\n\r\n    async get(url: string, query?: any): Promise<any> { return await this.request(url, query) }\r\n    async post(url: string, body?: any): Promise<any> { return await this.request(url, undefined, body, 'POST') }\r\n    async put(url: string, query?: any, body?: any): Promise<any> { return await this.request(url, query, body, 'PUT') }\r\n    async delete(url: string, query?: any, body?: any): Promise<any> { return await this.request(url, query, body, 'DELETE') }\r\n}","import ApiProvider from './apiProvider';\r\n\r\n//let apiAppUrl: string;\r\n//if (process.env.NODE_ENV == \"development\") {\r\n    //apiAppUrl = 'https://eu.exygame.com/admin';\r\n //   apiAppUrl = 'https://www.unityjs.com:2567/admin';\r\n//} else {\r\n//    apiAppUrl = 'admin';\r\n//}\r\n\r\nexport const adminApi = new ApiProvider('https://www.cyberpunk.online/api/admin', 'admin')\r\nexport const appApi = new ApiProvider('', 'app')\r\n\r\nconst _id2id = (json: any) => {\r\n    if (json == null) return json\r\n    if (Array.isArray(json)) {\r\n        json.forEach(t => {\r\n            t.id = t._id\r\n            delete t._id\r\n            delete t.friendIds\r\n            delete t.blockedUserIds\r\n        })\r\n    } else if (json.hasOwnProperty('_id') && !json.hasOwnProperty('id')) {\r\n        json.id = json._id\r\n        delete json._id\r\n        delete json.friendIds\r\n        delete json.blockedUserIds\r\n    }\r\n    return json\r\n}\r\n\r\nconst id2_id = (json: any) => {\r\n    if (json == null) return json\r\n    if (Array.isArray(json)) {\r\n        json.forEach(t => {\r\n            t._id = t.id\r\n            delete t.id\r\n        })\r\n    } else if (json.hasOwnProperty('id') && !json.hasOwnProperty('_id')) {\r\n        json._id = json.id\r\n        delete json.id\r\n    }\r\n    return json\r\n}\r\n\r\n// This feature is used internally to support nested phrase objects.\r\nconst flatten = function (obj) {\r\n    const result = {};\r\n    function recurse(src, prefix) {\r\n        for (let key in src) {\r\n            const value = src[key];\r\n            key = prefix + key;\r\n            if (typeof value === 'object') {\r\n                recurse(value, key + '.');\r\n            } else {\r\n                result[key] = value;\r\n            }\r\n        }\r\n    }\r\n    recurse(obj, '');\r\n    return result;\r\n}\r\n\r\nconst filterStringify = (filter) => {\r\n    //typeof value === \"string\" && key !== \"_id\" && key[0] !== \"$\" ? { \"$regex\": value, \"$options\": \"i\" } : value\r\n    // JSON.stringify(id2_id(filter), (key, value) =>  {  console.log(key, value,typeof value); return value})\r\n    return JSON.stringify(flatten(id2_id(filter)), (key, value) => {\r\n        if (typeof value !== \"string\") return value\r\n        if (key === \"_id\") return value\r\n        if (key[0] === \"$\") return value\r\n        if (isNaN(Number(value)) && !isNaN(Date.parse(value))) return value\r\n        return { \"$regex\": value, \"$options\": \"i\" }\r\n    })\r\n}\r\n\r\nconst dataProvider = {\r\n    getList: async (resource, params) => {\r\n        const { page, perPage } = params.pagination;\r\n        const { field, order } = params.sort;\r\n        //const filter = { \"$regex\": params.filter }//Object.fromEntries(Object.entries(params.filter).map(t => [t[0], t[0] === \"id\" ? t[1] : { \"$regex\": t[1], \"$options\": \"i\" }]))\r\n        const query = {\r\n            sort: JSON.stringify(id2_id({ [field]: order })),\r\n            limit: perPage,\r\n            skip: (page - 1) * perPage,\r\n            query: filterStringify(params.filter),\r\n            select: \"-metadata.battleList\"\r\n        };\r\n\r\n        const ret1 = await appApi.get(resource, query)\r\n        const ret2 = await appApi.get(`${resource}/count`, { query: query.query })\r\n        return { data: _id2id(ret1), total: ret2.count }\r\n    },\r\n\r\n    getOne: async (resource, params) => ({ data: _id2id(await appApi.get(`${resource}/${params.id}`)) }),\r\n    getMany: async (resource, params) => ({ data: await appApi.get(resource, { query: JSON.stringify({ _id: { $in: params.ids } }), select: \"-metadata.battleList\" }) }),\r\n\r\n    getManyReference: async (resource, params) => {\r\n        const { page, perPage } = params.pagination;\r\n        const { field, order } = params.sort;\r\n        const query = {\r\n            sort: JSON.stringify(id2_id({ [field]: order })),\r\n            limit: perPage,\r\n            skip: (page - 1) * perPage,\r\n            query: filterStringify({ ...params.filter, [params.target]: params.id, }),\r\n            select: \"-metadata.battleList\"\r\n        };\r\n\r\n        const ret1 = await appApi.get(resource, query)\r\n        const ret2 = await appApi.get(`${resource}/count`, { query: query.query })\r\n        return { data: _id2id(ret1), total: ret2.count }\r\n\r\n        /*const url = `${resource}?${stringify(query)}`;\r\n        return fetchApi(url).then(({ headers, json }) => ({\r\n            data: _id2id(json),\r\n            total: parseInt(headers.get('content-range')?.split('/').pop() || \"\", 10),\r\n        }));*/\r\n    },\r\n\r\n    update: async (resource, params) => ({ data: await appApi.put(`${resource}/${params.id}`, undefined, params.data) }),\r\n    updateMany: async (resource, params) => ({ data: await appApi.put(resource, { query: JSON.stringify({ _id: { $in: params.ids } }) }, params.data) }),\r\n    create: async (resource, params) => ({ data: { ...params.data, id: (await appApi.post(resource, params.data)).id } }),\r\n    delete: async (resource, params) => ({ data: await appApi.delete(`${resource}/${params.id}`) }),\r\n    deleteMany: async (resource, params) => ({ data: await appApi.delete(resource, { query: JSON.stringify({ _id: { $in: params.ids } }) }) }),\r\n};\r\n\r\nexport default dataProvider","import { TranslationMessages } from 'react-admin';\r\nimport chineseMessages from 'ra-language-chinese';\r\n\r\nconst customChineseMessages: TranslationMessages = {\r\n    ...chineseMessages,\r\n    pos: {\r\n        configuration: '配置',\r\n        language: '语言',\r\n        theme: {\r\n            name: '主题',\r\n            light: '浅色',\r\n            dark: '深色',\r\n        },\r\n        menu: {\r\n            analytics: '分析',\r\n            data: '数据',\r\n            sales: '销售',\r\n            catalog: '目录',\r\n            customers: '客户',\r\n            ai: 'AI',\r\n            logs: '日志',\r\n            aiConfig: 'AI设置',\r\n            appConfig: '应用配置',\r\n        },\r\n        dashboard: {\r\n            welcome: {\r\n                title: '欢迎使用《战斗天使》管理后台',\r\n                subtitle: '',\r\n            },\r\n            rooms: '房间数',\r\n            cpu: 'CPU使用率',\r\n            memory: '内存',\r\n            bugs: '错误报告',\r\n        },\r\n        activeTrend: '活跃趋势',\r\n        userTrend: '用户趋势',\r\n        retentionTrend: '留存趋势',\r\n        realtimeTrend: '实时趋势',\r\n        eventTrend: '事件趋势',\r\n        funnelTrend: '漏斗趋势',\r\n        regionDist: '地区分布数据',\r\n        languageDist: '语言分布数据',\r\n        keysEdit: '关键字编辑',\r\n        appConfigEdit: '应用配置编辑',\r\n        dateFrom: '日期(UTC)',\r\n        dateTo: '到',\r\n        selectChannel: '选择渠道',\r\n        selectVersion: '选择版本',\r\n        selectCloud: '选择云控',\r\n        selectEvent: '选择事件',\r\n        selectFunnel: '选择漏斗',\r\n        dayInfo: {\r\n            name: '昨日数据',\r\n            time: '数据更新至 %{time}',\r\n            active: '活跃用户',\r\n            new: '新增用户',\r\n            earn: '预估收入',\r\n            dod: '环比 %{value}'\r\n        },\r\n        chart: {\r\n            login: '访问次数',\r\n            active: '活跃用户',\r\n            new: '新增用户',\r\n            count: '累计用户',\r\n            today: '今日',\r\n            yesterday: '昨日',\r\n            lastWeek: '上周',\r\n            totalValue: '总值',\r\n            totalTimes: '总次数',\r\n            valuePerTime: '每次均值',\r\n            valuePerUser: '每用户值',\r\n            timesPerUser: '每用户次数',\r\n        },\r\n        retention: {\r\n            date: '日期',\r\n            d1: '次留',\r\n            d2: '二留',\r\n            d3: '三留',\r\n            d4: '四留',\r\n            d5: '五留',\r\n            d6: '六留',\r\n            d7: '七留',\r\n            d14: '十四留',\r\n            d30: '三十留',\r\n        }\r\n    },\r\n    analytics: {\r\n        users: {\r\n            name: '用户',\r\n        },\r\n        realtime: {\r\n            name: '实时',\r\n        },\r\n        events: {\r\n            name: '事件',\r\n        },\r\n        funnels: {\r\n            name: '漏斗',\r\n        },\r\n        personas: {\r\n            name: '画像',\r\n        },\r\n        keys: {\r\n            name: '关键字',\r\n        },\r\n    },\r\n    resources: {\r\n        user: {\r\n            name: '用户',\r\n            fields: {\r\n                isAnonymous: '游客',\r\n                devices: {\r\n                    id: '设备Id',\r\n                    platform: '设备平台',\r\n                },\r\n                metadata: {\r\n                    seasonHightScore: '赛季最高积分',\r\n                    seasonRewardLevel: '赛季奖励等级',\r\n                    seasonRewardScore: '赛季奖励积分',\r\n                    seasonRewardUnlockLevel: '赛季奖励解锁等级',\r\n                    coin: '金币',\r\n                    diamond: '钻石',\r\n                    isVip: '会员',\r\n                    isNewFace: '新手',\r\n                    offlineAt: '离线时间',\r\n                    heroList: '英雄列表',\r\n                    heroList_: {\r\n                        card: '卡数',\r\n                    },\r\n                    power: '实力值',\r\n                    matchPower: '匹配实力值',\r\n                },\r\n\r\n            },\r\n        },\r\n        guild: {\r\n            name: '联盟',\r\n            fields: {\r\n                name: '名称',\r\n                flag: '旗帜',\r\n                intro: '简介',\r\n                joinType: '加入类型',\r\n                membersCount: '当前人数',\r\n                membersMax: '最大人数',\r\n                memberSeasonScoreReq: '入盟最低积分',\r\n                members_: {\r\n                    name: '昵称',\r\n                    showHero: '展现英雄',\r\n                    type: '官职类型',\r\n                    onlineTime: '最后在线',\r\n                }\r\n            }\r\n        },\r\n        leaderboard: {\r\n            name: '排行榜',\r\n            fields: {\r\n                name: '名称',\r\n                total: '总数',\r\n            }\r\n        },\r\n\r\n        roomCache: {\r\n            name: '房间',\r\n            fields: {\r\n                roomId: '房间Id',\r\n                name: '房间名',\r\n                server: '服务器',\r\n                processId: '进程Id',\r\n                clients: '当前端数',\r\n                maxClients: '最大端数',\r\n                locked: '房锁',\r\n                private: '私有',\r\n                unlisted: '未上架',\r\n                users: '人员',\r\n            },\r\n        },\r\n\r\n        battleRecord: {\r\n            name: '战斗Ai',\r\n            fields: {\r\n                winRate: 'AI胜率',\r\n                aiWinCount: 'AI胜利次数',\r\n                aiInvokeCount: 'AI调用次数',\r\n            },\r\n        },\r\n\r\n        reportLog: {\r\n            name: '上报日志',\r\n            fields: {\r\n                source: '源',\r\n                condition: '状况',\r\n                stackTrace: '堆栈跟踪',\r\n            },\r\n        },\r\n\r\n        config: {\r\n            name: '配置',\r\n            fields: {\r\n                aisByTimes: '按次指定AI',\r\n            },\r\n        },\r\n\r\n    },\r\n    id: 'Id',\r\n    summary: '概要',\r\n    items: '物品',\r\n    heros: '英雄',\r\n    other: '其他',\r\n    members: '成员',\r\n    joinRequests: '加入请求',\r\n    frames: '同步帧',\r\n    level: '等级',\r\n    nickname: '昵称',\r\n    seasonLevel: '赛季等级',\r\n    seasonScore: '赛季积分',\r\n    count: '数量',\r\n    date: '日期',\r\n    lang: '语言',\r\n    version: '版本',\r\n    createdAt: '创建时间',\r\n    deleteAt: '删除时间',\r\n    loginAt: '登录时间',\r\n    offlineAt: '离线时间',\r\n    elapsedTime: '持续时间',\r\n    updatedAt: '更新时间',\r\n    region: '地区',\r\n    top10: '前10',\r\n    highest: '最高分',\r\n    lowest: '最低分',\r\n};\r\n\r\nexport default customChineseMessages;","import { TranslationMessages } from 'react-admin';\r\nimport englishMessages from 'ra-language-english';\r\n\r\nconst customEnglishMessages: TranslationMessages = {\r\n    ...englishMessages,\r\n    pos: {\r\n        configuration: 'Configuration',\r\n        language: 'Language',\r\n        theme: {\r\n            name: 'Theme',\r\n            light: 'Light',\r\n            dark: 'Dark',\r\n        },\r\n        menu: {\r\n            analytics: 'Analytics',\r\n            data: 'Data',\r\n            sales: 'Sales',\r\n            catalog: 'Catalog',\r\n            customers: 'Customers',\r\n            ai: 'AI',\r\n            logs: 'Logs',\r\n            aiConfig: 'AI Config',\r\n            appConfig: 'App Config',\r\n        },\r\n        dashboard: {\r\n            rooms: 'Rooms',\r\n            cpu: 'CPU Usage',\r\n            memory: 'Memory',\r\n            bugs: 'Bug Reports',\r\n        },\r\n        activeTrend: 'Active Trend',\r\n        userTrend: 'User Trend',\r\n        retentionTrend: 'Retention Trend',\r\n        realtimeTrend: 'Realtime Trend',\r\n        eventTrend: 'Event Trend',\r\n        funnelTrend: 'Funnel Trend',\r\n        regionDist: 'Regional Distribution',\r\n        languageDist: 'Language Distribution',\r\n        keysEdit: 'Keywords Edit',\r\n        appConfigEdit: 'App Config Edit',\r\n        dateFrom: 'Date(UTC)',\r\n        dateTo: 'To',\r\n        selectChannel: 'Select Channel',\r\n        selectVersion: 'Select Version',\r\n        selectCloud: 'Select Cloud',\r\n        selectEvent: 'Select Event',\r\n        selectFunnel: 'Select Funnel',\r\n        dayInfo: {\r\n            name: 'Yesterday',\r\n            time: 'Update to %{time}',\r\n            active: 'Active Users',\r\n            new: 'New Users',\r\n            earn: 'Earning',\r\n            dod: 'DoD %{value}'\r\n        },\r\n        chart: {\r\n            login: 'Login Times',\r\n            active: 'Active Users',\r\n            new: 'New Users',\r\n            count: 'Total Users',\r\n            today: 'Today',\r\n            yesterday: 'Yesterday',\r\n            lastWeek: 'Last Week',\r\n            totalValue: 'Total Value',\r\n            totalTimes: 'Total Times',\r\n            valuePerTime: 'Value Per Time',\r\n            valuePerUser: 'Value Per User',\r\n            timesPerUser: 'Times Per User',\r\n        },\r\n        retention: {\r\n            date: 'Date',\r\n            d1: 'D1',\r\n            d2: 'D2',\r\n            d3: 'D3',\r\n            d4: 'D4',\r\n            d5: 'D5',\r\n            d6: 'D6',\r\n            d7: 'D7',\r\n            d14: 'D14',\r\n            d30: 'D30',\r\n        }\r\n    },\r\n    analytics: {\r\n        users: {\r\n            name: 'Users',\r\n        },\r\n        realtime: {\r\n            name: 'Realtime',\r\n        },\r\n        events: {\r\n            name: 'Events',\r\n        },\r\n        funnels: {\r\n            name: 'Funnels',\r\n        },\r\n        personas: {\r\n            name: 'Personas',\r\n        },\r\n        keys: {\r\n            name: 'Keys',\r\n        },\r\n    },\r\n    resources: {\r\n        user: {\r\n            name: 'Users',\r\n        },\r\n        guild: {\r\n            name: 'Guilds',\r\n        },\r\n        leaderboard: {\r\n            name: 'Leaderboards',\r\n        },\r\n        roomCache: {\r\n            name: 'Rooms',\r\n        },\r\n        battleRecord: {\r\n            name: 'BattleAis',\r\n        },\r\n        reportLog: {\r\n            name: 'ReportLogs',\r\n        },\r\n        config: {\r\n            name: 'Config',\r\n            fields: {\r\n                aisByTimes: 'Ais By Times'\r\n            },\r\n        },\r\n    },\r\n};\r\n\r\nexport default customEnglishMessages;","\r\nimport polyglotI18nProvider from 'ra-i18n-polyglot';\r\nimport chineseMessages from '../i18n/zh';\r\nimport englishMessages from '../i18n/en';\r\nimport { resolveBrowserLocale } from 'react-admin';\r\nimport moment from 'moment';\r\nimport 'moment/locale/zh-cn';\r\n\r\nconst messages = {\r\n    zh: chineseMessages,\r\n    en: englishMessages,\r\n};\r\n\r\n\r\nexport const languageNames = {\r\n    zh: '中文',\r\n    en: 'English'\r\n}\r\n\r\nconst languageToMomentLocale = {\r\n    zh: 'zh-cn',\r\n    en: 'en'\r\n}\r\n\r\nexport const getLocale = () => {\r\n    return localStorage.getItem('locale') || resolveBrowserLocale()\r\n}\r\n\r\nexport const getMomentLocale = () => {\r\n    const l = getLocale()\r\n    return languageToMomentLocale[l] || l\r\n}\r\n\r\n// 设置本地化时间\r\nmoment.locale(getMomentLocale())\r\n\r\n/** 普通的字符串查找失败后 截取“.”后面的字符串再次翻译*/\r\nconst onMissingKey = (key: string, options: any = {}) => {\r\n    const index = key.lastIndexOf(\".\")\r\n    if (index == -1) return key\r\n    key = key.substring(index + 1)\r\n    if (typeof options.__ === 'string') {\r\n        options._ = options.__.substring(options.__.lastIndexOf(\".\") + 1)\r\n        delete options.__\r\n    }\r\n    if (key.includes(\"showHero\"))\r\n        console.log(key, options)\r\n    return translate(key, options)\r\n}\r\n\r\nexport const i18nProvider = polyglotI18nProvider(\r\n    locale => {\r\n        return messages[locale] ? messages[locale] : messages.en\r\n    }, getLocale(),\r\n    { onMissingKey }\r\n);\r\n\r\nconst translate = i18nProvider.translate\r\ni18nProvider.translate = (key: string, options: any = {}) => {\r\n    //if (key.includes('summary')) console.log(key)\r\n    //key = key.replaceAll('metadata.', '')\r\n    options.__ = options._\r\n    delete options._\r\n\r\n    if (key == null) return key\r\n\r\n    if (key.includes(\"showHero\"))\r\n        console.log(key, options)\r\n    return translate(key.replaceAll(/\\[.*?\\]/g, '_'), options)\r\n}\r\n","import * as React from 'react';\r\nimport { Card, CardContent, CardHeader, Grid, Paper, Typography, Box, Button, ButtonGroup } from '@material-ui/core';\r\nimport { withStyles, createStyles, Theme, makeStyles } from '@material-ui/core/styles';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox, { CheckboxProps } from '@material-ui/core/Checkbox';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport CheckBoxIcon from '@material-ui/icons/FiberManualRecord';\r\nimport { Styles } from '@material-ui/core/styles/withStyles';\r\nimport {\r\n    Chart as ReactChart,\r\n    AreaSeries,\r\n    ArgumentAxis,\r\n    ValueAxis,\r\n    ValueAxisProps,\r\n    BarSeries,\r\n    LineSeries,\r\n    SplineSeries,\r\n    Title,\r\n    Legend,\r\n    Tooltip,\r\n    ScatterSeries,\r\n    ZoomAndPan\r\n} from '@devexpress/dx-react-chart-material-ui';\r\nimport {\r\n    ArgumentScale,\r\n    Animation,\r\n    PathFn,\r\n    PointComponentProps,\r\n    PathPoints,\r\n    EventTracker,\r\n    HoverState,\r\n    ScaleObject,\r\n    Stack\r\n} from '@devexpress/dx-react-chart';\r\nimport { connectProps } from '@devexpress/dx-react-core';\r\nimport {\r\n    curveCatmullRom,\r\n    line,\r\n} from 'd3-shape';\r\nimport { scalePoint } from 'd3-scale';\r\nimport { format } from \"d3-format\";\r\n\r\nimport { energyConsumption as data } from './data-vizualization';\r\nimport { ComponentType } from 'react';\r\nimport { resolveBrowserLocale, useLocale } from 'react-admin';\r\nimport { getLocale } from './polyglot';\r\n\r\nconst Line = (props: LineSeries.PathSeriesProps) => (\r\n    <LineSeries.Path\r\n        {...props}\r\n        path={(line<PointComponentProps>())\r\n            .x(({ arg }) => arg)\r\n            .y(({ val }) => val)\r\n            .curve(curveCatmullRom) as any}\r\n    />\r\n);\r\n\r\nconst titleStyles: Styles<Theme, {}, \"title\"> = {\r\n    title: {\r\n        textAlign: 'center',\r\n        width: '100%',\r\n        marginBottom: '10px',\r\n    },\r\n};\r\nconst Text = withStyles(titleStyles)((props: Title.TextProps & { classes: any }) => {\r\n    const { text, classes } = props;\r\n    const [mainText, subText] = text.split('\\\\n');\r\n    return (\r\n        <div className={classes.title}>\r\n            <Typography component=\"h3\" variant=\"h5\">\r\n                {mainText}\r\n            </Typography>\r\n            <Typography variant=\"subtitle1\">{subText}</Typography>\r\n        </div>\r\n    );\r\n});\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            flexWrap: 'wrap',\r\n            '& > *': {\r\n                margin: theme.spacing(0.5),\r\n            },\r\n        },\r\n    }),\r\n);\r\n\r\nconst patchProps = ({ hoverIndex, ...props }) => ({\r\n    state: props.index === hoverIndex ? \"hovered\" : null,\r\n    ...props\r\n});\r\n\r\nconst BarPoint = (props) => <BarSeries.Point  {...patchProps(props) as any} />\r\nconst SplinePoint = (props) => <ScatterSeries.Point point={{ size: 5 }} {...patchProps(props) as any} />\r\nconst AreaPoint = (props) => {\r\n    const patched = patchProps(props);\r\n    return <ScatterSeries.Point point={patched.state ? { size: 7 } : { size: 0 }} {...patched as any} />\r\n}\r\n\r\nconst SplineWithPoints = (props) => <React.Fragment> <SplineSeries.Path {...props} /><ScatterSeries.Path {...props} /></React.Fragment>\r\nconst AreaWithPoints = ({ state, ...props }: any) => <React.Fragment> <AreaSeries.Path {...props} /> <ScatterSeries.Path {...props} /> </React.Fragment>\r\n\r\nconst TooltipContent = ({ data, series, shows, format, text, style, ...props }: Tooltip.ContentProps & { data: any[], series: any[], shows: any, format?: (tick: string) => string, style?: React.CSSProperties }) => {\r\n    const alignStyle = { ...style, paddingLeft: \"10px\" };\r\n    const tooltipFormat = format || (val => val ? formatCount(val) : \"N/A\")\r\n    const items = series.map((t, index) => {\r\n        if (!shows[t.name]) return null\r\n        const { name, valueField, color } = t\r\n        const val = data[valueField];\r\n        return (\r\n            <tr key={index}>\r\n                <td><svg width=\"10\" height=\"10\"><circle cx=\"5\" cy=\"5\" r=\"5\" fill={color || palette[index % palette.length]} /></svg></td>\r\n                <td><Tooltip.Content style={alignStyle} text={name} {...props} />\r\n                </td><td align=\"right\"><Tooltip.Content style={alignStyle} text={tooltipFormat(val)}  {...props} /></td>\r\n            </tr>\r\n        );\r\n    });\r\n    return <table>\r\n        {items}\r\n    </table>;\r\n}\r\n\r\nconst getHoverIndex = ({ target }) => (target ? target.point : -1);\r\n\r\nconst formatCount = format(\",\")\r\nconst formatW = tick => Math.abs(tick) >= 10000 ? (tick / 10000).toFixed(tick >= 100000 ? 0 : 1) + 'w' : tick\r\nconst formatK = format(\".2s\")\r\n\r\nconst palette = ['#40C4FF', '#FF5252', '#00C853', '#FFEB3B', '#FF4081', '#E040FB']\r\nexport default class MyChart extends React.PureComponent<{\r\n    classes?: { chart: string },\r\n     data: any, \r\n    rotated?: boolean,\r\n    zoom?: boolean,\r\n    type?: string, category?: string, tabs?: any[], series: any[],\r\n    valueFormat?: (scale: ScaleObject) => (tick: string) => string,\r\n    argumentFormat?: (scale: ScaleObject) => (tick: string) => string,\r\n    tooltipFormat?: (tick: string) => string\r\n    tooltipTitleFormat?: (tick: string) => string\r\n}, { tab: number, shows: any, target: any }> {\r\n    TooltipContent: any;\r\n    data: any[] = []\r\n    chartData: any[] = []\r\n    chartSeries: any[] = []\r\n    seriesList: any[] = []\r\n    BarPoint: any\r\n    SplinePoint: any\r\n    AreaPoint: any\r\n\r\n    LegendRoot: any\r\n    LegendLabel: any\r\n    LegendItem: any\r\n    LegendMarker: any\r\n\r\n    changeHoverTime: NodeJS.Timeout | null = null\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = { tab: 0, shows: {}, target: null }\r\n        this.createLegend()\r\n        this.createTooltip()\r\n    }\r\n\r\n    changeHover = (target: any) => {\r\n        //if (this.changeHoverTime)\r\n        //    clearTimeout(this.changeHoverTime)\r\n        //this.changeHoverTime = setTimeout(() => {\r\n        if (!target) {\r\n            if (!this.state.target) return\r\n            target = null\r\n        } else {\r\n            if (this.state.target && this.state.target.series == target.series && this.state.target.point == target.point) return\r\n            target = { series: target.series, point: target.point }\r\n        }\r\n        this.setState({ target })\r\n        this.changeHoverTime = null\r\n        //}, 50);\r\n    }\r\n\r\n    switchShow = (name: string) => {\r\n        const shows = JSON.parse(JSON.stringify(this.state.shows))\r\n        shows[name] = !shows[name]\r\n        if (this.props.series.find(t => shows[t.name]))\r\n            this.setState({ shows })\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        console.log(\"chart\", \"componentDidUpdate\")\r\n        if (getHoverIndex(prevState) !== getHoverIndex(this.state)) {\r\n            this.BarPoint.update();\r\n            this.SplinePoint.update();\r\n            this.AreaPoint.update();\r\n            this.TooltipContent.update();\r\n        }\r\n\r\n        if (this.props.series.length > 0 && !this.props.series.find(t => this.state.shows[t.name])) {\r\n            this.switchShow(this.props.series[0].name)\r\n            return\r\n        }\r\n\r\n        if (JSON.stringify(prevState.shows) !== JSON.stringify(this.state.shows)) {\r\n            console.log(\"chart\", \"createSeries\")\r\n            this.createSeries()\r\n            this.forceUpdate()\r\n        }\r\n    }\r\n\r\n    createLegend() {\r\n        this.LegendRoot = props => (<Legend.Root {...props} style={{ display: 'grid', gridTemplateColumns: 'auto auto auto', margin: 'auto', }} />)\r\n        this.LegendItem = props => (<Legend.Item {...props} style={{ flexDirection: 'column-reverse', paddingLeft: '0', paddingRight: '0' }} />)\r\n        this.LegendLabel = props => {\r\n            const { text: name } = props;\r\n            return (<Legend.Label onClick={() => { this.switchShow(name.toString()) }}\r\n                {...props} style={{ whiteSpace: 'nowrap', opacity: this.state.shows[name] ? 1 : 0.5 }} />)\r\n        }\r\n        this.LegendMarker = props => {\r\n            const { className, name, color } = props;\r\n            return (<svg className={className} fill={color} width=\"10\" height=\"10\"\r\n                onClick={() => { this.switchShow(name) }}>\r\n                <circle cx=\"5\" cy=\"5\" r=\"5\" fill={color} fillOpacity={this.state.shows[name] ? 1 : 0.5} />\r\n            </svg>)\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        console.log(\"chart\", \"componentWillUnmount\")\r\n        this.setState({ target: null })\r\n    }\r\n\r\n    createTooltip() {\r\n        const getHoverProps = () => ({\r\n            hoverIndex: getHoverIndex(this.state)\r\n        });\r\n        this.BarPoint = connectProps(BarPoint, getHoverProps);\r\n        this.SplinePoint = connectProps(SplinePoint, getHoverProps);\r\n        this.AreaPoint = connectProps(AreaPoint, getHoverProps);\r\n\r\n        this.TooltipContent = connectProps(TooltipContent, () => {\r\n            //const { data, target } = this.state;\r\n            return {\r\n                data: this.state.target ? this.data[this.state.target.point] : null,\r\n                series: this.props.series,\r\n                shows: this.state.shows,\r\n                format: this.props.tooltipFormat,\r\n            };\r\n        });\r\n    }\r\n\r\n    createSeries() {\r\n        /* this.chartSeries = nextProps.series.map(({ key, name, valueField, argumentField, color, show, type, scaleName }) => ({\r\n             key: key || name,\r\n             name,\r\n             valueField: valueField,\r\n             argumentField: argumentField || \"category\",\r\n             //color,\r\n             scaleName,\r\n             show,\r\n             seriesComponent: SplineWithPoints,\r\n             pointComponent: this.SplinePoint\r\n         }))\r\n         \r\n\r\n         this.chartSeries = this.props.series.map(({ key, name, valueField, argumentField, color, show, type, scaleName }, index) => (\r\n            {\r\n                key: name,\r\n                name,\r\n                valueField: valueField,\r\n                argumentField: argumentField || this.props.category,\r\n                color: color || palette[index % palette.length],\r\n                scaleName,\r\n                seriesComponent: SplineWithPoints,\r\n                pointComponent: this.SplinePoint\r\n            }\r\n        )).filter(t => this.state.shows[t.name])\r\n\r\n        this.seriesList = this.chartSeries.map(t => React.createElement(SplineSeries, t))\r\n         */\r\n\r\n        this.seriesList = this.props.series.map(({ key, name, valueField, argumentField, color, show, type, scaleName }, index) => {\r\n            if (!this.state.shows[name])\r\n                return null\r\n            const props: any = {\r\n                key: name,\r\n                name,\r\n                valueField: valueField,\r\n                argumentField: argumentField || this.props.category,\r\n                color: color || palette[index % palette.length],\r\n                scaleName,\r\n            }\r\n            let seriesType\r\n            type = type || this.props.type\r\n\r\n            console.log('chart', type)\r\n            if (type == 'bar') {\r\n                seriesType = BarSeries\r\n                props.pointComponent = this.BarPoint\r\n            } else if (type === 'area') {\r\n                seriesType = AreaSeries\r\n                props.seriesComponent = AreaWithPoints;\r\n                props.pointComponent = this.AreaPoint;\r\n            } else {\r\n                seriesType = SplineSeries\r\n                props.seriesComponent = SplineWithPoints\r\n                props.pointComponent = this.SplinePoint\r\n            }\r\n            return React.createElement(seriesType, props)\r\n        })\r\n        this.seriesList.length = 32\r\n    }\r\n\r\n    render() {\r\n        if (Array.isArray(this.props.data)) this.data = this.props.data\r\n        else if (this.props.tabs) this.data = this.props.data[this.props.tabs[this.state.tab].valueField]\r\n\r\n        const locale = getLocale()\r\n        //console.log('chartrender', this.data, this.series)\r\n\r\n        const defaultViewport = { argumentStart: (this.data[this.data.length - 12] || this.data[0])?.[this.props.category as any], argumentEnd: this.data[this.data.length - 1]?.[this.props.category as any] }\r\n        //const classes = useStyles();\r\n        //{this.props.zoom ? null : <ZoomAndPan defaultViewport={defaultViewport} />}\r\n        this.createSeries()\r\n        return (\r\n            <CardContent>\r\n                <div >\r\n                    {this.props.tabs?.map((t, index) =>\r\n                        <Chip\r\n                            size=\"small\"\r\n                            color={this.state.tab == index ? \"primary\" : \"default\"}\r\n                            onClick={() => { this.setState({ tab: index }) }}\r\n                            label={t.name}\r\n                        />\r\n                    )}\r\n                </div>\r\n                <FormGroup row>\r\n                    {this.props.series?.map((t, index) =>\r\n                        <FormControlLabel\r\n                            control={<Checkbox\r\n                                icon={<CheckBoxIcon />}\r\n                                checkedIcon={<CheckBoxIcon />}\r\n                                size=\"small\"\r\n                                style={{ color: t.color || palette[index % palette.length] }}\r\n                                checked={this.state.shows[t.name]} onChange={() => { this.switchShow(t.name) }} />}\r\n                            label={t.name}\r\n                            style={{ opacity: this.state.shows[t.name] ? 1 : 0.5 }}\r\n                        />\r\n                    )}\r\n                </FormGroup>\r\n                <ReactChart data={this.data} rotated={this.props.rotated}>\r\n                    <EventTracker />\r\n                    <ArgumentAxis tickFormat={this.props.argumentFormat} />\r\n                    <ValueAxis tickFormat={this.props.valueFormat || (locale == 'zh' ? (obj => formatW) : (obj => formatK))} />\r\n                    <HoverState hover={this.state.target} onHoverChange={this.changeHover} />\r\n                    <Tooltip targetItem={this.state.target} contentComponent={this.TooltipContent} />\r\n                    <Animation />\r\n                    {this.seriesList}\r\n                    <Stack />\r\n                </ReactChart>\r\n            </CardContent>\r\n        );\r\n    }\r\n}\r\n","import React, { PureComponent } from 'react'\r\nimport { Card, CardContent, CardHeader, Box, Avatar, Grid, Typography } from '@material-ui/core';\r\nimport { NumberField, NumberInput, useTranslate } from \"react-admin\";\r\nimport RoomIcon from '@material-ui/icons/SportsEsports';\r\nimport CpuIcon from '@material-ui/icons/Memory';\r\nimport MemoryIcon from '@material-ui/icons/Storage';\r\nimport ReportLogIcon from '@material-ui/icons/BugReport';\r\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\r\nimport { red, green, blue, yellow, deepOrange, orange } from '@material-ui/core/colors';\r\nimport { appApi } from \"../providers/dataProvider\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            '& > *': {\r\n                margin: theme.spacing(1),\r\n            },\r\n        },\r\n        card: {\r\n            //borderRadius: 12,\r\n            //textAlign: 'right',\r\n            padding: theme.spacing(1),\r\n        },\r\n        room: {\r\n            color: theme.palette.getContrastText(green[600]),\r\n            backgroundColor: green[600],\r\n            width: theme.spacing(7),\r\n            height: theme.spacing(7),\r\n        },\r\n        cpu: {\r\n            color: theme.palette.getContrastText(blue[500]),\r\n            backgroundColor: blue[500],\r\n            width: theme.spacing(7),\r\n            height: theme.spacing(7),\r\n        },\r\n        memory: {\r\n            color: theme.palette.getContrastText(orange[800]),\r\n            backgroundColor: orange[800],\r\n            width: theme.spacing(7),\r\n            height: theme.spacing(7),\r\n        },\r\n        bug: {\r\n            color: theme.palette.getContrastText(red[500]),\r\n            backgroundColor: red[500],\r\n            width: theme.spacing(7),\r\n            height: theme.spacing(7),\r\n        },\r\n        rounded: {\r\n            color: '#fff',\r\n            backgroundColor: green[500],\r\n        },\r\n        small: {\r\n            width: theme.spacing(3),\r\n            height: theme.spacing(3),\r\n        },\r\n        icon: {\r\n            width: theme.spacing(5),\r\n            height: theme.spacing(5),\r\n        },\r\n    }),\r\n);\r\n\r\ninterface State {\r\n    rooms: number;\r\n    bugs: number;\r\n    cpu: number;\r\n    memory: { totalMemMb: number, usedMemMb: number };\r\n}\r\n\r\nfunction renderSize(value: number, unit: string) {\r\n    if (unit == 'KB' && value > 100) {\r\n        unit = 'MB'\r\n        value /= 1024\r\n    }\r\n    if (unit == 'MB' && value > 100) {\r\n        unit = 'GB'\r\n        value /= 1024\r\n    }\r\n    if (unit == 'GB' && value > 100) {\r\n        unit = 'TB'\r\n        value /= 1024\r\n    }\r\n    return value.toFixed(2) + ' ' + unit;\r\n}\r\n\r\nconst UPDATE_ROOM_LIST_INTERVAL = 5000;\r\n\r\nconst MyMonitor = () => {\r\n    const [state, setState] = React.useState<{ icon: any, className: string, value: string | number, second: string }[]>([]);\r\n\r\n    const classes = useStyles();\r\n    const fetchDashboard = async () => {\r\n        var res = await appApi.post(\"dashboard\") as {\r\n            rooms: number;\r\n            bugs: number;\r\n            cpu: number;\r\n            memory: { totalMemMb: number, usedMemMb: number };\r\n        }\r\n        setState([{ icon: RoomIcon, className: classes.room, value: res.rooms, second: 'pos.dashboard.rooms' },\r\n        { icon: CpuIcon, className: classes.cpu, value: res.cpu + '%', second: 'pos.dashboard.cpu' },\r\n        { icon: MemoryIcon, className: classes.memory, value: renderSize(res.memory.usedMemMb, 'MB'), second: 'pos.dashboard.memory' },\r\n        { icon: ReportLogIcon, className: classes.bug, value: res.bugs, second: 'pos.dashboard.bugs' }])\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        fetchDashboard()\r\n        const timer = setInterval(fetchDashboard, UPDATE_ROOM_LIST_INTERVAL);\r\n        return () => clearInterval(timer);//组件卸载的时候执⾏行行\r\n    }, []);\r\n\r\n    const translate = useTranslate();\r\n    return (\r\n        <Grid container spacing={1}>\r\n            {state.map(it => (<Grid item xs={6} sm={6} md={3}>\r\n                <Card className={classes.card}>\r\n                    <Grid container spacing={1}>\r\n                        <Grid item xs={5} >\r\n                            <Avatar variant=\"rounded\" className={it.className}>\r\n                                <it.icon className={classes.icon} />\r\n                            </Avatar>\r\n                        </Grid>\r\n                        <Grid item xs={7} >\r\n                            <Typography component=\"h6\" variant=\"h6\">{it.value}</Typography>\r\n                            <Typography variant=\"subtitle1\" color=\"textSecondary\">{translate(it.second)}</Typography>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Card>\r\n            </Grid>))}\r\n        </Grid>\r\n    )\r\n}\r\nexport default MyMonitor","import moment from \"moment\"\r\n\r\nexport function getDayString(day: string | number) {\r\n    const date = moment(Number(day) * 86_400_000).utc()\r\n    return date.format(moment().utc().isSame(date, 'month') ? 'D' : 'M/D')\r\n}\r\nexport function getDayFullString(day: string | number) {\r\n    return moment(Number(day) * 86_400_000).utc().format('YYYY-MM-DD(UTC)')\r\n}\r\n\r\n\r\n/** 休眠 */\r\nexport function sleep(time: number): Promise<void> {\r\n    return new Promise((resolve) => setTimeout(resolve, time));\r\n}\r\n\r\nexport function groupChartDate(chartData: any[], groupFields: string[], firstKey: string, secondKey: string) {\r\n    const groupChartData = {}\r\n    groupFields.forEach(k => { groupChartData[k] = {} })\r\n    chartData.forEach(it => {\r\n        groupFields.forEach(k => {\r\n            const item = groupChartData[k]\r\n            const firstValue = it[firstKey]\r\n            const secondValue = it[secondKey];\r\n            (item[firstValue] || (item[firstValue] = { [firstKey]: firstValue }))[secondValue] = it[k]\r\n        })\r\n    })\r\n    groupFields.forEach(k => {\r\n        groupChartData[k] = Object.values(groupChartData[k])\r\n    })\r\n    return groupChartData\r\n}","import React from 'react';\r\nimport { withStyles, Theme, createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Box from '@material-ui/core/Box';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { useTranslate } from 'react-admin';\r\nimport { format } from \"d3-format\";\r\nimport { getDayString } from \"../utils\";\r\nimport moment from 'moment';\r\n\r\nconst StyledTableCell = withStyles((theme: Theme) =>\r\n    createStyles({\r\n        /*head: {\r\n            backgroundColor: theme.palette.common.black,\r\n            color: theme.palette.common.white,\r\n        },*/\r\n        root: {\r\n            paddingTop: theme.spacing(1),\r\n            paddingBottom: theme.spacing(1),\r\n            textAlign: 'center',\r\n        },\r\n    }),\r\n)(TableCell);\r\n\r\nconst StyledTableRow = withStyles((theme: Theme) =>\r\n    createStyles({ root: { '&:nth-of-type(odd)': { backgroundColor: theme.palette.action.hover, }, }, }),\r\n)(TableRow);\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        table: {\r\n            // minWidth: 700,\r\n        },\r\n    }));\r\n\r\nconst formatRetention = format(\".1%\")\r\nexport default function RetentionTable(props: { data: any }) {\r\n    const { data } = props;\r\n    const classes = useStyles();\r\n\r\n    const series = [1, 2, 3, 4, 5, 6, 7, 14, 30]\r\n    const xsSeries = [1, 2, 3, 7, 14]\r\n    const today = moment.utc().startOf('day').unix() / 86_400\r\n    const translate = useTranslate();//.map((it, index) => { xsSeries.includes(index) index })}\r\n    return (\r\n        <TableContainer >\r\n            <Divider />\r\n            <Table padding='none' aria-label=\"customized table\">\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <StyledTableCell >{translate('pos.retention.date')}</StyledTableCell>\r\n                        {series.map((it) => <Hidden smDown={!xsSeries.includes(it)}>\r\n                            <StyledTableCell align=\"right\">{translate('pos.retention.d' + it)}</StyledTableCell>\r\n                        </Hidden>)}\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {data.map((item) => {\r\n                        if (today <= item.day) return\r\n                        return <StyledTableRow key={item.day}>\r\n                            <StyledTableCell component=\"th\" scope=\"row\"> {getDayString(item.day)} </StyledTableCell>\r\n                            {series.map(it => <Hidden smDown={!xsSeries.includes(it)}>\r\n                                {(() => {\r\n                                    if (today < item.day + it) return <StyledTableCell align=\"right\"></StyledTableCell>\r\n                                    const r = Math.min(1, (item[`new_d${it}`]||0) / (item.new || 1))\r\n                                    return <StyledTableCell style={{ backgroundColor: `rgba(0, 0, 64, ${r * 0.5})` }} align=\"right\">\r\n                                        {formatRetention(r)?.padStart(5, '0')}</StyledTableCell>\r\n                                })()}\r\n                            </Hidden>)}\r\n                        </StyledTableRow>\r\n                    })}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    );\r\n}\r\n","import React, { useState, useContext } from \"react\";\r\nimport { adminApi, appApi } from \"./dataProvider\";\r\nimport lodash from 'lodash';\r\n\r\nconst myContext = React.createContext({} as any);\r\n\r\nexport function useMyContext() {\r\n    return useContext(myContext)\r\n}\r\n\r\nexport const ContextProvider = props => {\r\n    const [state, _setState] = React.useState<{\r\n        defaultApp: string | null;\r\n        apps: { name: string, usedMemMb: number }[];\r\n        config: any\r\n        keys: any\r\n        clientKeys?: any\r\n        flatKeys?: any\r\n    }>({\r\n        defaultApp: localStorage.getItem('defaultApp'),\r\n        apps: [],\r\n        config: {},\r\n        keys: {},\r\n        clientKeys: undefined,\r\n        flatKeys: undefined\r\n    });\r\n    adminApi.setProfile('appName', state.defaultApp)\r\n\r\n    const setState = (value: any) => {\r\n        Object.assign(state, value)\r\n        _setState({ ...state });\r\n    }\r\n    const setDefaultApp = (defaultApp: string | null) => {\r\n        if (state.defaultApp == defaultApp) return\r\n        if (defaultApp) localStorage.setItem('defaultApp', defaultApp)\r\n        else localStorage.removeItem('defaultApp')\r\n        adminApi.setProfile('appName', defaultApp)\r\n        setState({ defaultApp });\r\n    }\r\n\r\n    const setApps = (apps: { name: string, usedMemMb: number }[]) => {\r\n        if (!state.defaultApp) setDefaultApp(apps[0].name)\r\n        setState({ apps });\r\n        console.log(\"xxx2setApps\")\r\n    }\r\n    \r\n    const setConfig = (config: any) => {\r\n        appApi.apiUrl = config.roomConsoleUrl\r\n        setState({ config });\r\n    }\r\n\r\n    const setKeys = (keys: any) => {\r\n        function initializeCount(obj) {\r\n            obj._childCount = 0\r\n            obj._allChildCount = 0\r\n            for (const key in obj) {\r\n                if (key.startsWith('_')) continue\r\n                const it = obj[key]\r\n                if (!it) {\r\n                    obj._childCount++\r\n                    obj._allChildCount++\r\n                } else if (it._enable === false) {\r\n                    delete obj[key]\r\n                } else {\r\n                    initializeCount(it)\r\n                    obj._childCount++\r\n                    obj._allChildCount += it._allChildCount\r\n                }\r\n            }\r\n        }\r\n        /** 扁平化对象 */\r\n        function flattenPaths(object: any, root: string) {\r\n            const result: any[] = []\r\n            function flat(obj, path: string) {\r\n                for (const key in obj) {\r\n                    if (key.startsWith('_')) continue\r\n                    const itemPath = path + key\r\n                    const it = obj[key]\r\n                    if (!it) result.push(itemPath)\r\n                    else if (it._enable !== false) {\r\n                        if (it._allChildCount == 0)\r\n                            result.push(itemPath)\r\n                        else\r\n                            flat(it, `${itemPath}.`)\r\n                    }\r\n                }\r\n            }\r\n            flat(object, root)\r\n            return result\r\n        }\r\n        function initializeValues(object: any) {\r\n            let minFlatCount = 1\r\n            function expand(obj, path: string) {\r\n                minFlatCount += obj._childCount - 1\r\n                for (const key in obj) {\r\n                    if (key.startsWith('_')) continue\r\n                    const itemPath = path + key\r\n                    const it = obj[key]\r\n                    if (!it || it._childCount > 12) { }\r\n                    else if (it._childCount > 1 && it._expand !== true && minFlatCount > 1 && it._childCount == it._allChildCount && it._childCount <= 12) // 单个子节点在下一层展开\r\n                        it._children = flattenPaths(it, `${itemPath}.`)// 收敛\r\n                    else if (it._childCount <= 32) expand(it, `${itemPath}.`) // 展开\r\n                }\r\n            }\r\n            expand(object, '')\r\n        }\r\n        function initialize(obj) {\r\n            initializeCount(obj)\r\n            initializeValues(obj)\r\n        }\r\n\r\n        const clientKeys = lodash.cloneDeep(keys)\r\n        for (const key in clientKeys) initialize(clientKeys[key])\r\n        //const clientKeys = lodash.mapValues(keys, getClientKeys)\r\n        //console.log('xxxxxxxxxxxxxxx', clientKeys)\r\n\r\n        const getKeysList = (object: any) => {\r\n            const result: any[] = []\r\n            function flat(obj, path: string) {\r\n                for (const key in obj) {\r\n                    if (key.startsWith('_')) continue\r\n                    const itemPath = path + key\r\n                    const it = obj[key]\r\n                    if (!it) result.push(itemPath)\r\n                    else if (it._childCount > 32) continue\r\n                    else if (it._childCount == 0 || it._children) result.push(itemPath)\r\n                    else flat(it, `${itemPath}.`)\r\n                }\r\n            }\r\n            flat(object, '')\r\n            return result\r\n        }\r\n\r\n        const flatKeys = {}\r\n        for (const key in clientKeys) flatKeys[key] = getKeysList(clientKeys[key])\r\n        setState({ keys, clientKeys, flatKeys });\r\n    }\r\n\r\n    return (\r\n        <myContext.Provider value={{ state, setDefaultApp, setApps, setKeys, setConfig, setState }}>\r\n            {props.children}\r\n        </myContext.Provider>\r\n    )\r\n}","import * as React from \"react\";\r\nimport { Card, CardContent, CardHeader, Container, Box, Grid, Typography } from '@material-ui/core';\r\n//import Tabs from '@mui/material/Tabs';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport { NumberField, NumberInput, useTranslate } from \"react-admin\";\r\nimport RoomIcon from '@material-ui/icons/SportsEsports';\r\nimport CpuIcon from '@material-ui/icons/Memory';\r\nimport MemoryIcon from '@material-ui/icons/Storage';\r\nimport UserIcon from '@material-ui/icons/Group';\r\nimport GuildIcon from '@material-ui/icons/Flag';\r\nimport RecordIcon from '@material-ui/icons/History';\r\nimport ReportLogIcon from '@material-ui/icons/BugReport';\r\nimport { withStyles, makeStyles, createStyles, Theme } from '@material-ui/core/styles';\r\nimport { red, green, blue, yellow, deepOrange, orange } from '@material-ui/core/colors';\r\nimport { adminApi, appApi } from \"../providers/dataProvider\";\r\nimport MyChart from \"../components/MyChart\";\r\nimport MyMonitor from \"../components/MyMonitor\";\r\nimport MyInfo from \"../components/MyInfo\";\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport { format } from \"d3-format\";\r\nimport { getDayString, getDayFullString } from \"../utils\";\r\nimport moment from \"moment\";\r\nimport RetentionTable from \"../components/RetentionTable\";\r\nimport { useMyContext } from \"../providers/contextProvider\";\r\n\r\nconst formatCount = format(\",\")\r\nconst formatDoD = format(\"+.2%\")\r\n\r\nexport default () => {\r\n    const myContext = useMyContext()\r\n    const [state, setState] = React.useState<{ yesterdayData: any[], chartActiveData: any[] }>({\r\n        yesterdayData: [],\r\n        chartActiveData: [],\r\n    });\r\n\r\n    React.useEffect((async () => {\r\n        if (!adminApi.token) return\r\n        const dayEnd = moment.utc().startOf('day').unix() / 86_400\r\n        const dayBegin = dayEnd - 30\r\n        const body: any = {\r\n            dayEnd,\r\n            dayBegin,\r\n            values: ['new', 'active', 'count', ...[1, 2, 3, 4, 5, 6, 7, 14, 30].map(t => `new_d${t}`)],\r\n        };\r\n\r\n        const chartActiveData = await adminApi.post(\"analytics\", body)\r\n        const yesterdayItem = chartActiveData.find(t => t.day == dayEnd - 1)\r\n        const twoDaysAgoItem = chartActiveData.find(t => t.day == dayEnd - 2)\r\n        const yesterdayData = [{\r\n            name: 'pos.dayInfo.active',\r\n            value: formatCount(yesterdayItem?.active ?? 0),\r\n            dod: ((yesterdayItem?.active ?? 0) - (twoDaysAgoItem?.active ?? 0)) / (twoDaysAgoItem?.active || 1)\r\n        }, {\r\n            name: 'pos.dayInfo.new',\r\n            value: formatCount(yesterdayItem?.new ?? 0),\r\n            dod: ((yesterdayItem?.new ?? 0) - (twoDaysAgoItem?.new ?? 0)) / (twoDaysAgoItem?.new || 1)\r\n        }, {\r\n            name: 'pos.dayInfo.earn',\r\n            value: formatCount(0),\r\n            dod: 0,\r\n        }];\r\n\r\n        setState({ yesterdayData, chartActiveData })\r\n    }) as any, []);\r\n\r\n    const translate = useTranslate();\r\n    return (\r\n        <Box >\r\n            <Container maxWidth=\"xl\">\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12}>\r\n                        <Card>\r\n                            <CardHeader title={translate('pos.dayInfo.name')} subheader={translate('pos.dayInfo.time', {\r\n                                time: moment().utc().startOf('day').local().format('YYYY-MM-DD HH:mm')\r\n                            })} />\r\n                            <CardContent>\r\n                                <Grid container spacing={1}>\r\n                                    {state.yesterdayData.map(t =>\r\n                                        <Grid item xs={4} >\r\n                                            <Typography color=\"textSecondary\" variant=\"overline\" gutterBottom>{translate(t.name)}</Typography>\r\n                                            <Box sx={{ alignItems: 'center', display: 'flex' }}>\r\n                                                <Typography color=\"textPrimary\" variant=\"h5\">{t.value}</Typography>\r\n                                                {t.dod < 0 ? <ArrowDownwardIcon color=\"error\" /> : <ArrowUpwardIcon color=\"primary\" />}\r\n                                            </Box>\r\n                                            <Box sx={{ alignItems: 'center', display: 'flex', pt: 2 }}>\r\n                                                <Typography variant=\"caption\" color=\"textSecondary\">{translate('pos.dayInfo.dod', { value: formatDoD(t.dod) })}</Typography>\r\n                                            </Box>\r\n                                        </Grid>)}\r\n                                </Grid>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>\r\n                    {myContext.state.config.roomConsoleUrl ? <Grid item xs={12}><MyMonitor /></Grid> : null}\r\n                    <Grid item xs={12}>\r\n                        <Card>\r\n                            <CardHeader title={translate('pos.activeTrend')} />\r\n                            <MyChart data={state.chartActiveData}\r\n                                series={[\r\n                                    { name: translate('pos.chart.new'), valueField: \"new\" },\r\n                                    { name: translate('pos.chart.active'), valueField: \"active\" },\r\n                                    { name: translate('pos.chart.count'), valueField: \"count\" },\r\n                                ]}\r\n                                category={'day'}\r\n                                argumentFormat={obj => getDayString}\r\n                                tooltipTitleFormat={getDayFullString} />\r\n                        </Card>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Card>\r\n                            <CardHeader title={translate('pos.retentionTrend')} />\r\n                            <RetentionTable data={state.chartActiveData} />\r\n                        </Card>\r\n                    </Grid>\r\n                </Grid >\r\n            </Container>\r\n        </Box >\r\n    );\r\n}","import { adminApi } from \"./dataProvider\";\r\n\r\nconst authProvider = {\r\n    // called when the user attempts to log in\r\n    login: async ({ username, password }) => {\r\n        const res = await adminApi.post('login', { username, password })\r\n        adminApi.token = res.token\r\n        localStorage.setItem('username', username);\r\n        localStorage.setItem('role', res.role);\r\n        localStorage.setItem(\r\n            'avatar',\r\n            'data:image/jpeg;base64,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'\r\n        );\r\n        // accept all username/password combinations\r\n        //return Promise.resolve();\r\n    },\r\n    // called when the user clicks on the logout button\r\n    logout: () => {\r\n        adminApi.token = null\r\n        localStorage.removeItem('username');\r\n        localStorage.removeItem('role');\r\n        localStorage.removeItem('avatar');\r\n        return Promise.resolve();\r\n    },\r\n    // called when the API returns an error\r\n    checkError: ({ status }) => {\r\n        if (status === 401 || status === 403) {\r\n            adminApi.token = null\r\n            localStorage.removeItem('username');\r\n            localStorage.removeItem('role');\r\n            localStorage.removeItem('avatar');\r\n            return Promise.reject();\r\n        }\r\n        return Promise.resolve();\r\n    },\r\n    // called when the user navigates to a new location, to check for authentication\r\n    checkAuth: () => {\r\n        return localStorage.getItem('username')\r\n            ? Promise.resolve()\r\n            : Promise.reject();\r\n    },\r\n    // called when the user navigates to a new location, to check for permissions / roles\r\n    getPermissions: () => {\r\n        const role = localStorage.getItem('role');\r\n        return Promise.resolve(role);\r\n    },\r\n};\r\n\r\nexport default authProvider","import { Reducer } from 'redux';\r\n//import { CHANGE_THEME, changeTheme } from './configuration/actions';\r\nimport { ThemeName } from './types';\r\nimport { useSelector } from 'react-redux';\r\nimport { AppState } from './types';\r\n\r\nconst CHANGE_THEME = 'CHANGE_THEME';\r\n\r\nexport const changeTheme = (theme: ThemeName) => ({\r\n    type: CHANGE_THEME,\r\n    payload: theme,\r\n});\r\n\r\nexport const GetTheme = (): ThemeName => {\r\n    return useSelector((state: AppState) => state.theme || localStorage.getItem('theme') as ThemeName || 'dark')\r\n}\r\n\r\ntype State = ThemeName | undefined | null;\r\ntype Action =\r\n    | ReturnType<typeof changeTheme>\r\n    | { type: 'OTHER_ACTION'; payload?: any };\r\n\r\nconst themeReducer: Reducer<State, Action> = (\r\n    previousState,\r\n    action\r\n) => {\r\n    //console.log('themeReducerx', previousState, action.type, action.payload)\r\n    if (action.type === CHANGE_THEME) {\r\n        localStorage.setItem('theme', action.payload)\r\n        return action.payload;\r\n    }\r\n    return previousState || null\r\n};\r\n\r\nexport default themeReducer;\r\n","export default {\r\n  overrides: {\r\n    /*MuiButton: { // override the styles of all instances of this component\r\n      root: { // Name of the rule\r\n        color: 'white', // Some CSS\r\n      },\r\n    },*/\r\n    MuiTextField: {\r\n      root: {\r\n        width: '100%',\r\n      },\r\n    },\r\n    RaFormInput: { input: { width: '100%' } },\r\n    /*MuiPaper: {\r\n      root: {\r\n        marginBottom: '0.5em',\r\n      },\r\n    },*/\r\n  },\r\n}","\r\n// import { defaultTheme } from 'react-admin';\r\n// const myTheme = merge({}, defaultTheme, {\r\n//     /*palette: {\r\n//       primary: indigo,\r\n//       secondary: pink,\r\n//       error: red,\r\n//       contrastThreshold: 3,\r\n//       tonalOffset: 0.2,\r\n//     },\r\n//     typography: {\r\n//       // Use the system font instead of the default Roboto font.\r\n//       fontFamily: ['-apple-system', 'BlinkMacSystemFont', '\"Segoe UI\"', 'Arial', 'sans-serif'].join(','),\r\n//     },*/\r\n//     overrides: {\r\n//         /*MuiButton: { // override the styles of all instances of this component\r\n//           root: { // Name of the rule\r\n//             color: 'white', // Some CSS\r\n//           },\r\n//         },*/\r\n//         MuiTextField: {\r\n//             root: {\r\n//                 width: '100%',\r\n//             },\r\n//         },\r\n//         RaFormInput: { input: { width: '100%' } },\r\n//     },\r\n//     sidebar: {\r\n//         width: 160, // The default value is 240\r\n//         //closedWidth: 70, // The default value is 55\r\n//     },\r\n// });\r\nimport light from './light';\r\nimport dark from './dark';\r\nimport defaultTheme from './default';\r\nimport merge from 'lodash/merge';\r\n\r\nimport { ThemeOptions } from '@material-ui/core';\r\n\r\nconst themes: { [key: string]: ThemeOptions } = { light, dark }\r\n\r\nfor (const key in themes) {\r\n    themes[key] = merge({}, defaultTheme, themes[key])\r\n}\r\nexport default themes","export default {\r\n    palette: {\r\n        primary: {\r\n            main: '#4f3cc9',\r\n        },\r\n        secondary: {\r\n            light: '#5f5fc4',\r\n            main: '#283593',\r\n            dark: '#001064',\r\n            contrastText: '#fff',\r\n        },\r\n        background: {\r\n            default: '#fcfcfe',\r\n        },\r\n        type: 'light' as 'light',\r\n    },\r\n    shape: {\r\n        borderRadius: 10,\r\n    },\r\n    overrides: {\r\n        RaMenuItemLink: {\r\n            root: {\r\n                borderLeft: '3px solid #fff',\r\n            },\r\n            active: {\r\n                borderLeft: '3px solid #4f3cc9',\r\n            },\r\n        },\r\n        MuiPaper: {\r\n            elevation1: {\r\n                boxShadow: 'none',\r\n            },\r\n            root: {\r\n                border: '1px solid #e0e0e3',\r\n                backgroundClip: 'padding-box',\r\n            },\r\n        },\r\n        MuiButton: {\r\n            contained: {\r\n                backgroundColor: '#fff',\r\n                color: '#4f3cc9',\r\n                boxShadow: 'none',\r\n            },\r\n        },\r\n        MuiButtonBase: {\r\n            root: {\r\n                '&:hover:active::after': {\r\n                    // recreate a static ripple color\r\n                    // use the currentColor to make it work both for outlined and contained buttons\r\n                    // but to dim the background without dimming the text,\r\n                    // put another element on top with a limited opacity\r\n                    content: '\"\"',\r\n                    display: 'block',\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    position: 'absolute',\r\n                    top: 0,\r\n                    right: 0,\r\n                    backgroundColor: 'currentColor',\r\n                    opacity: 0.3,\r\n                    borderRadius: 'inherit',\r\n                },\r\n            },\r\n        },\r\n        MuiAppBar: {\r\n            colorSecondary: {\r\n                color: '#808080',\r\n                backgroundColor: '#fff',\r\n            },\r\n        },\r\n        MuiLinearProgress: {\r\n            colorPrimary: {\r\n                backgroundColor: '#f5f5f5',\r\n            },\r\n            barColorPrimary: {\r\n                backgroundColor: '#d7d7d7',\r\n            },\r\n        },\r\n        MuiFilledInput: {\r\n            root: {\r\n                backgroundColor: 'rgba(0, 0, 0, 0.04)',\r\n                '&$disabled': {\r\n                    backgroundColor: 'rgba(0, 0, 0, 0.04)',\r\n                },\r\n            },\r\n        },\r\n        MuiSnackbarContent: {\r\n            root: {\r\n                border: 'none',\r\n            },\r\n        },\r\n    },\r\n    props: {\r\n        MuiButtonBase: {\r\n            // disable ripple for perf reasons\r\n            disableRipple: true,\r\n        },\r\n    },\r\n};\r\n","export default {\r\n    palette: {\r\n        primary: {\r\n            main: '#90caf9',\r\n        },\r\n        secondary: {\r\n            main: '#FBBA72',\r\n        },\r\n        type: 'dark' as 'dark', // Switching the dark mode on is a single property value change.\r\n    },\r\n    overrides: {\r\n        MuiAppBar: {\r\n            colorSecondary: {\r\n                color: '#ffffffb3',\r\n                backgroundColor: '#616161e6',\r\n            },\r\n        },\r\n        MuiPaper: {\r\n            //elevation1: {\r\n            //    boxShadow: 'none',\r\n            //},\r\n            root: {\r\n                border: '1px solid #414141e6',\r\n                //backgroundClip: 'padding-box',\r\n            },\r\n        },\r\n        MuiButtonBase: {\r\n            root: {\r\n                '&:hover:active::after': {\r\n                    // recreate a static ripple color\r\n                    // use the currentColor to make it work both for outlined and contained buttons\r\n                    // but to dim the background without dimming the text,\r\n                    // put another element on top with a limited opacity\r\n                    content: '\"\"',\r\n                    display: 'block',\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    position: 'absolute',\r\n                    top: 0,\r\n                    right: 0,\r\n                    backgroundColor: 'currentColor',\r\n                    opacity: 0.3,\r\n                    borderRadius: 'inherit',\r\n                },\r\n            },\r\n        },\r\n    },\r\n    props: {\r\n        MuiButtonBase: {\r\n            // disable ripple for perf reasons\r\n            disableRipple: true,\r\n        },\r\n    },\r\n};\r\n","import * as React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport { useTranslate, useLocale, useSetLocale, Title } from 'react-admin';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardActions from '@material-ui/core/CardActions';\r\n//import { changeTheme } from './actions';\r\nimport { AppState } from '../types';\r\n\r\nimport { ThemeName } from '../types';\r\nimport { getMomentLocale, languageNames } from '../components/polyglot';\r\nimport { changeTheme, GetTheme } from '../themeReducer';\r\nimport themes from '../themes';\r\nimport moment from 'moment';\r\n\r\nconst useStyles = makeStyles({\r\n    label: { width: '10em', display: 'inline-block' },\r\n    button: { margin: '1em' },\r\n});\r\n\r\nconst Configuration = () => {\r\n    const translate = useTranslate();\r\n    const locale = useLocale();\r\n    const _setLocale = useSetLocale();\r\n    const setLocale = (value: string) => {\r\n        if (value == locale) return\r\n        localStorage.setItem('locale', value)\r\n        moment.locale(value)\r\n        return _setLocale(value)\r\n    }\r\n\r\n    const classes = useStyles();\r\n    const theme = GetTheme();\r\n    const dispatch = useDispatch();\r\n    return (\r\n        <Box>\r\n            <Card>\r\n                <CardContent>\r\n                    <Typography gutterBottom variant=\"h5\" component=\"div\">\r\n                        {translate('pos.theme.name')}\r\n                    </Typography>\r\n                    <Typography >\r\n                        {Object.entries(themes).map(t =>\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                className={classes.button}\r\n                                color={theme === t[0] ? 'primary' : 'default'}\r\n                                onClick={() => dispatch(changeTheme(t[0] as ThemeName))}\r\n                            >\r\n                                {translate(`pos.theme.${t[0]}`)}\r\n                            </Button>)\r\n                        }\r\n                    </Typography>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n                <CardContent>\r\n                    <Typography gutterBottom variant=\"h5\" component=\"div\">\r\n                        {translate('pos.language')}\r\n                    </Typography>\r\n                    <Typography >\r\n                        {Object.entries(languageNames).map(t =>\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                className={classes.button}\r\n                                color={locale === t[0] ? 'primary' : 'default'}\r\n                                onClick={() => setLocale(t[0])}\r\n                            >\r\n                                {t[1]}\r\n                            </Button>)\r\n                        }\r\n                    </Typography>\r\n                </CardContent>\r\n            </Card>\r\n        </Box >\r\n    );\r\n};\r\n\r\nexport default Configuration;\r\n","import { TextField } from '@material-ui/core';\r\nimport Grid, { GridSize } from '@material-ui/core/Grid';\r\nimport { useTranslate } from \"react-admin\";\r\nimport lodash from 'lodash';\r\nimport { useMyContext } from '../providers/contextProvider';\r\n\r\nexport default (props) => {\r\n    const { state } = useMyContext()\r\n    const types = ['channel', 'version', 'cloud', 'event'].filter(t => props.values.hasOwnProperty(t))\r\n    const md = ([12, 12, 6, 4, 6] as GridSize[])[types.length]\r\n    const translate = useTranslate();\r\n    const multipleType = types.find(t => lodash.get(state.clientKeys[t], props.values[t])?._children)\r\n    return (\r\n        <Grid container spacing={3}>\r\n            {(props.values.dayBegin) ? (<Grid item md={6} xs={12} >\r\n                <TextField id=\"dayBegin\" name=\"dayBegin\" onChange={props.onChange} type=\"date\" label={translate('pos.dateFrom')} defaultValue={props.values.dayBegin} variant=\"outlined\" required />\r\n            </Grid>) : null}\r\n            {(props.values.dayEnd) ? (<Grid item md={6} xs={12} >\r\n                <TextField id=\"dayEnd\" name=\"dayEnd\" onChange={props.onChange} type=\"date\" label={translate('pos.dateTo')} defaultValue={props.values.dayEnd} variant=\"outlined\" required />\r\n            </Grid>) : null}\r\n            {types.map(type => {\r\n                const item = state.flatKeys[type]\r\n                const itemClientKeys = state.clientKeys[type]\r\n                const itemValue = props.values[type]\r\n                return (<Grid item md={md} xs={12} >\r\n                    <TextField\r\n                        fullWidth\r\n                        label={translate('pos.select' + type.charAt(0).toUpperCase() + type.slice(1))}\r\n                        name={type}\r\n                        onChange={props.onChange}\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        value={itemValue}\r\n                        variant=\"outlined\"\r\n                    >\r\n                        {type != 'event' ? (<option key={''} value={''} ></option>) : null}\r\n                        {item.map(key => {\r\n                            const it = lodash.get(itemClientKeys, key)\r\n                            return <option key={key} disabled={multipleType && multipleType != type && it?._children} value={key} >{it?._name || key}{it?._children?'...':''}</option>\r\n                        })}\r\n                    </TextField>\r\n                </Grid>)\r\n            })}\r\n        </Grid>\r\n    )\r\n}","import * as React from \"react\";\r\nimport { Card, CardContent, CardHeader, Container, Box, Grid, TextField } from '@material-ui/core';\r\nimport { useTranslate } from \"react-admin\";\r\nimport moment from \"moment\";\r\nimport lodash from 'lodash';\r\nimport queryString from 'query-string'\r\nimport { format } from \"d3-format\";\r\nimport { getDayString, getDayFullString, groupChartDate } from \"../../utils\";\r\nimport { adminApi } from \"../../providers/dataProvider\";\r\nimport { useMyContext } from \"../../providers/contextProvider\";\r\nimport MyChart from \"../../components/MyChart\";\r\nimport AnalyticsQuery from \"../../components/AnalyticsQuery\";\r\n\r\nexport default (props) => {\r\n    const myContext = useMyContext()\r\n    if (!myContext.state.clientKeys) return <Box />\r\n\r\n    const query = Object.assign({\r\n        dayBegin: moment.utc().startOf('day').subtract(14, 'days').format('YYYY-MM-DD'),\r\n        dayEnd: moment.utc().startOf('day').format('YYYY-MM-DD'),\r\n        channel: '',\r\n        version: '',\r\n        cloud: ''\r\n    }, queryString.parse(props.location.search))\r\n\r\n    const [state, setState] = React.useState<{ chartData: any, series: any[], tabs?: any[], series2: any[], tabs2?: any[] }>({\r\n        chartData: [],\r\n        series: [],\r\n        tabs: undefined,\r\n        series2: [],\r\n        tabs2: undefined\r\n    })\r\n\r\n    const handleChange = async (event) => {\r\n        query[event.target.name] = event.target.value\r\n        props.history.push(props.location.pathname + '?' + queryString.stringify(query))\r\n    }\r\n\r\n    const updateApi = async () => {\r\n        const firstKey = 'day'\r\n        const filterKeys = ['channel', 'version', 'cloud']\r\n        const seriesKeys = ['new', 'active', 'login']\r\n        const retentionKeys = [1, 2, 3, 4, 5, 6, 7, 14, 30]\r\n        const secondKeys = {}\r\n        const filterPaths = {}\r\n        filterKeys.forEach(t => {\r\n            const path = query[t] as any\r\n            const children = lodash.get(myContext.state.clientKeys[t], path)?._children\r\n            filterPaths[t] = path\r\n            if (children) secondKeys[t] = children\r\n        })\r\n        const body: any = {\r\n            dayEnd: moment.utc(query.dayEnd).unix() / 86_400,\r\n            dayBegin: moment.utc(query.dayBegin).unix() / 86_400,\r\n            keys: [firstKey, ...Object.keys(secondKeys)],\r\n            values: [...seriesKeys, ...retentionKeys.map(t => `new_d${t}`)],\r\n            ...filterPaths, ...secondKeys\r\n        }\r\n\r\n        const chartData = await adminApi.post(\"analytics\", body)\r\n        chartData.forEach(it => {\r\n            retentionKeys.forEach(k => {\r\n                it[`d${k}`] = Math.min(1, (it[`new_d${k}`] || 0) / (it.new || 1))\r\n            })\r\n        })\r\n        const seriesOrTabs = seriesKeys.map(t => ({ name: translate(`pos.chart.${t}`) || t, valueField: t, }))\r\n        const seriesOrTabs2 = retentionKeys.map(t => ({ name: translate(`pos.retention.d${t}`) || t, valueField: `d${t}`, }))\r\n\r\n        const secondKey = Object.keys(secondKeys)[0]\r\n        if (!secondKey) {\r\n            setState({ chartData, series: seriesOrTabs, series2: seriesOrTabs2 })\r\n        } else {\r\n            const groupFields = [...seriesKeys, ...retentionKeys.map(t => `d${t}`)]\r\n            const newData = groupChartDate(chartData, groupFields, firstKey, secondKey)\r\n            const cutNameStart = filterPaths[secondKey].length + 1\r\n            const series = secondKeys[secondKey].map(t => ({\r\n                name: lodash.get(myContext.state.clientKeys[secondKey], t)?._name || t.substring(cutNameStart),\r\n                valueField: t\r\n            }))\r\n            setState({ chartData: newData, series, tabs: seriesOrTabs, series2: series, tabs2: seriesOrTabs2 })\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => { updateApi() }, [myContext.state.clientKeys, ...Object.values(query)])\r\n\r\n    const translate = useTranslate()\r\n    return (\r\n        <Box >\r\n            <Container maxWidth=\"xl\">\r\n                <Grid item xs={12}>\r\n                    <CardContent>\r\n                        <AnalyticsQuery onChange={handleChange} values={query} />\r\n                    </CardContent>\r\n                </Grid>\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12}>\r\n                        <Card>\r\n                            <CardHeader title={translate('pos.userTrend')} />\r\n                            <MyChart data={state.chartData} tabs={state.tabs} series={state.series}\r\n                                argumentFormat={obj => getDayString}\r\n                                tooltipTitleFormat={getDayFullString}\r\n                                category={'day'}\r\n                            />\r\n                        </Card>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12}>\r\n                        <Card>\r\n                            <CardHeader title={translate('pos.retentionTrend')} />\r\n                            <MyChart data={state.chartData} tabs={state.tabs2} series={state.series2}\r\n                                argumentFormat={obj => getDayString}\r\n                                valueFormat={obj => format(\".1%\")}\r\n                                tooltipFormat={format(\".2%\")}\r\n                                tooltipTitleFormat={getDayFullString}\r\n                                category={'day'}\r\n                            />\r\n                        </Card>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n        </Box >\r\n    )\r\n}","import * as React from \"react\";\r\nimport { Card, CardContent, CardHeader } from '@material-ui/core';\r\n//import Tabs from '@mui/material/Tabs';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Box from '@material-ui/core/Box';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport { NumberField, NumberInput, useTranslate } from \"react-admin\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport RoomIcon from '@material-ui/icons/SportsEsports';\r\nimport CpuIcon from '@material-ui/icons/Memory';\r\nimport MemoryIcon from '@material-ui/icons/Storage';\r\nimport UserIcon from '@material-ui/icons/Group';\r\nimport GuildIcon from '@material-ui/icons/Flag';\r\nimport RecordIcon from '@material-ui/icons/History';\r\nimport ReportLogIcon from '@material-ui/icons/BugReport';\r\nimport { withStyles, makeStyles, createStyles, Theme } from '@material-ui/core/styles';\r\nimport { red, green, blue, yellow, deepOrange, orange } from '@material-ui/core/colors';\r\nimport { adminApi, appApi } from \"../../providers/dataProvider\";\r\nimport MyChart from \"../../components/MyChart\";\r\n//import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend as Relegend, ResponsiveContainer } from 'recharts';\r\nimport { energyConsumption as data } from '../../components/data-vizualization';\r\nimport moment from \"moment\";\r\nimport { sleep } from \"../../utils\";\r\n\r\nexport default () => {\r\n    const [state, setState] = React.useState<{ realtime: any }>({\r\n        realtime: [],\r\n    });\r\n\r\n    interface RealtimeItem { hours: number, login: number, new: number, active: number }\r\n    let realtimeData: RealtimeItem[]\r\n\r\n    const updateRealtime = async (hours: number[]) => {\r\n        const hoursEnd = moment().startOf('hour').unix() / 3600\r\n        const res: RealtimeItem[] = await adminApi.post(\"realtime\", { hours })\r\n        if (!realtimeData) realtimeData = res\r\n        else {\r\n            for (const it of res) {\r\n                const index = realtimeData.findIndex(t => t.hours == it.hours)\r\n                if (index != -1) realtimeData.splice(index, 1, it)\r\n                else realtimeData.push(it)\r\n            }\r\n        }\r\n        const realtime = { login: [] as any[], new: [] as any[], active: [] as any[] }\r\n        for (let i = 0; i <= 24; ++i) {\r\n            const hours = hoursEnd - i\r\n            realtime.login[i] = { hours }\r\n            realtime.new[i] = { hours }\r\n            realtime.active[i] = { hours }\r\n        }\r\n        const today = realtimeData.filter(t => t.hours >= hoursEnd - 24)\r\n        for (const it of today) {\r\n            const index = hoursEnd - it.hours\r\n            realtime.login[index].today = it.login\r\n            realtime.new[index].today = it.new\r\n            realtime.active[index].today = it.active\r\n        }\r\n        const yesterday = realtimeData.filter(t => t.hours <= hoursEnd - 24 && t.hours >= hoursEnd - 48)\r\n        for (const it of yesterday) {\r\n            const index = hoursEnd - 24 - it.hours\r\n            realtime.login[index].yesterday = it.login\r\n            realtime.new[index].yesterday = it.new\r\n            realtime.active[index].yesterday = it.active\r\n        }\r\n        const lastWeek = realtimeData.filter(t => t.hours <= hoursEnd - 168 && t.hours >= hoursEnd - 192)\r\n        for (const it of lastWeek) {\r\n            const index = hoursEnd - 168 - it.hours\r\n            realtime.login[index].lastWeek = it.login\r\n            realtime.new[index].lastWeek = it.new\r\n            realtime.active[index].lastWeek = it.active\r\n        }\r\n        setState({ realtime })\r\n\r\n        setTimeout(() => {\r\n\r\n        }, 5000);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        let stop = false\r\n        const update = async () => {\r\n            const hours: number[] = []\r\n            const hoursEnd = moment().startOf('hour').unix() / 3600\r\n            for (let i = 0; i <= 48; ++i) hours.push(hoursEnd - i)\r\n            for (let i = 0; i <= 48; ++i) hours.push(hoursEnd - i - 168)\r\n            await updateRealtime(hours)\r\n            while (!stop) {\r\n                await sleep(5000)\r\n                await updateRealtime([moment().startOf('hour').unix() / 3600])\r\n            }\r\n        }\r\n        update()\r\n        return () => { stop = true };//组件卸载的时候执⾏行行\r\n    }, []);\r\n\r\n    const translate = useTranslate();\r\n    return (\r\n        <Card>\r\n            <CardHeader title={translate('pos.realtimeTrend')} />\r\n            <MyChart data={state.realtime} tabs={[\r\n                { name: translate('pos.chart.login'), valueField: \"login\", argumentField: 'hours' },\r\n                { name: translate('pos.chart.new'), valueField: \"new\", argumentField: 'hours' },\r\n                { name: translate('pos.chart.active'), valueField: \"active\", argumentField: 'hours' },\r\n            ]} series={[\r\n                { name: translate('pos.chart.today'), valueField: \"today\", argumentField: 'hours' },\r\n                { name: translate('pos.chart.yesterday'), valueField: \"yesterday\", argumentField: 'hours' },\r\n                { name: translate('pos.chart.lastWeek'), valueField: \"lastWeek\", argumentField: 'hours' },\r\n            ]}\r\n                argumentFormat={obj => tick => (new Date(Number(tick) * 3_600_000)).getHours().toString()}\r\n                tooltipTitleFormat={tick => (new Date(Number(tick) * 3_600_000)).getHours().toString()+':00'}\r\n            />\r\n        </Card>\r\n    );\r\n}","import * as React from \"react\";\r\nimport { Card, CardContent, CardHeader, Container, Box, Grid, TextField } from '@material-ui/core';\r\nimport { useTranslate } from \"react-admin\";\r\nimport moment from \"moment\";\r\nimport lodash from 'lodash';\r\nimport queryString from 'query-string'\r\nimport { format } from \"d3-format\";\r\nimport { getDayString, getDayFullString, groupChartDate } from \"../../utils\";\r\nimport { adminApi } from \"../../providers/dataProvider\";\r\nimport { useMyContext } from \"../../providers/contextProvider\";\r\nimport MyChart from \"../../components/MyChart\";\r\nimport AnalyticsQuery from \"../../components/AnalyticsQuery\";\r\n\r\nexport default (props) => {\r\n    const myContext = useMyContext()\r\n    if (!myContext.state.clientKeys) return <Box />\r\n\r\n    const query = Object.assign({\r\n        dayBegin: moment.utc().startOf('day').subtract(14, 'days').format('YYYY-MM-DD'),\r\n        dayEnd: moment.utc().startOf('day').format('YYYY-MM-DD'),\r\n        channel: '',\r\n        version: '',\r\n        cloud: '',\r\n        event: myContext.state.flatKeys.event[0]\r\n    }, queryString.parse(props.location.search))\r\n\r\n    const [state, setState] = React.useState<{ chartData: any, series: any[], tabs?: any[] }>({\r\n        chartData: [],\r\n        series: [],\r\n        tabs: undefined,\r\n    })\r\n\r\n    const handleChange = async (event) => {\r\n        query[event.target.name] = event.target.value\r\n        props.history.push(props.location.pathname + '?' + queryString.stringify(query))\r\n    }\r\n\r\n    const updateApi = async () => {\r\n        const firstKey = 'day'\r\n        const filterKeys = ['channel', 'version', 'cloud']\r\n        const seriesKeys = ['active']\r\n        const eventKey = 'event.' + query.event\r\n        const secondKeys = {}\r\n        const filterPaths = {}\r\n        filterKeys.forEach(t => {\r\n            const path = query[t] as any\r\n            const children = lodash.get(myContext.state.clientKeys[t], path)?._children\r\n            filterPaths[t] = path\r\n            if (children) secondKeys[t] = children\r\n        })\r\n        const body: any = {\r\n            dayEnd: moment.utc(query.dayEnd).unix() / 86_400,\r\n            dayBegin: moment.utc(query.dayBegin).unix() / 86_400,\r\n            keys: [firstKey, ...Object.keys(secondKeys)],\r\n            values: [...seriesKeys, eventKey],\r\n            ...filterPaths, ...secondKeys\r\n        }\r\n\r\n        const multipleEventKeys = lodash.get(myContext.state.clientKeys.event, query.event)?._children\r\n\r\n        const res = await adminApi.post(\"analytics\", body)\r\n        const seriesOrTabs = [\r\n            { name: translate('pos.chart.totalValue'), valueField: \"value\" },\r\n            { name: translate('pos.chart.totalTimes'), valueField: \"count\" },\r\n            { name: translate('pos.chart.active'), valueField: \"active\" },\r\n            { name: translate('pos.chart.valuePerTime'), valueField: \"vpt\" },\r\n            { name: translate('pos.chart.valuePerUser'), valueField: \"vpu\" },\r\n            { name: translate('pos.chart.timesPerUser'), valueField: \"tpu\" },\r\n        ]\r\n        const chartData: any[] = []\r\n        if (!multipleEventKeys) {\r\n            res.forEach(it => {\r\n                const { event, ...itemData } = it\r\n                const eventValue = lodash.get(event, query.event)\r\n                if (eventValue) {\r\n                    chartData.push({\r\n                        ...itemData,\r\n                        value: eventValue._value,\r\n                        count: eventValue._count,\r\n                        vpt: eventValue._value / eventValue._count,\r\n                        vpu: eventValue._value / it.active,\r\n                        tpu: eventValue._count / it.active\r\n                    })\r\n                }\r\n            })\r\n        } else {\r\n            secondKeys['event'] = multipleEventKeys\r\n            filterPaths['event'] = query.event\r\n            res.forEach(it => {\r\n                const eventValue = it.event\r\n                const active = it['active']\r\n                const firstValue = it[firstKey]\r\n                multipleEventKeys.forEach(k => {\r\n                    const item = lodash.get(eventValue, k)\r\n                    if (item)\r\n                        chartData.push({\r\n                            [firstKey]: firstValue,\r\n                            event: k,\r\n                            value: item._value,\r\n                            count: item._count,\r\n                            active,\r\n                            vpt: item._value / item._count,\r\n                            vpu: item._value / active,\r\n                            tpu: item._count / active\r\n                        })\r\n                })\r\n            })\r\n        }\r\n        const secondKey = Object.keys(secondKeys)[0]\r\n        if (!secondKey) {\r\n            setState({ chartData, series: seriesOrTabs })\r\n        } else {\r\n            const groupFields = [\"value\", \"count\", \"active\", \"vpt\", \"vpu\", \"tpu\"]\r\n            const newData = groupChartDate(chartData, groupFields, firstKey, secondKey)\r\n            const cutNameStart = filterPaths[secondKey].length + 1\r\n            const series = (secondKeys[secondKey] as string[]).map(t => ({\r\n                name: lodash.get(myContext.state.clientKeys[secondKey], t)?._name || t.substring(cutNameStart),\r\n                valueField: t\r\n            }))\r\n            console.log('xxxx', newData, chartData, groupFields, firstKey, secondKey)\r\n            setState({ chartData: newData, series, tabs: seriesOrTabs })\r\n        }\r\n    }\r\n\r\n    React.useEffect((() => { updateApi() }), [myContext.state.clientKeys, ...Object.values(query)])\r\n\r\n    const translate = useTranslate()\r\n    return (\r\n        <Box >\r\n            <Container maxWidth=\"xl\">\r\n                <Grid item xs={12}>\r\n                    <CardContent>\r\n                        <AnalyticsQuery onChange={handleChange} values={query} />\r\n                    </CardContent>\r\n                </Grid>\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12}>\r\n                        <Card>\r\n                            <CardHeader title={translate('pos.eventTrend')} />\r\n                            <MyChart data={state.chartData} tabs={state.tabs} series={state.series}\r\n                                argumentFormat={obj => getDayString}\r\n                                tooltipTitleFormat={getDayFullString}\r\n                                category={'day'}\r\n                            />\r\n                        </Card>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n        </Box >\r\n    )\r\n}","import * as React from \"react\";\r\nimport { Card, CardContent, CardHeader, Container, Box, Grid, TextField } from '@material-ui/core';\r\nimport { useTranslate } from \"react-admin\";\r\nimport moment from \"moment\";\r\nimport lodash from 'lodash';\r\nimport queryString from 'query-string'\r\nimport { format } from \"d3-format\";\r\nimport { getDayString, getDayFullString } from \"../../utils\";\r\nimport { adminApi } from \"../../providers/dataProvider\";\r\nimport { useMyContext } from \"../../providers/contextProvider\";\r\nimport MyChart from \"../../components/MyChart\";\r\nimport AnalyticsQuery from \"../../components/AnalyticsQuery\";\r\n\r\nexport default (props) => {\r\n    const myContext = useMyContext()\r\n    if (!myContext.state.clientKeys) return <Box />\r\n\r\n    const query = Object.assign({\r\n        dayBegin: moment.utc().startOf('day').subtract(14, 'days').format('YYYY-MM-DD'),\r\n        dayEnd: moment.utc().startOf('day').format('YYYY-MM-DD'),\r\n        channel: '',\r\n        version: '',\r\n        cloud: '',\r\n        event: myContext.state.flatKeys.event[0]\r\n    }, queryString.parse(props.location.search))\r\n\r\n    const [state, setState] = React.useState<{ chartData: any, series: any[], tabs?: any[] }>({\r\n        chartData: [],\r\n        series: [],\r\n        tabs: undefined,\r\n    })\r\n\r\n    const handleChange = async (event) => {\r\n        query[event.target.name] = event.target.value\r\n        props.history.push(props.location.pathname + '?' + queryString.stringify(query))\r\n    }\r\n\r\n    const updateApi = async () => {\r\n        const firstKey = 'day'\r\n        const filterKeys = ['channel', 'version', 'cloud']\r\n        const seriesKeys = ['new', 'active', 'login']\r\n        let secondKey\r\n        const body: any = {\r\n            dayEnd: moment.utc(query.dayEnd).unix() / 86_400,\r\n            dayBegin: moment.utc(query.dayBegin).unix() / 86_400,\r\n            values: [...seriesKeys, 'event'],\r\n        }\r\n    }\r\n\r\n    React.useEffect((() => { updateApi() }), [myContext.state.clientKeys, ...Object.values(query)])\r\n\r\n    const translate = useTranslate()\r\n    return (\r\n        <Box >\r\n            <Container maxWidth=\"xl\">\r\n                <Grid item xs={12}>\r\n                    <CardContent>\r\n                        <AnalyticsQuery onChange={handleChange} values={query} />\r\n                    </CardContent>\r\n                </Grid>\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12}>\r\n                        <Card>\r\n                            <CardHeader title={translate('pos.funnelTrend')} />\r\n                            <MyChart data={state.chartData} tabs={state.tabs} series={state.series}\r\n                                argumentFormat={obj => getDayString}\r\n                                tooltipTitleFormat={getDayFullString}\r\n                            />\r\n                        </Card>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n        </Box >\r\n    )\r\n}","import * as React from \"react\";\r\nimport { Card, CardContent, CardHeader, Container, Box, Grid, TextField } from '@material-ui/core';\r\nimport { useTranslate } from \"react-admin\";\r\nimport moment from \"moment\";\r\nimport lodash from 'lodash';\r\nimport queryString from 'query-string'\r\nimport { format } from \"d3-format\";\r\nimport { getDayString, getDayFullString, groupChartDate } from \"../../utils\";\r\nimport { adminApi } from \"../../providers/dataProvider\";\r\nimport { useMyContext } from \"../../providers/contextProvider\";\r\nimport MyChart from \"../../components/MyChart\";\r\nimport AnalyticsQuery from \"../../components/AnalyticsQuery\";\r\n\r\nexport default (props) => {\r\n    const myContext = useMyContext()\r\n    if (!myContext.state.clientKeys) return <Box />\r\n\r\n    const query = Object.assign({\r\n        dayBegin: moment.utc().startOf('day').subtract(14, 'days').format('YYYY-MM-DD'),\r\n        dayEnd: moment.utc().startOf('day').format('YYYY-MM-DD'),\r\n        channel: '',\r\n        version: '',\r\n        cloud: ''\r\n    }, queryString.parse(props.location.search))\r\n\r\n    const [state, setState] = React.useState<{ chartData: any, chartData2: any, series: any[], tabs?: any[], tabs2?: any[] }>({\r\n        chartData: [],\r\n        chartData2: [],\r\n        series: [],\r\n        tabs: undefined,\r\n        tabs2: undefined\r\n    })\r\n\r\n    const handleChange = async (event) => {\r\n        query[event.target.name] = event.target.value\r\n        props.history.push(props.location.pathname + '?' + queryString.stringify(query))\r\n    }\r\n\r\n    const updateApi = async () => {\r\n        const filterKeys = ['channel', 'version', 'cloud']\r\n        const seriesKeys = ['active', 'new', 'login']\r\n        const secondKeys = {}\r\n        const filterPaths = {}\r\n        filterKeys.forEach(t => {\r\n            const path = query[t] as any\r\n            const children = lodash.get(myContext.state.clientKeys[t], path)?._children\r\n            filterPaths[t] = path\r\n            if (children) secondKeys[t] = children\r\n        })\r\n        const body: any = {\r\n            dayEnd: moment.utc(query.dayEnd).unix() / 86_400,\r\n            dayBegin: moment.utc(query.dayBegin).unix() / 86_400,\r\n            keys: [...Object.keys(secondKeys)],\r\n            values: ['region', 'lang'],\r\n            ...filterPaths, ...secondKeys\r\n        }\r\n\r\n        const res = await adminApi.post(\"analytics\", body)\r\n        const chartData: any[] = []\r\n        const chartData2: any[] = []\r\n        res.forEach(item => {\r\n            const {region, lang,...otherFields} = item\r\n            Object.entries(region).forEach(it => {\r\n                chartData.push({\r\n                    ...otherFields,\r\n                    region: it[0],\r\n                    ...(it[1] as any)\r\n                })\r\n            })\r\n            Object.entries(lang).forEach(it => {\r\n                chartData2.push({\r\n                    ...otherFields,\r\n                    lang: it[0],\r\n                    ...(it[1] as any)\r\n                })\r\n            })\r\n        })\r\n        chartData.sort((a, b) => a.active - b.active)\r\n        chartData2.sort((a, b) => a.active - b.active)\r\n        chartData.splice(0,chartData.length-32)\r\n        chartData2.splice(0,chartData2.length-32)\r\n        const seriesOrTabs = seriesKeys.map(t => ({ name: translate(`pos.chart.${t}`) || t, valueField: t, }))\r\n\r\n        const secondKey = Object.keys(secondKeys)[0]\r\n        if (!secondKey) {\r\n            setState({ chartData, chartData2, series: seriesOrTabs })\r\n        } else {\r\n            console.log('chart', res)\r\n            const newData = groupChartDate(chartData, seriesKeys, 'region', secondKey)\r\n            const newData2 = groupChartDate(chartData2, seriesKeys, 'lang', secondKey)\r\n            const cutNameStart = filterPaths[secondKey].length + 1\r\n            const series = secondKeys[secondKey].map(t => ({\r\n                name: lodash.get(myContext.state.clientKeys[secondKey], t)?._name || t.substring(cutNameStart),\r\n                valueField: t\r\n            }))\r\n            setState({ chartData: newData, chartData2: newData2, series, tabs: seriesOrTabs, tabs2: seriesOrTabs })\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => { updateApi() }, [myContext.state.clientKeys, ...Object.values(query)])\r\n\r\n    const translate = useTranslate()\r\n    return (\r\n        <Box >\r\n            <Container maxWidth=\"xl\">\r\n                <Grid item xs={12}>\r\n                    <CardContent>\r\n                        <AnalyticsQuery onChange={handleChange} values={query} />\r\n                    </CardContent>\r\n                </Grid>\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12}>\r\n                        <Card>\r\n                            <CardHeader title={translate('pos.regionDist')} />\r\n                            <MyChart data={state.chartData} tabs={state.tabs} series={state.series}\r\n                                argumentFormat={obj => getDayString}\r\n                                tooltipTitleFormat={getDayFullString}\r\n                                category={'region'}\r\n                                type={'bar'}\r\n                                rotated\r\n                            />\r\n                        </Card>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12}>\r\n                        <Card>\r\n                            <CardHeader title={translate('pos.languageDist')} />\r\n                            <MyChart data={state.chartData2} tabs={state.tabs2} series={state.series}\r\n                                argumentFormat={obj => getDayString}\r\n                                tooltipTitleFormat={getDayFullString}\r\n                                category={'lang'}\r\n                                type={'bar'}\r\n                                rotated\r\n                            />\r\n                        </Card>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n        </Box >\r\n    )\r\n}","import * as React from \"react\";\r\nimport { Card, CardContent, CardHeader, Container, Box, Grid, TextField, Button } from '@material-ui/core';\r\nimport { useTranslate } from \"react-admin\";\r\nimport moment from \"moment\";\r\nimport { adminApi } from \"../../providers/dataProvider\";\r\nimport MyChart from \"../../components/MyChart\";\r\nimport AnalyticsQuery from \"../../components/AnalyticsQuery\";\r\nimport RetentionTable from \"../../components/RetentionTable\";\r\nimport { getDayString } from \"../../utils\";\r\nimport ReactJson, { InteractionProps } from \"react-json-view\";\r\nimport { useMyContext } from \"../../providers/contextProvider\";\r\nimport SaveIcon from '@material-ui/icons/Save';\r\n\r\nexport default () => {\r\n    const { state, setDefaultApp, setApps, setKeys } = useMyContext()\r\n    const [saveEnable, setSaveEnable] = React.useState(false)\r\n    const ref = React.useRef<object | null>(null)\r\n\r\n    const handleSaveClick = async () => {\r\n        const keys = ref.current\r\n        console.log(keys)\r\n        await adminApi.post(\"setKeys\", { keys })\r\n        setKeys(keys)\r\n        setSaveEnable(false)\r\n    }\r\n    const handleJsonChange = (edit: InteractionProps) => {\r\n        console.log(ref.current)\r\n        ref.current = edit.updated_src\r\n        console.log(ref.current)\r\n        setSaveEnable(true)\r\n    }\r\n    const translate = useTranslate();\r\n    return (\r\n        <Box >\r\n            <Container maxWidth=\"xl\">\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12}>\r\n                        <Card>\r\n                            <CardHeader title={translate('pos.keysEdit')}\r\n                                action={\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        size=\"large\"\r\n                                        onClick={handleSaveClick}\r\n                                        disabled={!saveEnable}\r\n                                        startIcon={<SaveIcon />}\r\n                                    > Save </Button>}\r\n                            />\r\n                            <CardContent>\r\n                                <ReactJson src={state.keys} theme=\"railscasts\"\r\n                                    onEdit={(edit) => handleJsonChange(edit)}\r\n                                    onAdd={(edit) => handleJsonChange(edit)}\r\n                                    onDelete={(edit) => handleJsonChange(edit)}\r\n                                    displayDataTypes={false}\r\n                                    collapsed={1}\r\n                                />\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n        </Box >\r\n    );\r\n}","import * as React from \"react\";\r\nimport { Card, CardContent, CardHeader, Container, Box, Grid, TextField, Button } from '@material-ui/core';\r\nimport { useTranslate } from \"react-admin\";\r\nimport moment from \"moment\";\r\nimport { adminApi } from \"../providers/dataProvider\";\r\nimport MyChart from \"../components/MyChart\";\r\nimport AnalyticsQuery from \"../components/AnalyticsQuery\";\r\nimport RetentionTable from \"../components/RetentionTable\";\r\nimport { getDayString } from \"../utils\";\r\nimport ReactJson, { InteractionProps } from \"react-json-view\";\r\nimport { useMyContext } from \"../providers/contextProvider\";\r\nimport SaveIcon from '@material-ui/icons/Save';\r\n\r\nexport default () => {\r\n    const { state, setConfig } = useMyContext()\r\n    const [saveEnable, setSaveEnable] = React.useState(false)\r\n    const ref = React.useRef<object | null>(null)\r\n\r\n    const handleSaveClick = async () => {\r\n        const config = ref.current\r\n        console.log(config)\r\n        await adminApi.post(\"setConfig\", { config })\r\n        setConfig(config)\r\n        setSaveEnable(false)\r\n    }\r\n    const handleJsonChange = (edit: InteractionProps) => {\r\n        console.log(ref.current)\r\n        ref.current = edit.updated_src\r\n        console.log(ref.current)\r\n        setSaveEnable(true)\r\n    }\r\n    const translate = useTranslate();\r\n    return (\r\n        <Box >\r\n            <Container maxWidth=\"xl\">\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12}>\r\n                        <Card>\r\n                            <CardHeader title={translate('pos.appConfigEdit')}\r\n                                action={\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        size=\"large\"\r\n                                        onClick={handleSaveClick}\r\n                                        disabled={!saveEnable}\r\n                                        startIcon={<SaveIcon />}\r\n                                    > Save </Button>}\r\n                            />\r\n                            <CardContent>\r\n                                <ReactJson src={state.config} theme=\"railscasts\"\r\n                                    onEdit={(edit) => handleJsonChange(edit)}\r\n                                    onAdd={(edit) => handleJsonChange(edit)}\r\n                                    onDelete={(edit) => handleJsonChange(edit)}\r\n                                    displayDataTypes={false}\r\n                                    collapsed={1}\r\n                                />\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n        </Box >\r\n    );\r\n}","import * as React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport Configuration from './pages/configuration';\r\nimport Users from './pages/analytics/users';\r\nimport Realtime from './pages/analytics/realtime';\r\nimport Events from './pages/analytics/events';\r\nimport Funnels from './pages/analytics/funnels';\r\nimport Personas from './pages/analytics/personas';\r\nimport Keys from './pages/analytics/keys';\r\nimport AppConfig from './pages/appConfig';\r\n//import Segments from './segments/Segments';\r\n\r\nexport default [\r\n    <Route exact path=\"/configuration\" render={() => <Configuration />} />,\r\n    <Route exact path=\"/appConfig\" render={() => <AppConfig />} />,\r\n    <Route exact path=\"/analytics/users\" render={(props) => <Users {...props} />} />,\r\n    <Route exact path=\"/analytics/realtime\" render={(props) => <Realtime {...props} />} />,\r\n    <Route exact path=\"/analytics/events\" render={(props) => <Events {...props} />} />,\r\n    <Route exact path=\"/analytics/funnels\" render={(props) => <Funnels {...props} />} />,\r\n    <Route exact path=\"/analytics/personas\" render={(props) => <Personas {...props} />} />,\r\n    <Route exact path=\"/analytics/keys\" render={() => <Keys />} />,\r\n    //<Route exact path=\"/segments\" render={() => <Segments />} />,\r\n];\r\n","import * as React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport AppsIcon from '@material-ui/icons/Apps';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { adminApi } from \"../providers/dataProvider\";\r\nimport { useMyContext } from '../providers/contextProvider';\r\n\r\nconst AppSwitcher = () => {\r\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n    const { state, setDefaultApp, setApps, setKeys, setConfig } = useMyContext()\r\n\r\n    const getAppList = async () => {\r\n        if (!adminApi.token) return\r\n        setApps(await adminApi.post(\"appList\"))\r\n        setKeys(await adminApi.post(\"getKeys\"))\r\n        setConfig(await adminApi.post(\"getConfig\"))\r\n    }\r\n\r\n    React.useEffect(getAppList as any, []);\r\n\r\n    return (\r\n        <div>\r\n            <Button aria-controls=\"apps-menu\" aria-haspopup=\"true\" color=\"inherit\" onClick={(event) => setAnchorEl(event.currentTarget)}>\r\n                <AppsIcon />{state.defaultApp}<ExpandMoreIcon />\r\n            </Button>\r\n            <Menu\r\n                id=\"apps-menu\"\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={() => setAnchorEl(null)}\r\n            >\r\n                {state.apps?.map(t =>\r\n                    <MenuItem\r\n                        onClick={() => {\r\n                            setAnchorEl(null); setDefaultApp(t.name)\r\n                            window.location.reload();\r\n                        }}\r\n                        selected={state.defaultApp === t.name}\r\n                    >\r\n                        {t.name}\r\n                    </MenuItem>)}\r\n            </Menu>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AppSwitcher;","import * as React from \"react\";\r\nimport { Admin, Resource, /*ListGuesser, EditGuesser,*/ Layout } from 'react-admin';\r\nimport { useRecordContext } from 'react-admin';\r\nimport LaunchIcon from '@material-ui/icons/Launch';\r\n\r\nimport AppSwitcher from '../components/AppSwitcher';\r\nimport UserIcon from '@material-ui/icons/Group';\r\nimport { Typography, Box } from '@material-ui/core';\r\nimport { forwardRef } from 'react';\r\nimport { AppBar, UserMenu, MenuItemLink, useTranslate } from 'react-admin';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport Logo from './Logo';\r\n\r\nconst useStyles = makeStyles({\r\n    title: {\r\n        flex: '1',\r\n        overflow: 'hidden',\r\n        'white-space': 'nowrap',\r\n        'text-overflow': 'ellipsis',\r\n    },\r\n    spacer: {\r\n        flex: 1,\r\n    },\r\n});\r\n\r\nconst ConfigurationMenu = forwardRef<any, any>((props, ref) => {\r\n    const translate = useTranslate();\r\n    return (\r\n        <MenuItemLink\r\n            ref={ref}\r\n            to=\"/configuration\"\r\n            primaryText={translate('pos.configuration')}\r\n            leftIcon={<SettingsIcon />}\r\n            onClick={props.onClick}\r\n            sidebarIsOpen\r\n        />\r\n    );\r\n});\r\n\r\nconst CustomUserMenu = (props: any) => (\r\n    <UserMenu {...props}>\r\n        <ConfigurationMenu />\r\n    </UserMenu>\r\n);\r\n\r\nconst CustomAppBar = props => {\r\n    const classes = useStyles();\r\n    //    <LocaleSwitcher />\r\n    return <AppBar {...props} elevation={1} userMenu={<CustomUserMenu />}>\r\n        <Typography className={classes.title} variant=\"h6\" id=\"react-admin-title\"></Typography>\r\n        <span className={classes.spacer} />\r\n        <AppSwitcher />\r\n    </AppBar>\r\n}\r\n\r\nexport default CustomAppBar;","import * as React from 'react';\r\nimport { FC, Fragment, ReactElement } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport {\r\n    List,\r\n    MenuItem,\r\n    ListItemIcon,\r\n    Typography,\r\n    Collapse,\r\n    Tooltip,\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport { useTranslate, ReduxState } from 'react-admin';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    icon: { minWidth: theme.spacing(5) },\r\n    sidebarIsOpen: {\r\n        '& a': {\r\n            paddingLeft: theme.spacing(4),\r\n            transition: 'padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms',\r\n        },\r\n    },\r\n    sidebarIsClosed: {\r\n        '& a': {\r\n            paddingLeft: theme.spacing(2),\r\n            transition: 'padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms',\r\n        },\r\n    },\r\n}));\r\n\r\ninterface Props {\r\n    dense: boolean;\r\n    handleToggle: () => void;\r\n    icon: ReactElement;\r\n    isOpen: boolean;\r\n    name: string;\r\n}\r\n\r\nconst SubMenu: FC<Props> = ({\r\n    handleToggle,\r\n    isOpen,\r\n    name,\r\n    icon,\r\n    children,\r\n    dense,\r\n}) => {\r\n    const translate = useTranslate();\r\n    const classes = useStyles();\r\n    const sidebarIsOpen = useSelector<ReduxState, boolean>(\r\n        state => state.admin.ui.sidebarOpen\r\n    );\r\n\r\n    const header = (\r\n        <MenuItem dense={dense} button onClick={handleToggle}>\r\n            <ListItemIcon className={classes.icon}>\r\n                {isOpen ? <ExpandMore /> : icon}\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\" color=\"textSecondary\">\r\n                {translate(name)}\r\n            </Typography>\r\n        </MenuItem>\r\n    );\r\n\r\n    return (\r\n        <Fragment>\r\n            {sidebarIsOpen || isOpen ? (\r\n                header\r\n            ) : (\r\n                <Tooltip title={translate(name)} placement=\"right\">\r\n                    {header}\r\n                </Tooltip>\r\n            )}\r\n            <Collapse in={isOpen} timeout=\"auto\" unmountOnExit>\r\n                <List\r\n                    dense={dense}\r\n                    component=\"div\"\r\n                    disablePadding\r\n                    className={\r\n                        sidebarIsOpen\r\n                            ? classes.sidebarIsOpen\r\n                            : classes.sidebarIsClosed\r\n                    }\r\n                >\r\n                    {children}\r\n                </List>\r\n            </Collapse>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default SubMenu;\r\n","import * as React from 'react';\r\nimport { useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport LabelIcon from '@material-ui/icons/Label';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n    useTranslate,\r\n    DashboardMenuItem,\r\n    MenuItemLink,\r\n    MenuProps,\r\n} from 'react-admin';\r\n\r\n/*import visitors from '../visitors';\r\nimport orders from '../orders';\r\nimport invoices from '../invoices';\r\nimport products from '../products';\r\nimport categories from '../categories';\r\nimport reviews from '../reviews';*/\r\nimport rooms from '../pages/datas/rooms';\r\nimport users from '../pages/datas/users';\r\nimport guilds from '../pages/datas/guilds';\r\nimport leaderboards from '../pages/datas/leaderboards';\r\nimport battleRecords from '../pages/datas/battleRecords';\r\nimport reportLogs from '../pages/datas/reportLogs';\r\nimport configs from '../pages/datas/configs';\r\n\r\nimport SubMenu from './SubMenu';\r\nimport { AppState } from '../types';\r\n\r\nimport OrderIcon from '@material-ui/icons/AttachMoney';\r\n\r\nimport AnalyticsIcon from '@material-ui/icons/Timeline';\r\nimport UsersIcon from '@material-ui/icons/SupervisedUserCircle';\r\nimport RealtimeIcon from '@material-ui/icons/Timer';\r\nimport EventsIcon from '@material-ui/icons/Event';\r\nimport FunnelsIcon from '@material-ui/icons/FilterList';\r\nimport PersonasIcon from '@material-ui/icons/PersonPin';\r\nimport KeysIcon from '@material-ui/icons/Spellcheck';\r\nimport { appApi } from '../providers/dataProvider';\r\nimport { useMyContext } from '../providers/contextProvider';\r\n\r\ntype MenuName = 'menuCatalog' | 'menuSales' | 'menuCustomers' | 'menuAnalytics' | 'menuData' | 'menuAi' | 'menuLogs';\r\n\r\nconst Menu = ({ dense = false }: MenuProps) => {\r\n\r\n    const { state } = useMyContext()\r\n\r\n    const [menus, setMenus] = useState({\r\n        menuCatalog: true,\r\n        menuSales: true,\r\n        menuCustomers: true,\r\n        menuAnalytics: true,\r\n        menuData: true,\r\n        menuAi: true,\r\n        menuLogs: true,\r\n        //appConfigId: 'config/app'\r\n\r\n    });\r\n\r\n    //React.useEffect((async () => setMenus({ ...menus, appConfigId: (await appApi.post(\"config\")).appConfigId })) as any, []);\r\n\r\n\r\n    const translate = useTranslate();\r\n    useSelector((state: AppState) => state.theme); // force rerender on theme change\r\n    const classes = useStyles();\r\n\r\n    const handleToggle = (menu: MenuName) => {\r\n        setMenus(menus => ({ ...menus, [menu]: !menus[menu] }));\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {' '}\r\n            <DashboardMenuItem />\r\n            <SubMenu\r\n                handleToggle={() => handleToggle('menuAnalytics')}\r\n                isOpen={menus.menuAnalytics}\r\n                name=\"pos.menu.analytics\"\r\n                icon={<AnalyticsIcon />}\r\n                dense={dense}\r\n            >\r\n                <MenuItemLink\r\n                    to={`/analytics/realtime`}\r\n                    primaryText={translate(`analytics.realtime.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<RealtimeIcon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/analytics/users`}\r\n                    primaryText={translate(`analytics.users.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<UsersIcon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/analytics/events`}\r\n                    primaryText={translate(`analytics.events.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<EventsIcon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/analytics/funnels`}\r\n                    primaryText={translate(`analytics.funnels.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<FunnelsIcon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/analytics/personas`}\r\n                    primaryText={translate(`analytics.personas.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<PersonasIcon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/analytics/keys`}\r\n                    primaryText={translate(`analytics.keys.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<KeysIcon />}\r\n                    dense={dense}\r\n                />\r\n            </SubMenu>\r\n            {state.config.roomConsoleUrl ? <SubMenu\r\n                handleToggle={() => handleToggle('menuData')}\r\n                isOpen={menus.menuData}\r\n                name=\"pos.menu.data\"\r\n                icon={<rooms.icon />}\r\n                dense={dense}\r\n            >\r\n                <MenuItemLink\r\n                    to={`/${rooms.name}`}\r\n                    primaryText={translate(`resources.${rooms.name}.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<rooms.icon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/${users.name}`}\r\n                    primaryText={translate(`resources.${users.name}.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<users.icon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/${guilds.name}`}\r\n                    primaryText={translate(`resources.${guilds.name}.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<guilds.icon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/${leaderboards.name}`}\r\n                    primaryText={translate(`resources.${leaderboards.name}.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<leaderboards.icon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/${battleRecords.name}`}\r\n                    primaryText={translate(`resources.${battleRecords.name}.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<battleRecords.icon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/${reportLogs.name}`}\r\n                    primaryText={translate(`resources.${reportLogs.name}.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<reportLogs.icon />}\r\n                    dense={dense}\r\n                />\r\n            </SubMenu> : null}\r\n            <MenuItemLink\r\n                to={`/appConfig`}\r\n                primaryText={translate(`pos.menu.appConfig`, {\r\n                    smart_count: 2,\r\n                })}\r\n                leftIcon={<configs.icon />}\r\n                dense={dense}\r\n            />\r\n            {/*<SubMenu\r\n                handleToggle={() => handleToggle('menuAi')}\r\n                isOpen={menus.menuAi}\r\n                name=\"pos.menu.ai\"\r\n                icon={<configs.icon />}\r\n                dense={dense}\r\n            >\r\n               <MenuItemLink\r\n                    to={`/config/${menus.appConfigId}`}\r\n                    primaryText={translate(`pos.menu.Config`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<configs.icon />}\r\n                    dense={dense}\r\n                />\r\n            </SubMenu>*/}\r\n            <SubMenu\r\n                handleToggle={() => handleToggle('menuLogs')}\r\n                isOpen={menus.menuLogs}\r\n                name=\"pos.menu.logs\"\r\n                icon={<reportLogs.icon />}\r\n                dense={dense}\r\n            >\r\n            </SubMenu>\r\n            { /*<SubMenu\r\n                handleToggle={() => handleToggle('menuSales')}\r\n                isOpen={menus.menuSales}\r\n                name=\"pos.menu.sales\"\r\n                icon={<OrderIcon />}\r\n                dense={dense}\r\n            >\r\n                <MenuItemLink\r\n                    to={`/commands`}\r\n                    primaryText={translate(`resources.commands.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<OrderIcon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/invoices`}\r\n                    primaryText={translate(`resources.invoices.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<OrderIcon />}\r\n                    dense={dense}\r\n                />\r\n            </SubMenu>\r\n            <SubMenu\r\n                handleToggle={() => handleToggle('menuCatalog')}\r\n                isOpen={menus.menuCatalog}\r\n                name=\"pos.menu.catalog\"\r\n                icon={<products.icon />}\r\n                dense={dense}\r\n            >\r\n                <MenuItemLink\r\n                    to={`/products`}\r\n                    primaryText={translate(`resources.products.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<products.icon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/categories`}\r\n                    primaryText={translate(`resources.categories.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<categories.icon />}\r\n                    dense={dense}\r\n                />\r\n            </SubMenu>\r\n            <SubMenu\r\n                handleToggle={() => handleToggle('menuCustomers')}\r\n                isOpen={menus.menuCustomers}\r\n                name=\"pos.menu.customers\"\r\n                icon={<visitors.icon />}\r\n                dense={dense}\r\n            >\r\n                <MenuItemLink\r\n                    to={`/customers`}\r\n                    primaryText={translate(`resources.customers.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<visitors.icon />}\r\n                    dense={dense}\r\n                />\r\n                <MenuItemLink\r\n                    to={`/segments`}\r\n                    primaryText={translate(`resources.segments.name`, {\r\n                        smart_count: 2,\r\n                    })}\r\n                    leftIcon={<LabelIcon />}\r\n                    dense={dense}\r\n                />\r\n            </SubMenu>\r\n            <MenuItemLink\r\n                to={`/reviews`}\r\n                primaryText={translate(`resources.reviews.name`, {\r\n                    smart_count: 2,\r\n                })}\r\n                leftIcon={<reviews.icon />}\r\n                dense={dense}\r\n            />*/}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        marginTop: theme.spacing(1),\r\n    },\r\n}));\r\n\r\nexport default Menu;\r\n","import * as React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Layout, LayoutProps, Sidebar } from 'react-admin';\r\nimport AppBar from './AppBar';\r\nimport Menu from './Menu';\r\nimport themes from '../themes';\r\nimport { AppState } from '../types';\r\nimport { GetTheme } from '../themeReducer';\r\n\r\nconst CustomSidebar = (props: any) => <Sidebar {...props} size={200} />;\r\n\r\nexport default (props: LayoutProps) => {\r\n    const theme = themes[GetTheme()] || themes.light\r\n    return (\r\n        <Layout\r\n            {...props}\r\n            appBar={AppBar}\r\n            sidebar={CustomSidebar}\r\n            menu={Menu}\r\n            theme={theme}\r\n        />\r\n    );\r\n};\r\n\r\n//const MyLayout = props => <Layout {...props} appBar={MyAppBar} />;","import React from 'react';\nimport { Admin, Resource, /*ListGuesser, EditGuesser,*/  AppBar } from 'react-admin';\n//import { PostCreate, PostEdit, PostList } from './components/posts';\nimport rooms from './pages/datas/rooms';\nimport users from './pages/datas/users';\nimport guilds from './pages/datas/guilds';\nimport leaderboards from './pages/datas/leaderboards';\nimport battleRecords from './pages/datas/battleRecords';\nimport reportLogs from './pages/datas/reportLogs';\nimport configs from './pages/datas/configs';\nimport Dashboard from './pages/Dashboard';\nimport authProvider from './providers/authProvider';\nimport themeReducer from './themeReducer';\n\nimport { i18nProvider } from './components/polyglot';\n\nimport customRoutes from './routes';\n\nimport PostIcon from '@material-ui/icons/Book';\nimport { /*Accordion, AccordionDetails, AccordionSummary,*/ Typography, Box } from '@material-ui/core';\n\nimport dataProvider from './providers/dataProvider';\nimport { ContextProvider } from './providers/contextProvider';\n//import jsonServerProvider from 'ra-data-json-server';\n//const dataProvider = jsonServerProvider('https://jsonplaceholder.typicode.com');\n//const dataProvider = jsonServerProvider('https://www.unityjs.com:2567/api/v1');\n\nimport { defaultTheme } from 'react-admin';\nimport merge from 'lodash/merge';\nimport indigo from '@material-ui/core/colors/indigo';\nimport pink from '@material-ui/core/colors/pink';\nimport red from '@material-ui/core/colors/red';\nimport { createTheme } from '@material-ui/core/styles';\nimport Layout from './layout/Layout';\n\n//theme={myTheme}\nconst App = () => (\n  <ContextProvider>\n    <Admin\n      customReducers={{ theme: themeReducer }}\n      customRoutes={customRoutes}\n      i18nProvider={i18nProvider}\n      dashboard={Dashboard}\n      authProvider={authProvider}\n      dataProvider={dataProvider}\n      layout={Layout}\n      disableTelemetry\n    >\n      <Resource {...rooms} />\n      <Resource {...users} />\n      <Resource {...guilds} />\n      <Resource {...leaderboards} />\n      <Resource {...battleRecords} />\n      <Resource {...reportLogs} />\n      <Resource {...configs} />\n    </Admin>\n  </ContextProvider>\n);\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom'\nReactDOM.render(\n  <React.StrictMode>\n      <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}