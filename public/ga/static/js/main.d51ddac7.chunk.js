(this.webpackJsonpconsole=this.webpackJsonpconsole||[]).push([[0],{484:function(e,t,a){},620:function(e,t){},668:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),s=a.n(c),o=(a(484),a(8)),i=a(775),u=a(774),l=a(790),j=a(739),d=a(776),b=a(778),O=a(759),h=a(736),p=a(760),x=a(761),m=a(762),f=a(779),v=a(792),g=a(791),y=a(742),A=a(51),w=a(290),k=a(70),C=(a(127),a(20)),E=a.n(C),I=a(150),D=(a(375),a(737)),S=a(29),T=a.n(S),F=a(2),B=(Object(I.a)({link:{textDecoration:"none"},icon:{width:"0.5em",height:"0.5em",paddingLeft:2}}),Object(I.a)({root:{textAlign:"right"}})),M=function(e){var t=B(),a=Object.assign({},e);return Object(F.jsx)(h.a,Object(o.a)({className:t.root,render:function(e,t){return T()(E()(e,t)).fromNow()}},a))},L=function(e){var t=e.resource,a=e.source,n=e.keys,r=(Object(k.a)(e,["resource","source","keys"]),a?a+".":""),c=e.sm||12/n.length,s=e.xs||12;return Object(F.jsx)(D.a,{container:!0,spacing:1,children:n.map((function(e){return Object(F.jsxs)(D.a,{item:!0,xs:s,sm:c,children:[Object(F.jsx)(l.a,{source:r+e,resource:t})," "]})}))})},U=function(e){var t=e.resource,a=e.source,n=e.keys,r=(Object(k.a)(e,["resource","source","keys"]),a?a+".":""),c=e.sm||12/n.length,s=e.xs||12;return Object(F.jsx)(D.a,{container:!0,spacing:1,children:n.map((function(e){return Object(F.jsxs)(D.a,{item:!0,xs:s,sm:c,children:[Object(F.jsx)(j.a,{source:r+e,resource:t})," "]})}))})},Q=function(e){var t=e.resource,a=e.source,n=e.keys,r=(Object(k.a)(e,["resource","source","keys"]),a?a+".":""),c=e.sm||12/n.length,s=e.xs||12;return Object(F.jsx)(D.a,{container:!0,spacing:1,children:n.map((function(e){return Object(F.jsxs)(D.a,{item:!0,xs:s,sm:c,children:[Object(F.jsx)(g.a,{source:r+e,resource:t})," "]})}))})},P=function(e){var t=e.resource,a=e.source,n=e.keys,r=(Object(k.a)(e,["resource","source","keys"]),a?a+".":""),c=e.sm||12/n.length,s=e.xs||12;return Object(F.jsx)(D.a,{container:!0,spacing:1,children:n.map((function(e){return Object(F.jsxs)(D.a,{item:!0,xs:s,sm:c,children:[Object(F.jsx)(y.a,{source:r+e,resource:t})," "]})}))})},N=a(218),Y=a.n(N),R=[Object(F.jsx)(l.a,{source:"roomId",alwaysOn:!0,allowEmpty:!0}),Object(F.jsx)(l.a,{source:"name",allowEmpty:!0}),Object(F.jsx)(l.a,{source:"version",allowEmpty:!0}),Object(F.jsx)(j.a,{source:"seasonLevel",allowEmpty:!0})];var G=function(e){var t=e.record;return Object(F.jsxs)("span",{children:["Room ",t?'"'.concat(t.name,":").concat(t.roomId,'"'):""]})},q=function(e){var t=e.record;return Object(F.jsxs)("div",{style:{width:200,margin:"1em"},children:[Object(F.jsx)(A.a,{variant:"h6",children:"Room details"}),t&&Object(F.jsxs)(A.a,{variant:"body2",children:["Updated date: ",t.updatedAt]})]})},W={name:"roomCache",list:function(e){return Object(F.jsx)(d.a,Object(o.a)(Object(o.a)({filters:R},e),{},{children:Object(F.jsxs)(b.a,{children:[Object(F.jsx)(O.a,{source:"roomId"}),Object(F.jsx)(O.a,{source:"name"}),Object(F.jsx)(h.a,{source:"users",textAlign:"right",render:function(e,t){return E()(e,t).map((function(e){return e.isAI?"AI":e.nickname})).join(" | ")}}),Object(F.jsx)(O.a,{source:"processId"}),Object(F.jsx)(O.a,{source:"version"}),Object(F.jsx)(p.a,{source:"seasonLevel"}),Object(F.jsx)(x.a,{source:"locked"}),Object(F.jsx)(M,{textAlign:"right",source:"updatedAt"}),Object(F.jsx)(M,{textAlign:"right",source:"createdAt",label:"elapsedTime"}),Object(F.jsx)(m.a,{})]})}))},edit:function(e){var t=Object(w.a)((function(e){return e.breakpoints.down("sm")}));return Object(F.jsx)(f.a,Object(o.a)(Object(o.a)({title:Object(F.jsx)(G,Object(o.a)({},e)),aside:t?null:Object(F.jsx)(q,Object(o.a)({},e))},e),{},{children:Object(F.jsxs)(v.a,{children:[Object(F.jsx)(l.a,{source:"roomId"}),Object(F.jsx)(l.a,{source:"name"}),Object(F.jsx)(l.a,{source:"processId"}),Object(F.jsx)(l.a,{source:"version"}),Object(F.jsx)(j.a,{source:"seasonLevel"}),Object(F.jsx)(U,{keys:["clients","maxClients"]}),Object(F.jsx)(g.a,{source:"locked"}),Object(F.jsx)(g.a,{source:"private"}),Object(F.jsx)(g.a,{source:"unlisted"}),Object(F.jsx)(y.a,{source:"createdAt"})]})}))},icon:Y.a},K=a(780),z=a(785),J=a(786),_=a(787),H=a(398),V=a.n(H),X=[Object(F.jsx)(l.a,{source:"nickname",alwaysOn:!0,allowEmpty:!0}),Object(F.jsx)(l.a,{source:"id",allowEmpty:!0}),Object(F.jsx)(l.a,{source:"ip",allowEmpty:!0}),Object(F.jsx)(l.a,{source:"region",allowEmpty:!0}),Object(F.jsx)(l.a,{source:"devices.id",allowEmpty:!0})],Z=function(e){var t=e.record;return Object(F.jsxs)("span",{children:["User ",t?'"'.concat(t.id,":").concat(t.nickname,'"'):""]})},$=function(e){var t=e.record;return Object(F.jsxs)("div",{style:{width:200,margin:"1em"},children:[Object(F.jsx)(A.a,{variant:"h6",children:"User details"}),t&&Object(F.jsxs)(A.a,{variant:"body2",children:["Updated date: ",t.updatedAt]})]})},ee={name:"user",list:function(e){return Object(F.jsx)(d.a,Object(o.a)(Object(o.a)({filters:X},e),{},{children:Object(F.jsxs)(b.a,{children:[Object(F.jsx)(O.a,{source:"id"}),Object(F.jsx)(O.a,{source:"nickname"}),Object(F.jsx)(O.a,{source:"ip"}),Object(F.jsx)(O.a,{source:"region"}),Object(F.jsx)(p.a,{source:"metadata.seasonLevel"}),Object(F.jsx)(p.a,{source:"metadata.coin"}),Object(F.jsx)(p.a,{source:"metadata.diamond"}),Object(F.jsx)(x.a,{source:"metadata.isVip"}),Object(F.jsx)(x.a,{source:"metadata.isNewFace"}),Object(F.jsx)(x.a,{source:"isAnonymous"}),Object(F.jsx)(M,{textAlign:"right",source:"createdAt"}),Object(F.jsx)(M,{textAlign:"right",source:"updatedAt"}),Object(F.jsx)(m.a,{})]})}))},edit:function(e){var t=Object(w.a)((function(e){return e.breakpoints.down("sm")}));return Object(F.jsx)(f.a,Object(o.a)(Object(o.a)({title:Object(F.jsx)(Z,Object(o.a)({},e)),aside:t?null:Object(F.jsx)($,Object(o.a)({},e))},e),{},{children:Object(F.jsxs)(K.a,{children:[Object(F.jsxs)(z.a,{label:"summary",children:[Object(F.jsx)(L,{keys:["id","nickname"]}),Object(F.jsx)(L,{keys:["ip","region"]}),Object(F.jsx)(L,{source:"devices",keys:["id","platform"]}),Object(F.jsx)(Q,{keys:["metadata.isVip","metadata.isNewFace","isAnonymous"]}),Object(F.jsx)(U,{xs:6,source:"metadata",keys:["coin","diamond"]}),Object(F.jsx)(U,{source:"metadata",keys:["seasonLevel","seasonScore","seasonHightScore"]}),Object(F.jsx)(U,{source:"metadata",keys:["seasonRewardLevel","seasonRewardScore","seasonRewardUnlockLevel"]}),Object(F.jsx)(P,{keys:["createdAt","deleteAt"]}),Object(F.jsx)(P,{keys:["metadata.loginAt","metadata.offlineAt"]})]}),Object(F.jsx)(z.a,{label:"items",children:Object(F.jsx)(J.a,{source:"metadata.bagList",children:Object(F.jsx)(_.a,{children:Object(F.jsx)(U,{xs:4,keys:["id","state","openTime"]})})})}),Object(F.jsxs)(z.a,{label:"heros",children:[Object(F.jsx)(j.a,{source:"metadata.teamSelected"}),Object(F.jsx)(J.a,{source:"metadata.teams",children:Object(F.jsx)(_.a,{children:Object(F.jsx)(J.a,{source:"metadata.teams",children:Object(F.jsx)(_.a,{children:Object(F.jsx)(j.a,{source:""})})})})}),Object(F.jsx)(J.a,{source:"metadata.heroList",children:Object(F.jsx)(_.a,{children:Object(F.jsx)(U,{xs:4,keys:["id","level","card"]})})}),Object(F.jsx)(J.a,{source:"metadata.talents",children:Object(F.jsx)(_.a,{children:Object(F.jsx)(j.a,{source:""})})}),Object(F.jsx)(j.a,{source:"metadata.useFightBg"}),Object(F.jsx)(J.a,{source:"metadata.useBqs",children:Object(F.jsx)(_.a,{children:Object(F.jsx)(j.a,{source:""})})})]}),Object(F.jsxs)(z.a,{label:"other",children:[Object(F.jsx)(j.a,{source:"metadata.power"}),Object(F.jsx)(j.a,{source:"metadata.matchPower"}),Object(F.jsx)(j.a,{source:"metadata.loginDays"}),Object(F.jsx)(j.a,{source:"metadata.allOpenBags"}),Object(F.jsx)(j.a,{source:"metadata.allVictorys"}),Object(F.jsx)(j.a,{source:"metadata.allBattles"}),Object(F.jsx)(j.a,{source:"metadata.continuousLossCount"}),Object(F.jsx)(j.a,{source:"metadata.cooperationGetGiftBit"}),Object(F.jsx)(j.a,{source:"metadata.cooperationNum"}),Object(F.jsx)(j.a,{source:"metadata.dailyActivity"}),Object(F.jsx)(j.a,{source:"metadata.dailyActivityLevel"}),Object(F.jsx)(j.a,{source:"metadata.genericMarks"})]})]})}))},icon:V.a},te=a(766),ae=a(399),ne=a.n(ae),re=[Object(F.jsx)(l.a,{source:"name",alwaysOn:!0,allowEmpty:!0}),Object(F.jsx)(l.a,{source:"intro",allowEmpty:!0}),Object(F.jsx)(l.a,{source:"id",allowEmpty:!0})],ce=function(e){var t=e.record;return Object(F.jsxs)("span",{children:["Guild ",t?'"'.concat(t.id,":").concat(t.name,'"'):""]})},se=function(e){var t=e.record;return Object(F.jsxs)("div",{style:{width:200,margin:"1em"},children:[Object(F.jsx)(A.a,{variant:"h6",children:"Guild details"}),t&&Object(F.jsxs)(A.a,{variant:"body2",children:["Updated date: ",t.updatedAt]})]})},oe={name:"guild",list:function(e){return Object(F.jsx)(d.a,Object(o.a)(Object(o.a)({filters:re},e),{},{children:Object(F.jsxs)(b.a,{children:[Object(F.jsx)(O.a,{source:"id"}),Object(F.jsx)(O.a,{source:"name"}),Object(F.jsx)(O.a,{source:"flag"}),Object(F.jsx)(O.a,{source:"intro"}),Object(F.jsx)(p.a,{source:"joinType"}),Object(F.jsx)(h.a,{source:"membersCount",textAlign:"right",render:function(e,t){return E()(e,t)+"/"+E()(e,"membersMax")}}),Object(F.jsx)(p.a,{source:"seasonScore"}),Object(F.jsx)(p.a,{source:"memberSeasonScoreReq"}),Object(F.jsx)(te.a,{source:"createdAt",showTime:!0}),Object(F.jsx)(m.a,{})]})}))},edit:function(e){var t=Object(w.a)((function(e){return e.breakpoints.down("sm")}));return Object(F.jsx)(f.a,Object(o.a)(Object(o.a)({title:Object(F.jsx)(ce,Object(o.a)({},e)),aside:t?null:Object(F.jsx)(se,Object(o.a)({},e))},e),{},{children:Object(F.jsxs)(K.a,{children:[Object(F.jsxs)(z.a,{label:"summary",children:[Object(F.jsx)(l.a,{source:"id"}),Object(F.jsx)(l.a,{source:"name"}),Object(F.jsx)(l.a,{source:"flag"}),Object(F.jsx)(l.a,{source:"intro"}),Object(F.jsx)(j.a,{source:"joinType"}),Object(F.jsx)(U,{keys:["membersCount","membersMax"]}),Object(F.jsx)(U,{keys:["seasonScore","memberSeasonScoreReq"]}),Object(F.jsx)(y.a,{source:"createdAt"})]}),Object(F.jsx)(z.a,{label:"members",children:Object(F.jsx)(J.a,{source:"members",children:Object(F.jsxs)(_.a,{children:[Object(F.jsx)(l.a,{source:"id"}),Object(F.jsx)(l.a,{source:"name"}),Object(F.jsx)(j.a,{source:"seasonScore"}),Object(F.jsx)(j.a,{source:"showHero"}),Object(F.jsx)(j.a,{source:"type"}),Object(F.jsx)(y.a,{source:"onlineTime"})]})})}),Object(F.jsx)(z.a,{label:"joinRequests"})]})}))},icon:ne.a},ie=a(400),ue=a.n(ie),le=[Object(F.jsx)(l.a,{source:"name",alwaysOn:!0,allowEmpty:!0}),Object(F.jsx)(l.a,{source:"intro",allowEmpty:!0}),Object(F.jsx)(l.a,{source:"id",allowEmpty:!0})],je=function(e){var t=e.record;return Object(F.jsxs)("span",{children:["Leaderboard ",t?'"'.concat(t.name,'"'):""]})},de=function(e){var t=e.record;return Object(F.jsxs)("div",{style:{width:200,margin:"1em"},children:[Object(F.jsx)(A.a,{variant:"h6",children:"Leaderboard details"}),t&&Object(F.jsxs)(A.a,{variant:"body2",children:["Updated date: ",t.updatedAt]})]})},be={name:"leaderboard",list:function(e){return Object(F.jsx)(d.a,Object(o.a)(Object(o.a)({filters:le},e),{},{children:Object(F.jsxs)(b.a,{children:[Object(F.jsx)(O.a,{source:"name"}),Object(F.jsx)(p.a,{source:"total"}),Object(F.jsx)(h.a,{source:"top",render:function(e,t){var a;return JSON.stringify(null===(a=E()(e,t).slice(0,10))||void 0===a?void 0:a.map((function(e){return e.name})))},label:"top10"}),Object(F.jsx)(h.a,{source:"top",sortable:!1,render:function(e,t){var a;return JSON.stringify(null===(a=E()(e,t)[0])||void 0===a?void 0:a.score)},label:"highest"}),Object(F.jsx)(h.a,{source:"top",sortable:!1,render:function(e,t){var a;return JSON.stringify(null===(a=E()(e,t).slice(-1)[0])||void 0===a?void 0:a.score)},label:"lowest"}),Object(F.jsx)(m.a,{})]})}))},edit:function(e){var t=Object(w.a)((function(e){return e.breakpoints.down("sm")}));return Object(F.jsx)(f.a,Object(o.a)(Object(o.a)({title:Object(F.jsx)(je,Object(o.a)({},e)),aside:t?null:Object(F.jsx)(de,Object(o.a)({},e))},e),{},{children:Object(F.jsxs)(v.a,{children:[Object(F.jsx)(l.a,{source:"name"}),Object(F.jsx)(j.a,{source:"total"}),Object(F.jsx)(J.a,{source:"top",children:Object(F.jsx)(_.a,{children:Object(F.jsx)(L,{xs:4,keys:["id","name","score"]})})})]})}))},icon:ue.a},Oe=a(142),he=a.n(Oe),pe=[Object(F.jsx)(l.a,{source:"user.nickname",alwaysOn:!0,allowEmpty:!0}),Object(F.jsx)(j.a,{source:"user.level",allowEmpty:!0}),Object(F.jsx)(l.a,{source:"id",allowEmpty:!0})],xe=function(e){var t=e.record;return Object(F.jsxs)("span",{children:["BattleRecord ",t?'"'.concat(t.id,":").concat(t.user.nickname,'"'):""]})},me=function(e){var t=e.record;return Object(F.jsxs)("div",{style:{width:200,margin:"1em"},children:[Object(F.jsx)(A.a,{variant:"h6",children:"BattleRecord details"}),t&&Object(F.jsxs)(A.a,{variant:"body2",children:["Updated date: ",t.updatedAt]})]})},fe={name:"battleRecord",list:function(e){return Object(F.jsx)(d.a,Object(o.a)(Object(o.a)({filters:pe},e),{},{children:Object(F.jsxs)(b.a,{children:[Object(F.jsx)(O.a,{source:"id"}),Object(F.jsx)(O.a,{source:"user.nickname"}),Object(F.jsx)(p.a,{source:"user.seasonLevel"}),Object(F.jsx)(p.a,{source:"user.power"}),Object(F.jsx)(p.a,{source:"user.expWin"}),Object(F.jsx)(p.a,{source:"user.allWins"}),Object(F.jsx)(p.a,{source:"user.allBattles"}),Object(F.jsx)(h.a,{source:"user.heros",render:function(e,t){var a;return JSON.stringify(null===(a=E()(e,t))||void 0===a?void 0:a.map((function(e){return e.id})))}}),Object(F.jsx)(te.a,{source:"createdAt",showTime:!0}),Object(F.jsx)(m.a,{})]})}))},edit:function(e){var t=Object(w.a)((function(e){return e.breakpoints.down("sm")}));return Object(F.jsx)(f.a,Object(o.a)(Object(o.a)({title:Object(F.jsx)(xe,Object(o.a)({},e)),aside:t?null:Object(F.jsx)(me,Object(o.a)({},e))},e),{},{children:Object(F.jsxs)(K.a,{children:[Object(F.jsxs)(z.a,{label:"summary",children:[Object(F.jsx)(l.a,{source:"id"}),Object(F.jsx)(L,{source:"user",keys:["sessionId","nickname"]}),Object(F.jsx)(L,{source:"user",keys:["avatar","guildName","guildFlag"]}),Object(F.jsx)(U,{source:"user",keys:["power","expWin","allWins","allBattles"]}),Object(F.jsx)(U,{source:"user",keys:["bg","level","seasonLevel","seasonScore"]}),Object(F.jsx)(L,{source:"user",keys:["seed","framesId"]}),Object(F.jsx)(g.a,{source:"user.isAI"})]}),Object(F.jsx)(z.a,{label:"heros",children:Object(F.jsx)(J.a,{source:"user.heros",children:Object(F.jsx)(_.a,{children:Object(F.jsx)(U,{xs:6,keys:["id","level"]})})})})]})}))},icon:he.a},ve=a(767),ge=a(219),ye=a.n(ge),Ae=[Object(F.jsx)(l.a,{source:"source",alwaysOn:!0,allowEmpty:!0}),Object(F.jsx)(l.a,{source:"condition",alwaysOn:!0,allowEmpty:!0}),Object(F.jsx)(l.a,{source:"stackTrace",allowEmpty:!0}),Object(F.jsx)(l.a,{source:"version",allowEmpty:!0}),Object(F.jsx)(ve.a,{source:"updatedAt",allowEmpty:!0})],we=function(e){var t=e.record;return Object(F.jsxs)("span",{children:["ReportLog ",t?'"'.concat(t.condition,'"'):""]})},ke={name:"reportLog",list:function(e){return Object(F.jsx)(d.a,Object(o.a)(Object(o.a)({filters:Ae},e),{},{children:Object(F.jsxs)(b.a,{children:[Object(F.jsx)(O.a,{source:"source"}),Object(F.jsx)(O.a,{source:"condition"}),Object(F.jsx)(h.a,{source:"stackTrace",render:function(e,t){var a,n=E()(e,t),r=null===(a=/^(.*?)\(at <00000000000000000000000000000000>:0\)/.exec(n))||void 0===a?void 0:a[1];return r?r+"...":n}}),Object(F.jsx)(O.a,{source:"version"}),Object(F.jsx)(p.a,{source:"count"}),Object(F.jsx)(te.a,{source:"updatedAt"}),Object(F.jsx)(m.a,{})]})}))},edit:function(e){Object(w.a)((function(e){return e.breakpoints.down("sm")}));return Object(F.jsx)(f.a,Object(o.a)(Object(o.a)({title:Object(F.jsx)(we,Object(o.a)({},e))},e),{},{children:Object(F.jsxs)(v.a,{children:[Object(F.jsx)(ve.a,{source:"date"}),Object(F.jsx)(l.a,{source:"source"}),Object(F.jsx)(l.a,{source:"condition"}),Object(F.jsx)(l.a,{source:"stackTrace",multiline:!0}),Object(F.jsx)(l.a,{source:"version"}),Object(F.jsx)(j.a,{source:"count"}),Object(F.jsx)(y.a,{source:"createdAt"}),Object(F.jsx)(y.a,{source:"updatedAt"})]})}))},icon:ye.a},Ce=a(220),Ee=a.n(Ce),Ie=function(e){e.record;return Object(F.jsx)("span",{children:"Config"})},De={name:"config",edit:function(e){return Object(F.jsx)(f.a,Object(o.a)(Object(o.a)({title:Object(F.jsx)(Ie,Object(o.a)({},e))},e),{},{children:Object(F.jsxs)(K.a,{children:[Object(F.jsx)(z.a,{label:"ai",children:Object(F.jsx)(J.a,{source:"aisByTimes",children:Object(F.jsx)(_.a,{children:Object(F.jsx)(J.a,{source:"",children:Object(F.jsx)(_.a,{children:Object(F.jsx)(l.a,{source:""})})})})})}),Object(F.jsx)(z.a,{label:"other"})]})}))},icon:Ee.a},Se=a(14),Te=a.n(Se),Fe=a(61),Be=a(26),Me=a(34),Le=a(777),Ue=a(769),Qe=a(752),Pe=a(770),Ne=a(754),Ye=a(60),Re=a(49),Ge=a(221),qe=a(222),We=a(182),Ke=a(68),ze=a.n(Ke),Je=function(){function e(t,a){Object(Ge.a)(this,e),this.name=void 0,this.apiUrl=void 0,this._profile={},this.apiUrl=t,this.name=a,this._profile.token=localStorage.getItem(this.name+"_token")}return Object(qe.a)(e,[{key:"token",get:function(){return this._profile.token},set:function(e){this._profile.token!=e&&(this._profile.token=e,e?localStorage.setItem(this.name+"_token",e):localStorage.removeItem(this.name+"_token"))}},{key:"setProfile",value:function(e,t){this._profile[e]=t}},{key:"getProfile",value:function(e){return this._profile[e]}},{key:"request",value:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a,n,r){var c,s,i;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(this.apiUrl,"/").concat(t),((s=!r||"GET"==r)||a)&&(c="".concat(c,"?").concat(Object(Ke.stringify)(Object.assign(Object(o.a)({},this._profile),a)))),e.next=5,We.a.fetchJson(c,s?void 0:{method:r,body:JSON.stringify(Object.assign(Object(o.a)({},this._profile),n))});case 5:return i=e.sent,e.abrupt("return",i.json);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(t,void 0,a,"POST");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a,n){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(t,a,n,"PUT");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a,n){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(t,a,n,"DELETE");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}(),_e=new Je("https://www.cyberpunk.online/api/admin","admin"),He=new Je("","app"),Ve=function(e){return null==e||(Array.isArray(e)?e.forEach((function(e){e.id=e._id,delete e._id,delete e.friendIds,delete e.blockedUserIds})):e.hasOwnProperty("_id")&&!e.hasOwnProperty("id")&&(e.id=e._id,delete e._id,delete e.friendIds,delete e.blockedUserIds)),e},Xe=function(e){return null==e||(Array.isArray(e)?e.forEach((function(e){e._id=e.id,delete e.id})):e.hasOwnProperty("id")&&!e.hasOwnProperty("_id")&&(e._id=e.id,delete e.id)),e},Ze=function(e){return JSON.stringify(function(e){var t={};return function e(a,n){for(var r in a){var c=a[r];r=n+r,"object"===typeof c?e(c,r+"."):t[r]=c}}(e,""),t}(Xe(e)),(function(e,t){return"string"!==typeof t||"_id"===e||"$"===e[0]||isNaN(Number(t))&&!isNaN(Date.parse(t))?t:{$regex:t,$options:"i"}}))},$e={getList:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a){var n,r,c,s,o,i,u,l,j;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.pagination,r=n.page,c=n.perPage,s=a.sort,o=s.field,i=s.order,u={sort:JSON.stringify(Xe(Object(Re.a)({},o,i))),limit:c,skip:(r-1)*c,query:Ze(a.filter),select:"-metadata.battleList"},e.next=5,He.get(t,u);case 5:return l=e.sent,e.next=8,He.get("".concat(t,"/count"),{query:u.query});case 8:return j=e.sent,e.abrupt("return",{data:Ve(l),total:j.count});case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ve,e.next=3,He.get("".concat(t,"/").concat(a.id));case 3:return e.t1=e.sent,e.t2=(0,e.t0)(e.t1),e.abrupt("return",{data:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getMany:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.get(t,{query:JSON.stringify({_id:{$in:a.ids}}),select:"-metadata.battleList"});case 2:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getManyReference:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a){var n,r,c,s,i,u,l,j,d;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.pagination,r=n.page,c=n.perPage,s=a.sort,i=s.field,u=s.order,l={sort:JSON.stringify(Xe(Object(Re.a)({},i,u))),limit:c,skip:(r-1)*c,query:Ze(Object(o.a)(Object(o.a)({},a.filter),{},Object(Re.a)({},a.target,a.id))),select:"-metadata.battleList"},e.next=5,He.get(t,l);case 5:return j=e.sent,e.next=8,He.get("".concat(t,"/count"),{query:l.query});case 8:return d=e.sent,e.abrupt("return",{data:Ve(j),total:d.count});case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),update:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.put("".concat(t,"/").concat(a.id),void 0,a.data);case 2:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),updateMany:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.put(t,{query:JSON.stringify({_id:{$in:a.ids}})},a.data);case 2:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),create:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o.a,e.t1=Object(o.a)({},a.data),e.t2={},e.next=5,He.post(t,a.data);case 5:return e.t3=e.sent.id,e.t4={id:e.t3},e.t5=(0,e.t0)(e.t1,e.t2,e.t4),e.abrupt("return",{data:e.t5});case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),delete:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.delete("".concat(t,"/").concat(a.id));case 2:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),deleteMany:function(){var e=Object(Be.a)(Te.a.mark((function e(t,a){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.delete(t,{query:JSON.stringify({_id:{$in:a.ids}})});case 2:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},et=a(401),tt=a(431),at=a(7),nt=a(795),rt=a(740),ct=a(741),st=a(788),ot=a(796),it=a(285),ut=a.n(it),lt=a(45),jt=a(32),dt=a(9),bt=(a(404),a(794),a(781)),Ot=a(225),ht=a(405),pt=a.n(ht),xt=Object(o.a)(Object(o.a)({},pt.a),{},{pos:{configuration:"\u914d\u7f6e",language:"\u8bed\u8a00",theme:{name:"\u4e3b\u9898",light:"\u6d45\u8272",dark:"\u6df1\u8272"},menu:{analytics:"\u5206\u6790",data:"\u6570\u636e",sales:"\u9500\u552e",catalog:"\u76ee\u5f55",customers:"\u5ba2\u6237",ai:"AI",logs:"\u65e5\u5fd7",aiConfig:"AI\u8bbe\u7f6e",appConfig:"\u5e94\u7528\u914d\u7f6e"},dashboard:{welcome:{title:"\u6b22\u8fce\u4f7f\u7528\u300a\u6218\u6597\u5929\u4f7f\u300b\u7ba1\u7406\u540e\u53f0",subtitle:""},rooms:"\u623f\u95f4\u6570",cpu:"CPU\u4f7f\u7528\u7387",memory:"\u5185\u5b58",bugs:"\u9519\u8bef\u62a5\u544a"},activeTrend:"\u6d3b\u8dc3\u8d8b\u52bf",userTrend:"\u7528\u6237\u8d8b\u52bf",retentionTrend:"\u7559\u5b58\u8d8b\u52bf",realtimeTrend:"\u5b9e\u65f6\u8d8b\u52bf",eventTrend:"\u4e8b\u4ef6\u8d8b\u52bf",funnelTrend:"\u6f0f\u6597\u8d8b\u52bf",regionDist:"\u5730\u533a\u5206\u5e03\u6570\u636e",languageDist:"\u8bed\u8a00\u5206\u5e03\u6570\u636e",keysEdit:"\u5173\u952e\u5b57\u7f16\u8f91",appConfigEdit:"\u5e94\u7528\u914d\u7f6e\u7f16\u8f91",dateFrom:"\u65e5\u671f(UTC)",dateTo:"\u5230",selectChannel:"\u9009\u62e9\u6e20\u9053",selectVersion:"\u9009\u62e9\u7248\u672c",selectCloud:"\u9009\u62e9\u4e91\u63a7",selectEvent:"\u9009\u62e9\u4e8b\u4ef6",selectFunnel:"\u9009\u62e9\u6f0f\u6597",dayInfo:{name:"\u6628\u65e5\u6570\u636e",time:"\u6570\u636e\u66f4\u65b0\u81f3 %{time}",active:"\u6d3b\u8dc3\u7528\u6237",new:"\u65b0\u589e\u7528\u6237",earn:"\u9884\u4f30\u6536\u5165",dod:"\u73af\u6bd4 %{value}"},chart:{login:"\u8bbf\u95ee\u6b21\u6570",active:"\u6d3b\u8dc3\u7528\u6237",new:"\u65b0\u589e\u7528\u6237",count:"\u7d2f\u8ba1\u7528\u6237",today:"\u4eca\u65e5",yesterday:"\u6628\u65e5",lastWeek:"\u4e0a\u5468",totalValue:"\u603b\u503c",totalTimes:"\u603b\u6b21\u6570",valuePerTime:"\u6bcf\u6b21\u5747\u503c",valuePerUser:"\u6bcf\u7528\u6237\u503c",timesPerUser:"\u6bcf\u7528\u6237\u6b21\u6570"},retention:{date:"\u65e5\u671f",d1:"\u6b21\u7559",d2:"\u4e8c\u7559",d3:"\u4e09\u7559",d4:"\u56db\u7559",d5:"\u4e94\u7559",d6:"\u516d\u7559",d7:"\u4e03\u7559",d14:"\u5341\u56db\u7559",d30:"\u4e09\u5341\u7559"}},analytics:{users:{name:"\u7528\u6237"},realtime:{name:"\u5b9e\u65f6"},events:{name:"\u4e8b\u4ef6"},funnels:{name:"\u6f0f\u6597"},personas:{name:"\u753b\u50cf"},keys:{name:"\u5173\u952e\u5b57"}},resources:{user:{name:"\u7528\u6237",fields:{isAnonymous:"\u6e38\u5ba2",devices:{id:"\u8bbe\u5907Id",platform:"\u8bbe\u5907\u5e73\u53f0"},metadata:{seasonHightScore:"\u8d5b\u5b63\u6700\u9ad8\u79ef\u5206",seasonRewardLevel:"\u8d5b\u5b63\u5956\u52b1\u7b49\u7ea7",seasonRewardScore:"\u8d5b\u5b63\u5956\u52b1\u79ef\u5206",seasonRewardUnlockLevel:"\u8d5b\u5b63\u5956\u52b1\u89e3\u9501\u7b49\u7ea7",coin:"\u91d1\u5e01",diamond:"\u94bb\u77f3",isVip:"\u4f1a\u5458",isNewFace:"\u65b0\u624b",offlineAt:"\u79bb\u7ebf\u65f6\u95f4",heroList:"\u82f1\u96c4\u5217\u8868",heroList_:{card:"\u5361\u6570"},power:"\u5b9e\u529b\u503c",matchPower:"\u5339\u914d\u5b9e\u529b\u503c"}}},guild:{name:"\u8054\u76df",fields:{name:"\u540d\u79f0",flag:"\u65d7\u5e1c",intro:"\u7b80\u4ecb",joinType:"\u52a0\u5165\u7c7b\u578b",membersCount:"\u5f53\u524d\u4eba\u6570",membersMax:"\u6700\u5927\u4eba\u6570",memberSeasonScoreReq:"\u5165\u76df\u6700\u4f4e\u79ef\u5206",members_:{name:"\u6635\u79f0",showHero:"\u5c55\u73b0\u82f1\u96c4",type:"\u5b98\u804c\u7c7b\u578b",onlineTime:"\u6700\u540e\u5728\u7ebf"}}},leaderboard:{name:"\u6392\u884c\u699c",fields:{name:"\u540d\u79f0",total:"\u603b\u6570"}},roomCache:{name:"\u623f\u95f4",fields:{roomId:"\u623f\u95f4Id",name:"\u623f\u95f4\u540d",server:"\u670d\u52a1\u5668",processId:"\u8fdb\u7a0bId",clients:"\u5f53\u524d\u7aef\u6570",maxClients:"\u6700\u5927\u7aef\u6570",locked:"\u623f\u9501",private:"\u79c1\u6709",unlisted:"\u672a\u4e0a\u67b6",users:"\u4eba\u5458"}},battleRecord:{name:"\u6218\u6597Ai",fields:{winRate:"AI\u80dc\u7387",aiWinCount:"AI\u80dc\u5229\u6b21\u6570",aiInvokeCount:"AI\u8c03\u7528\u6b21\u6570"}},reportLog:{name:"\u4e0a\u62a5\u65e5\u5fd7",fields:{source:"\u6e90",condition:"\u72b6\u51b5",stackTrace:"\u5806\u6808\u8ddf\u8e2a"}},config:{name:"\u914d\u7f6e",fields:{aisByTimes:"\u6309\u6b21\u6307\u5b9aAI"}}},id:"Id",summary:"\u6982\u8981",items:"\u7269\u54c1",heros:"\u82f1\u96c4",other:"\u5176\u4ed6",members:"\u6210\u5458",joinRequests:"\u52a0\u5165\u8bf7\u6c42",frames:"\u540c\u6b65\u5e27",level:"\u7b49\u7ea7",nickname:"\u6635\u79f0",seasonLevel:"\u8d5b\u5b63\u7b49\u7ea7",seasonScore:"\u8d5b\u5b63\u79ef\u5206",count:"\u6570\u91cf",date:"\u65e5\u671f",lang:"\u8bed\u8a00",version:"\u7248\u672c",createdAt:"\u521b\u5efa\u65f6\u95f4",deleteAt:"\u5220\u9664\u65f6\u95f4",loginAt:"\u767b\u5f55\u65f6\u95f4",offlineAt:"\u79bb\u7ebf\u65f6\u95f4",elapsedTime:"\u6301\u7eed\u65f6\u95f4",updatedAt:"\u66f4\u65b0\u65f6\u95f4",region:"\u5730\u533a",top10:"\u524d10",highest:"\u6700\u9ad8\u5206",lowest:"\u6700\u4f4e\u5206"}),mt=a(224),ft=Object(o.a)(Object(o.a)({},mt.a),{},{pos:{configuration:"Configuration",language:"Language",theme:{name:"Theme",light:"Light",dark:"Dark"},menu:{analytics:"Analytics",data:"Data",sales:"Sales",catalog:"Catalog",customers:"Customers",ai:"AI",logs:"Logs",aiConfig:"AI Config",appConfig:"App Config"},dashboard:{rooms:"Rooms",cpu:"CPU Usage",memory:"Memory",bugs:"Bug Reports"},activeTrend:"Active Trend",userTrend:"User Trend",retentionTrend:"Retention Trend",realtimeTrend:"Realtime Trend",eventTrend:"Event Trend",funnelTrend:"Funnel Trend",regionDist:"Regional Distribution",languageDist:"Language Distribution",keysEdit:"Keywords Edit",appConfigEdit:"App Config Edit",dateFrom:"Date(UTC)",dateTo:"To",selectChannel:"Select Channel",selectVersion:"Select Version",selectCloud:"Select Cloud",selectEvent:"Select Event",selectFunnel:"Select Funnel",dayInfo:{name:"Yesterday",time:"Update to %{time}",active:"Active Users",new:"New Users",earn:"Earning",dod:"DoD %{value}"},chart:{login:"Login Times",active:"Active Users",new:"New Users",count:"Total Users",today:"Today",yesterday:"Yesterday",lastWeek:"Last Week",totalValue:"Total Value",totalTimes:"Total Times",valuePerTime:"Value Per Time",valuePerUser:"Value Per User",timesPerUser:"Times Per User"},retention:{date:"Date",d1:"D1",d2:"D2",d3:"D3",d4:"D4",d5:"D5",d6:"D6",d7:"D7",d14:"D14",d30:"D30"}},analytics:{users:{name:"Users"},realtime:{name:"Realtime"},events:{name:"Events"},funnels:{name:"Funnels"},personas:{name:"Personas"},keys:{name:"Keys"}},resources:{user:{name:"Users"},guild:{name:"Guilds"},leaderboard:{name:"Leaderboards"},roomCache:{name:"Rooms"},battleRecord:{name:"BattleAis"},reportLog:{name:"ReportLogs"},config:{name:"Config",fields:{aisByTimes:"Ais By Times"}}}}),vt=a(350),gt=(a(610),{zh:xt,en:ft}),yt={zh:"\u4e2d\u6587",en:"English"},At={zh:"zh-cn",en:"en"},wt=function(){return localStorage.getItem("locale")||Object(vt.a)()};T.a.locale(function(){var e=wt();return At[e]||e}());var kt=Object(Ot.a)((function(e){return gt[e]?gt[e]:gt.en}),wt(),{onMissingKey:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.lastIndexOf(".");return-1==a?e:(e=e.substring(a+1),"string"===typeof t.__&&(t._=t.__.substring(t.__.lastIndexOf(".")+1),delete t.__),e.includes("showHero")&&console.log(e,t),Ct(e,t))}}),Ct=kt.translate;kt.translate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.__=t._,delete t._,null==e?e:(e.includes("showHero")&&console.log(e,t),Ct(e.replaceAll(/\[.*?\]/g,"_"),t))};Object(at.a)({title:{textAlign:"center",width:"100%",marginBottom:"10px"}})((function(e){var t=e.text,a=e.classes,n=t.split("\\n"),r=Object(Me.a)(n,2),c=r[0],s=r[1];return Object(F.jsxs)("div",{className:a.title,children:[Object(F.jsx)(A.a,{component:"h3",variant:"h5",children:c}),Object(F.jsx)(A.a,{variant:"subtitle1",children:s})]})})),Object(I.a)((function(e){return Object(nt.a)({root:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}})}));var Et=function(e){var t=e.hoverIndex,a=Object(k.a)(e,["hoverIndex"]);return Object(o.a)({state:a.index===t?"hovered":null},a)},It=function(e){return Object(F.jsx)(lt.c.Point,Object(o.a)({},Et(e)))},Dt=function(e){return Object(F.jsx)(lt.g.Point,Object(o.a)({point:{size:5}},Et(e)))},St=function(e){var t=Et(e);return Object(F.jsx)(lt.g.Point,Object(o.a)({point:t.state?{size:7}:{size:0}},t))},Tt=function(e){return Object(F.jsxs)(n.Fragment,{children:[" ",Object(F.jsx)(lt.h.Path,Object(o.a)({},e)),Object(F.jsx)(lt.g.Path,Object(o.a)({},e))]})},Ft=function(e){e.state;var t=Object(k.a)(e,["state"]);return Object(F.jsxs)(n.Fragment,{children:[" ",Object(F.jsx)(lt.a.Path,Object(o.a)({},t))," ",Object(F.jsx)(lt.g.Path,Object(o.a)({},t))," "]})},Bt=function(e){var t=e.data,a=e.series,n=e.shows,r=e.format,c=(e.text,e.style),s=Object(k.a)(e,["data","series","shows","format","text","style"]),i=Object(o.a)(Object(o.a)({},c),{},{paddingLeft:"10px"}),u=r||function(e){return e?Lt(e):"N/A"},l=a.map((function(e,a){if(!n[e.name])return null;var r=e.name,c=e.valueField,l=e.color,j=t[c];return Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{children:Object(F.jsx)("svg",{width:"10",height:"10",children:Object(F.jsx)("circle",{cx:"5",cy:"5",r:"5",fill:l||Pt[a%Pt.length]})})}),Object(F.jsx)("td",{children:Object(F.jsx)(lt.i.Content,Object(o.a)({style:i,text:r},s))}),Object(F.jsx)("td",{align:"right",children:Object(F.jsx)(lt.i.Content,Object(o.a)({style:i,text:u(j)},s))})]},a)}));return Object(F.jsx)("table",{children:l})},Mt=function(e){var t=e.target;return t?t.point:-1},Lt=Object(bt.a)(","),Ut=function(e){return Math.abs(e)>=1e4?(e/1e4).toFixed(e>=1e5?0:1)+"w":e},Qt=Object(bt.a)(".2s"),Pt=["#40C4FF","#FF5252","#00C853","#FFEB3B","#FF4081","#E040FB"],Nt=function(e){Object(et.a)(a,e);var t=Object(tt.a)(a);function a(e){var n;return Object(Ge.a)(this,a),(n=t.call(this,e)).TooltipContent=void 0,n.data=[],n.chartData=[],n.chartSeries=[],n.seriesList=[],n.BarPoint=void 0,n.SplinePoint=void 0,n.AreaPoint=void 0,n.LegendRoot=void 0,n.LegendLabel=void 0,n.LegendItem=void 0,n.LegendMarker=void 0,n.changeHoverTime=null,n.changeHover=function(e){if(e){if(n.state.target&&n.state.target.series==e.series&&n.state.target.point==e.point)return;e={series:e.series,point:e.point}}else{if(!n.state.target)return;e=null}n.setState({target:e}),n.changeHoverTime=null},n.switchShow=function(e){var t=JSON.parse(JSON.stringify(n.state.shows));t[e]=!t[e],n.props.series.find((function(e){return t[e.name]}))&&n.setState({shows:t})},n.state={tab:0,shows:{},target:null},n.createLegend(),n.createTooltip(),n}return Object(qe.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;console.log("chart","componentDidUpdate"),Mt(t)!==Mt(this.state)&&(this.BarPoint.update(),this.SplinePoint.update(),this.AreaPoint.update(),this.TooltipContent.update()),this.props.series.length>0&&!this.props.series.find((function(e){return a.state.shows[e.name]}))?this.switchShow(this.props.series[0].name):JSON.stringify(t.shows)!==JSON.stringify(this.state.shows)&&(console.log("chart","createSeries"),this.createSeries(),this.forceUpdate())}},{key:"createLegend",value:function(){var e=this;this.LegendRoot=function(e){return Object(F.jsx)(lt.e.Root,Object(o.a)(Object(o.a)({},e),{},{style:{display:"grid",gridTemplateColumns:"auto auto auto",margin:"auto"}}))},this.LegendItem=function(e){return Object(F.jsx)(lt.e.Item,Object(o.a)(Object(o.a)({},e),{},{style:{flexDirection:"column-reverse",paddingLeft:"0",paddingRight:"0"}}))},this.LegendLabel=function(t){var a=t.text;return Object(F.jsx)(lt.e.Label,Object(o.a)(Object(o.a)({onClick:function(){e.switchShow(a.toString())}},t),{},{style:{whiteSpace:"nowrap",opacity:e.state.shows[a]?1:.5}}))},this.LegendMarker=function(t){var a=t.className,n=t.name,r=t.color;return Object(F.jsx)("svg",{className:a,fill:r,width:"10",height:"10",onClick:function(){e.switchShow(n)},children:Object(F.jsx)("circle",{cx:"5",cy:"5",r:"5",fill:r,fillOpacity:e.state.shows[n]?1:.5})})}}},{key:"componentWillUnmount",value:function(){console.log("chart","componentWillUnmount"),this.setState({target:null})}},{key:"createTooltip",value:function(){var e=this,t=function(){return{hoverIndex:Mt(e.state)}};this.BarPoint=Object(dt.j)(It,t),this.SplinePoint=Object(dt.j)(Dt,t),this.AreaPoint=Object(dt.j)(St,t),this.TooltipContent=Object(dt.j)(Bt,(function(){return{data:e.state.target?e.data[e.state.target.point]:null,series:e.props.series,shows:e.state.shows,format:e.props.tooltipFormat}}))}},{key:"createSeries",value:function(){var e=this;this.seriesList=this.props.series.map((function(t,a){t.key;var r=t.name,c=t.valueField,s=t.argumentField,o=t.color,i=(t.show,t.type),u=t.scaleName;if(!e.state.shows[r])return null;var l,j={key:r,name:r,valueField:c,argumentField:s||e.props.category,color:o||Pt[a%Pt.length],scaleName:u};return i=i||e.props.type,console.log("chart",i),"bar"==i?(l=lt.c,j.pointComponent=e.BarPoint):"area"===i?(l=lt.a,j.seriesComponent=Ft,j.pointComponent=e.AreaPoint):(l=lt.h,j.seriesComponent=Tt,j.pointComponent=e.SplinePoint),n.createElement(l,j)})),this.seriesList.length=32}},{key:"render",value:function(){var e,t,a,n,r=this;Array.isArray(this.props.data)?this.data=this.props.data:this.props.tabs&&(this.data=this.props.data[this.props.tabs[this.state.tab].valueField]);var c=wt();null===(e=this.data[this.data.length-12]||this.data[0])||void 0===e||e[this.props.category],null===(t=this.data[this.data.length-1])||void 0===t||t[this.props.category];return this.createSeries(),Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)("div",{children:null===(a=this.props.tabs)||void 0===a?void 0:a.map((function(e,t){return Object(F.jsx)(ot.a,{size:"small",color:r.state.tab==t?"primary":"default",onClick:function(){r.setState({tab:t})},label:e.name})}))}),Object(F.jsx)(rt.a,{row:!0,children:null===(n=this.props.series)||void 0===n?void 0:n.map((function(e,t){return Object(F.jsx)(ct.a,{control:Object(F.jsx)(st.a,{icon:Object(F.jsx)(ut.a,{}),checkedIcon:Object(F.jsx)(ut.a,{}),size:"small",style:{color:e.color||Pt[t%Pt.length]},checked:r.state.shows[e.name],onChange:function(){r.switchShow(e.name)}}),label:e.name,style:{opacity:r.state.shows[e.name]?1:.5}})}))}),Object(F.jsxs)(lt.d,{data:this.data,rotated:this.props.rotated,children:[Object(F.jsx)(jt.g,{}),Object(F.jsx)(lt.b,{tickFormat:this.props.argumentFormat}),Object(F.jsx)(lt.j,{tickFormat:this.props.valueFormat||("zh"==c?function(e){return Ut}:function(e){return Qt})}),Object(F.jsx)(jt.h,{hover:this.state.target,onHoverChange:this.changeHover}),Object(F.jsx)(lt.i,{targetItem:this.state.target,contentComponent:this.TooltipContent}),Object(F.jsx)(jt.a,{}),this.seriesList,Object(F.jsx)(jt.n,{})]})]})}}]),a}(n.PureComponent),Yt=a(797),Rt=a(406),Gt=a.n(Rt),qt=a(407),Wt=a.n(qt),Kt=a(236),zt=a(235),Jt=a(234),_t=a(233),Ht=Object(I.a)((function(e){return Object(nt.a)({root:{"& > *":{margin:e.spacing(1)}},card:{padding:e.spacing(1)},room:{color:e.palette.getContrastText(Kt.a[600]),backgroundColor:Kt.a[600],width:e.spacing(7),height:e.spacing(7)},cpu:{color:e.palette.getContrastText(zt.a[500]),backgroundColor:zt.a[500],width:e.spacing(7),height:e.spacing(7)},memory:{color:e.palette.getContrastText(Jt.a[800]),backgroundColor:Jt.a[800],width:e.spacing(7),height:e.spacing(7)},bug:{color:e.palette.getContrastText(_t.a[500]),backgroundColor:_t.a[500],width:e.spacing(7),height:e.spacing(7)},rounded:{color:"#fff",backgroundColor:Kt.a[500]},small:{width:e.spacing(3),height:e.spacing(3)},icon:{width:e.spacing(5),height:e.spacing(5)}})}));var Vt=function(){var e=r.a.useState([]),t=Object(Me.a)(e,2),a=t[0],n=t[1],c=Ht(),s=function(){var e=Object(Be.a)(Te.a.mark((function e(){var t;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.post("dashboard");case 2:t=e.sent,n([{icon:Y.a,className:c.room,value:t.rooms,second:"pos.dashboard.rooms"},{icon:Gt.a,className:c.cpu,value:t.cpu+"%",second:"pos.dashboard.cpu"},{icon:Wt.a,className:c.memory,value:(a=t.memory.usedMemMb,r="MB","KB"==r&&a>100&&(r="MB",a/=1024),"MB"==r&&a>100&&(r="GB",a/=1024),"GB"==r&&a>100&&(r="TB",a/=1024),a.toFixed(2)+" "+r),second:"pos.dashboard.memory"},{icon:ye.a,className:c.bug,value:t.bugs,second:"pos.dashboard.bugs"}]);case 4:case"end":return e.stop()}var a,r}),e)})));return function(){return e.apply(this,arguments)}}();r.a.useEffect((function(){s();var e=setInterval(s,5e3);return function(){return clearInterval(e)}}),[]);var o=Object(Ye.a)();return Object(F.jsx)(D.a,{container:!0,spacing:1,children:a.map((function(e){return Object(F.jsx)(D.a,{item:!0,xs:6,sm:6,md:3,children:Object(F.jsx)(Qe.a,{className:c.card,children:Object(F.jsxs)(D.a,{container:!0,spacing:1,children:[Object(F.jsx)(D.a,{item:!0,xs:5,children:Object(F.jsx)(Yt.a,{variant:"rounded",className:e.className,children:Object(F.jsx)(e.icon,{className:c.icon})})}),Object(F.jsxs)(D.a,{item:!0,xs:7,children:[Object(F.jsx)(A.a,{component:"h6",variant:"h6",children:e.value}),Object(F.jsx)(A.a,{variant:"subtitle1",color:"textSecondary",children:o(e.second)})]})]})})})}))})},Xt=a(408),Zt=a.n(Xt),$t=a(409),ea=a.n($t);function ta(e){var t=T()(864e5*Number(e)).utc();return t.format(T()().utc().isSame(t,"month")?"D":"M/D")}function aa(e){return T()(864e5*Number(e)).utc().format("YYYY-MM-DD(UTC)")}function na(e){return new Promise((function(t){return setTimeout(t,e)}))}function ra(e,t,a,n){var r={};return t.forEach((function(e){r[e]={}})),e.forEach((function(e){t.forEach((function(t){var c=r[t],s=e[a],o=e[n];(c[s]||(c[s]=Object(Re.a)({},a,s)))[o]=e[t]}))})),t.forEach((function(e){r[e]=Object.values(r[e])})),r}var ca=a(765),sa=a(757),oa=a(755),ia=a(753),ua=a(768),la=a(758),ja=a(756),da=a(793),ba=Object(at.a)((function(e){return Object(nt.a)({root:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),textAlign:"center"}})}))(ia.a),Oa=Object(at.a)((function(e){return Object(nt.a)({root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}})}))(ja.a),ha=Object(I.a)((function(e){return Object(nt.a)({table:{}})})),pa=Object(bt.a)(".1%");function xa(e){var t=e.data,a=(ha(),[1,2,3,4,5,6,7,14,30]),n=[1,2,3,7,14],r=T.a.utc().startOf("day").unix()/86400,c=Object(Ye.a)();return Object(F.jsxs)(ua.a,{children:[Object(F.jsx)(ca.a,{}),Object(F.jsxs)(sa.a,{padding:"none","aria-label":"customized table",children:[Object(F.jsx)(la.a,{children:Object(F.jsxs)(ja.a,{children:[Object(F.jsx)(ba,{children:c("pos.retention.date")}),a.map((function(e){return Object(F.jsx)(da.a,{smDown:!n.includes(e),children:Object(F.jsx)(ba,{align:"right",children:c("pos.retention.d"+e)})})}))]})}),Object(F.jsx)(oa.a,{children:t.map((function(e){if(!(r<=e.day))return Object(F.jsxs)(Oa,{children:[Object(F.jsxs)(ba,{component:"th",scope:"row",children:[" ",ta(e.day)," "]}),a.map((function(t){return Object(F.jsx)(da.a,{smDown:!n.includes(t),children:function(){var a;if(r<e.day+t)return Object(F.jsx)(ba,{align:"right"});var n=Math.min(1,(e["new_d".concat(t)]||0)/(e.new||1));return Object(F.jsx)(ba,{style:{backgroundColor:"rgba(0, 0, 64, ".concat(.5*n,")")},align:"right",children:null===(a=pa(n))||void 0===a?void 0:a.padStart(5,"0")})}()})}))]},e.day)}))})]})]})}var ma=a(55),fa=a.n(ma),va=r.a.createContext({});function ga(){return Object(n.useContext)(va)}var ya=function(e){var t=r.a.useState({defaultApp:localStorage.getItem("defaultApp"),apps:[],config:{},keys:{},clientKeys:void 0,flatKeys:void 0}),a=Object(Me.a)(t,2),n=a[0],c=a[1];_e.setProfile("appName",n.defaultApp);var s=function(e){Object.assign(n,e),c(Object(o.a)({},n))},i=function(e){n.defaultApp!=e&&(e?localStorage.setItem("defaultApp",e):localStorage.removeItem("defaultApp"),_e.setProfile("appName",e),s({defaultApp:e}))};return Object(F.jsx)(va.Provider,{value:{state:n,setDefaultApp:i,setApps:function(e){n.defaultApp||i(e[0].name),s({apps:e}),console.log("xxx2setApps")},setKeys:function(e){function t(e){for(var a in e._childCount=0,e._allChildCount=0,e)if(!a.startsWith("_")){var n=e[a];n?!1===n._enable?delete e[a]:(t(n),e._childCount++,e._allChildCount+=n._allChildCount):(e._childCount++,e._allChildCount++)}}function a(e,t){var a=[];return function e(t,n){for(var r in t)if(!r.startsWith("_")){var c=n+r,s=t[r];s?!1!==s._enable&&(0==s._allChildCount?a.push(c):e(s,"".concat(c,"."))):a.push(c)}}(e,t),a}function n(e){t(e),function(e){var t=1;!function e(n,r){for(var c in t+=n._childCount-1,n)if(!c.startsWith("_")){var s=r+c,o=n[c];!o||o._childCount>12||(o._childCount>1&&!0!==o._expand&&t>1&&o._childCount==o._allChildCount&&o._childCount<=12?o._children=a(o,"".concat(s,".")):o._childCount<=32&&e(o,"".concat(s,".")))}}(e,"")}(e)}var r=fa.a.cloneDeep(e);for(var c in r)n(r[c]);var o=function(e){var t=[];return function e(a,n){for(var r in a)if(!r.startsWith("_")){var c=n+r,s=a[r];if(s){if(s._childCount>32)continue;0==s._childCount||s._children?t.push(c):e(s,"".concat(c,"."))}else t.push(c)}}(e,""),t},i={};for(var u in r)i[u]=o(r[u]);s({keys:e,clientKeys:r,flatKeys:i})},setConfig:function(e){He.apiUrl=e.roomConsoleUrl,s({config:e})},setState:s},children:e.children})},Aa=Object(bt.a)(","),wa=Object(bt.a)("+.2%"),ka=function(){var e=ga(),t=n.useState({yesterdayData:[],chartActiveData:[]}),a=Object(Me.a)(t,2),r=a[0],c=a[1];n.useEffect(Object(Be.a)(Te.a.mark((function e(){var t,a,n,r,s,o,i,u,l,j,d,b;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_e.token){e.next=2;break}return e.abrupt("return");case 2:return i=T.a.utc().startOf("day").unix()/86400,u={dayEnd:i,dayBegin:i-30,values:["new","active","count"].concat(Object(Fe.a)([1,2,3,4,5,6,7,14,30].map((function(e){return"new_d".concat(e)}))))},e.next=7,_e.post("analytics",u);case 7:l=e.sent,j=l.find((function(e){return e.day==i-1})),d=l.find((function(e){return e.day==i-2})),b=[{name:"pos.dayInfo.active",value:Aa(null!==(t=null===j||void 0===j?void 0:j.active)&&void 0!==t?t:0),dod:((null!==(a=null===j||void 0===j?void 0:j.active)&&void 0!==a?a:0)-(null!==(n=null===d||void 0===d?void 0:d.active)&&void 0!==n?n:0))/((null===d||void 0===d?void 0:d.active)||1)},{name:"pos.dayInfo.new",value:Aa(null!==(r=null===j||void 0===j?void 0:j.new)&&void 0!==r?r:0),dod:((null!==(s=null===j||void 0===j?void 0:j.new)&&void 0!==s?s:0)-(null!==(o=null===d||void 0===d?void 0:d.new)&&void 0!==o?o:0))/((null===d||void 0===d?void 0:d.new)||1)},{name:"pos.dayInfo.earn",value:Aa(0),dod:0}],c({yesterdayData:b,chartActiveData:l});case 12:case"end":return e.stop()}}),e)}))),[]);var s=Object(Ye.a)();return Object(F.jsx)(Le.a,{children:Object(F.jsx)(Ue.a,{maxWidth:"xl",children:Object(F.jsxs)(D.a,{container:!0,spacing:2,children:[Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:s("pos.dayInfo.name"),subheader:s("pos.dayInfo.time",{time:T()().utc().startOf("day").local().format("YYYY-MM-DD HH:mm")})}),Object(F.jsx)(Ne.a,{children:Object(F.jsx)(D.a,{container:!0,spacing:1,children:r.yesterdayData.map((function(e){return Object(F.jsxs)(D.a,{item:!0,xs:4,children:[Object(F.jsx)(A.a,{color:"textSecondary",variant:"overline",gutterBottom:!0,children:s(e.name)}),Object(F.jsxs)(Le.a,{sx:{alignItems:"center",display:"flex"},children:[Object(F.jsx)(A.a,{color:"textPrimary",variant:"h5",children:e.value}),e.dod<0?Object(F.jsx)(Zt.a,{color:"error"}):Object(F.jsx)(ea.a,{color:"primary"})]}),Object(F.jsx)(Le.a,{sx:{alignItems:"center",display:"flex",pt:2},children:Object(F.jsx)(A.a,{variant:"caption",color:"textSecondary",children:s("pos.dayInfo.dod",{value:wa(e.dod)})})})]})}))})})]})}),e.state.config.roomConsoleUrl?Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsx)(Vt,{})}):null,Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:s("pos.activeTrend")}),Object(F.jsx)(Nt,{data:r.chartActiveData,series:[{name:s("pos.chart.new"),valueField:"new"},{name:s("pos.chart.active"),valueField:"active"},{name:s("pos.chart.count"),valueField:"count"}],category:"day",argumentFormat:function(e){return ta},tooltipTitleFormat:aa})]})}),Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:s("pos.retentionTrend")}),Object(F.jsx)(xa,{data:r.chartActiveData})]})})]})})})},Ca={login:function(){var e=Object(Be.a)(Te.a.mark((function e(t){var a,n,r;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,e.next=3,_e.post("login",{username:a,password:n});case 3:r=e.sent,_e.token=r.token,localStorage.setItem("username",a),localStorage.setItem("role",r.role),localStorage.setItem("avatar","data:image/jpeg;base64,/9j/4QBKRXhpZgAATU0AKgAAAAgAAwEaAAUAAAABAAAAMgEbAAUAAAABAAAAOgEoAAMAAAABAAIAAAAAAAAAAAEsAAAAAQAAASwAAAAB/9sAQwAGBAUGBQQGBgUGBwcGCAoQCgoJCQoUDg8MEBcUGBgXFBYWGh0lHxobIxwWFiAsICMmJykqKRkfLTAtKDAlKCko/9sAQwEHBwcKCAoTCgoTKBoWGigoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo/8IAEQgAgACAAwEiAAIRAQMRAf/EABsAAAMBAQEBAQAAAAAAAAAAAAQFBgMBAgcA/8QAGQEAAwEBAQAAAAAAAAAAAAAAAAIDAQQF/9oADAMBAAIQAxAAAAFz0Fkw5/NNs1L5dzQEjyqg22Hj/YNmY9C2L8KEhskxLRBgvYj6hRaKz9P3yj6L82m679S+pUmPFZ3Cc+jfPdKT+vac5dOzNFNgP6N9oEkMNmJ+acpoXK6s2lcryp4ZrIWE+8vtGoJ/REearJjVnS0fYvb0sQ5phEJXoJWSMPfY3Ulb6hzxwkyoahkdvHrOP50WLfLKdTIejJbYUd2n5esHpa6ddNPeuZ4YrCWT6JwEnu4tJp/O5kG81cq3rDNgzocPKuY5JUd5upkHh3D0YMaKFfRzHs5Kmd5huzwmDakOjGAJ0bBY66n7d16jRRqXvy9Yhe27qo0GW9vBVJ/ws/QPV5gU86qBni9VmZPGZZ3oGLL0HvJdvKDbJftq6q2s908o608sn//EACgQAAEEAQMEAgIDAQAAAAAAAAIAAQMEBRESEwYVITUQFCI0IDNBQv/aAAgBAQABBQLD4ypJjslj6QLtNBdpoLtNBdqoLtWPRYzHSCePx4SR0aDKGjXYBoU3qxYqoyfFVdkOMrus1SqxYvE2JWpTlNNcBib41WQyLRKa8XG9ok9hnQTMz1phlDY7qB3OP/ph0k6j9RhxN6bi/dTlcVEbkrsvFXkl1WruifR9xGvyQG+mOvcsYtp89Q+ows0YY8D35MB2ID0bJvvp14+RxrCnrMmrCLlXZ2twcZUbL17Hz1B6ihHB2yL9uOJDrvy77MdBFxQs38Lgbov9q+arsnZdQ+oxQcuLoQCVphWxtOoJBavJOLO1sFNNxN9o3Ulwo2GXmA67tPQlGWpr8dR+moXRCg2QNlTyoG+8VkKsUw2GkIgjNTx+Pqs6GsK2sKMfGN/Gnr8dR+mxTB9d281ogJilGrC2QCSJ3TH+ckgajJot63eY/JQC4QfHUPp8b+rBCJwQwlGN3XbC+rlqmdmWoIpQ0j10VP8AZd/nqH1GMFgoVJo464vGniZ08HhEDEP14WUcQCn8J3VY+OWCxHOOq1Wf9RW/oBmdDETC5yunmcFu1TEvCI2ZE+vxGDE2PMqduKXkddQepx8Ncac1+GrHzDajj2vXsgEZsfGW/VbvlmUasaboJzetBcJxzU8UuHiZxob9wR2Y6wyZBjcsgIgRtO7g4GOq0dMyZkAq4oC1hhkWX/UhkOOGSEJV22HacWwJR8V31GscbqxEDOKZkzLwIyTsoz45AtA6vShJRriJYrzyVnEVO8SNx2wPGYkO9BOIFJFxkzJlJ+ZFjIxjYAIJ9HaSBgha5E1M7m5o5YWQ2Y1zwuvugb/fqM0lqoYUsjxv3Cqu41UGSpAmydI2tXYZrIzV91q3WOl//8QAIhEAAgEEAgIDAQAAAAAAAAAAAAECAxARIRITIDEEIkFR/9oACAEDAQE/Ab4MeUVk4HAkvGmaGySz6HbNqSOJxtJ7uiEWkLYyXq+UfmiE3HUhMdp6ZxeMmDvklhEqs6v1ZSnjTsyU05ZYmuoayP8Ah8eXWyfXU9vZGeicySyRTP/EAB4RAAICAgMBAQAAAAAAAAAAAAABAhEQIQMSIDFB/9oACAECAQE/Aa8WIoaxRN0WWRlh4snlaEM6iRNlli2RWhiKOTMPuGKIjlj2WvHG7Qz8OolRy8d7WEiC6of0UkdiW8SiQQpDo//EADUQAAEDAgIHBQcEAwAAAAAAAAEAAhEDIRIxBBAiQVFhgRMgMnGxIzM0QmKSoVJygpEUsvH/2gAIAQEABj8CoVaujU3ONMSSM1o7aejUgXv4L4Sj9q+Eo/avhKP2r4Sj9q+Fo/0tijQnkFtaPRAcOGSf7Cg4RiaYVDtKFP2gN4TCdGph2RsiDo1M34IRQpyLGykaNSPFpCrvpaOynUbG64utGbSabN3LRW1IbdbTp14KV3ceCu8meKzXzKAU2g8xOU5J9I/OPyrjd+V5qeS0jp6hUMLiNhUQTBAlC7eiMpzkdVhrhMY+9QflHnr0jp6hUJeGns0XNvs2XiarlVeQRJyCy1SBqDhkmPG43UjLXX6eoWjPLSH4B1VSEMlBCqwM7Jg6nv0j9I16R09QtFa4AnsxHJaRPymyh4kahSxgEuBjkvA/qIW8IYgb5BWpjq5S+nb6SrWniFhVMt3DDr0jp6hUWtEvDQvd0x5FYa2zzXiCFYsmrTuCpxX4leKeiaOS2gSvDGrGPEEzqdekdPUIYxOyrCyu1swsRbcmAE9uHC7DqGUBXcs9drpgIgxr0jp6hfxQLnQpYSEHk4lYaoeYle8Cs6fLXS/d3K/T1COMXdTBbdNDmbWViELQFcJ7355gaiHCQvCtlsa2v/TdTTOWY11+nqFT8kA0f0pe6AN0o4HHCEcWJ5OQ75aTEotqf9REHkYsdVfp6haOahxOe3+kf8dgXayTwZN5TRWEEZhSSXzkOCygd9rph24p294yUja5KthJDrbJ8wqB+mywlsHgsNNpxnOEAG1LFXoOITXhuGdyIGfDVl3BaVFOAZmUcQ2lVjfHqtGcGnCLck0Go2m7NY26RMcl7LC7+V1Hzclhi7U6pUbFRgCxsy39ySjjptPPJYhk5GSARnyVTDUacrdUzF+iQr9ES+qG8pTuyx2KibJruz2hacK8MhCnWGw62JRmNx4620pjFvTiXVHvAkJ3aeJo2RksEX3pzt+5UqeO+AAiEQ4gg8lJcZRl/wCFJdfyQD9IdgUNqwP2lEdrfyK7Ou7FS/1XvfwV738FYseJ55Fe0qx9IaU54fANhZA4suSq0mBmMxBAPFf/xAAmEAEAAgIBBAEFAQEBAAAAAAABABEhMUEQUWFxgZGhscHw0SDh/9oACAEBAAE/IWkGWHtKwUilcf8AHOUrkQFTPMvQxyITzO8MpSSzI+yOizId3+P5gwI377mOb3eLBXNn5+/xLb+2wzBVilMGLgBjwZaPZUZphH4MuM6h5eELZyS34iK4e5V3bzctAvyxWt1LL08QuFMN9v5UHlDg+DEyeMn9zmrpKLczX2SK4JZNkzmLWQ+6XRY9QX3WpnXblizOohOAzLl/QlFyMZkceYPCE3l8pfZyuMWOWpHgKcXLZ8CfURuPPtnNB35YeFi64u5VdMW5JSFMkw7mqKYkWMDuczYbBZG49LsJb7qxQAdjFY4iIqIa8ymjXxG7O/UwBdv3Ogkel5NVJpWX8XTWCpYcnIXp/soHWDLWZbi9yVDxLvbDcxoTj+DLQJe1aYiZCVAbZYwyQM7321LuqMKqZm6y9+IoOLHxjoYIZuJ7OpmKjuwWYiM1sRaqS9ZgoKJua4fEuWttFsVV+fug1eKXLN/IzkUdluGASqicnqA4Fv3Oi+gzVrAovFyy9fGoMbIPuG7+QJYoirkhc04INTRPvHUImo4cMfO5nFgAp4JXOMjt/wAbB17WOS+MGnKxzAaX58QmUqssyIQXOd3MpbY46z2Eua36eIGY7I3SZJcWKeYC0A/2PWbZKvPa4IoG1B8GOaiiiJQfuMDonDHBVCLP4R0Ojjm7QysvsHQ9FxvBxlIiuDaWBqUdNzFeOUd/MftRqyvlhs1cqcwWZqaLojLGQA1ZxEkazkgqcoHQfETo8E4iwcHzAqz6r8S8wtUZIrT8Kt+Nzdmn9iWIp80wAEYLvLZfSwSC941HMIxzaO3vKsFN8pdLTFlTbZUcwfmn3x+wWu6iOeTVDKr7ARAZ2TCpQVcWGMw7mL26SXmcagZaikhcDCzUqGXzHVDH6EpDDJMmPV5tjAdoMlntrn3Lh281+yYGOFsMq3LrbcGzksYoxfuGqbNAOe8ECH2jY0EGXR01RLwFC6rme1Aov/OBy4Qyzot2SbDn8H/2V6N08nuDbqBV6TnyQSAPSfXQhKKr0PEeuFm/fnzFyFS+y6Am8b6QXRKjOHGfiWCS5Zk325l6Dfc5j1Awp8w81Nu4RzA8mZgIHfsw9r+xfEt/UnAD/LDr6TUw1X+EabVpcT9IaWS6w5dzx4j/AEv1AT+X2lwtB2j6Qe4vkPtKz2MmwIptHueYxNau2mMz/9oADAMBAAIAAwAAABBUh6wBLG7+u0lu+gA/G7qLmxelhCDxGwBnTyVP2R/Z+v8AeXBqBiFDu4MxNNwKwqdR/8QAHhEBAQEAAwACAwAAAAAAAAAAAQARECExQVFhcZH/2gAIAQMBAT8Qsgu3FOS3iat2DlnGWRLftATeUEcZvOW69SsQ+0gWieO5d2yeDrd0E8fFti9MjWfklZgZN1T42NkPPITDf0TcPr7I/CUsRcfq3Qc6Xap7/IgpflpGYXyJMG9xar//xAAcEQEBAQEBAQEBAQAAAAAAAAABABEhMUEQUSD/2gAIAQIBAT8QPqyD+yhZgNj+QYx5Y/yOLww8sz22EZ/V50lxgndsTVi+WJN05YAvFj7ISGOfo42PLw3DWwXU/Cw5JSzRh4yNusD1inlvcWYwgWHuyx7Lnl30LN1gObPDf//EACYQAQACAgICAwEBAAIDAAAAAAEAESExQVFhcYGRocGxENHh8PH/2gAIAQEAAT8Qz4lJzao7lYSc08x+5/8ABQ/8DjT/ABzOXL4QcYMogRcvG9jhzkYECqhgW6L1LOAK1MOTeS7D4mOS48Jaz4DPUX95nYUtlgUIZiGty0AWdm1LOEfoxN1EaPH5I9zD/wCLYFR5sXJ3ALZOKOlXnxCdMjhA5vzibUtYoRruAGZyy8+jnHLFlLRip/A9S9IsgAhr4nwpJVcrgIHYMC/CsWPlm3hqCsGQMAVd+yLTBbOT/ammYQDtK/iJaRct68sSwEFWsnmmI5VsPf5mOXcwaNLE2xVS/wDQx0dtgsVKsia8l1HpFdS+Vistnog/LKQulqthxHDMvqCgarEo/EqyCXmlrSjzAc0Mw0LEKLs1MbLPRMIOAoW2F36lD1FlAUF59x4DNLOzN+4h8llf0cEVw3LXmHqvq1jCwC81G4tDqoCUeqmFwHI4Y1zyATF/luR8B+H8gGciTw5JRuNn55qlJUXDVjhuEbpMw0sfEXDBpYC7vllCAOdse9R0ArnaCjP5Arw5O6MALoh3cJEuV8LTMcyW3UY2hdH1l91OhHV4muQdxDz94V6YgWDdpZUG7eUEzf8ACVig4UVGPrxIXP3ruZQAFA4VQ5j+RLGAjbOAsUIwtdckC08e2fOCyfhURl0E7tqxCCi/rGnunAdbZT99N4vOC9maMIeIAp1MF2qPFN6zG1I7LQaXMWjSF7U+eJoBBpsOo098GQr83KuyMS2BsxxuW7dMyEZwUiGKe4grhwmEaIa7yHxqGFCnPcMFkq+bf9uGIWqPLlAQHcQ+ubYzgCwctblEchwOTuZFUAFOqaagCCEUfvoIhhSLsx36mDanYeIlC2YN8CGG7gF3GulvoM/MILH7xF0eEoAWrwBKz/8AalWnzA9zJEvrmQE5PwMoEQ0md3VDALZCKTzjqcJWF5byQhkoQwWVElUTErRcohr5TFKvbDOmYLS+iBQBfk8JRaOayD3BU/8ANVPxNY7Ii4tFdj1uX8ieUMD5OohuuQijebDpwynM2qLJRkFYoXD/ANJVb5m3qIXN5Y6CyGuVXt9zQqWYaItKo074/sAOyk2+fEwIjGt/Ux4ZpHEND9Brv33LWGMOxyvy4haD2ZBy9PU7gheIAAiODw9QqdGW4WhKUfUt39QseFNhq4YC0Sx3m4o5ikcy0QbXZpIBh3FXqmXUUzyrpt8QgsAatrl4fLEprFacATYDzqIm4tiL3Nf6MpzDQXS8GWfEuoehaewFr1BYI6SJK0izluCYyw3vMuqIqD0t46vzMSRMxN6bQF+IrJ4OoHw9P5GV0SiuwEw1C26piiRxfDx4liiuXjy3Wfcu8GzYMBe6N45lSNrpBVNlygQ0tqqaWXJ4o3T41GPKDbu+QmWHpdP1Lufpl8tEcrDGhFEoZoyAp8QFGrmHrPiI0jGkD3xCBgsuL/2ldkDmAyN7uGhiPdZonPiFLW2+iL0tOeII48AFvKAa9RfEgFD5lk/cLsXdR3op9MR/qMhkYULJ4XKaiAwToo6GAtY32B489OfqL0sRdm+LlztEFn5dQiBKoqcELy1sU6ifcCngqqN+Hx4MquAqPYG68Stpdarnh9G4aUAI1v5iHDqUAMDdZKhpT7P8cykwN4zXQfCAyUONnOJSblEKMBMIRa1ZHL+IgPW3zmOBMPZhUrNC4ed2uT8bYNlWQpyD/IBOyBDG2M0dMXBLeFw4fDBIDQofyChNc2F7rMoR0bFqfkNfmqV+FFok1JQsBAgg+Oz8o6ZSYimsN+UcEM2sb6mv3G5mdXt4isAso+GduquozxAFBUcYYE1ha2hwgZI/UgyURsMFDP/Z");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){return _e.token=null,localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("avatar"),Promise.resolve()},checkError:function(e){var t=e.status;return 401===t||403===t?(_e.token=null,localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("avatar"),Promise.reject()):Promise.resolve()},checkAuth:function(){return localStorage.getItem("username")?Promise.resolve():Promise.reject()},getPermissions:function(){var e=localStorage.getItem("role");return Promise.resolve(e)}},Ea=a(11),Ia="CHANGE_THEME",Da=function(){return Object(Ea.f)((function(e){return e.theme||localStorage.getItem("theme")||"dark"}))},Sa=function(e,t){return t.type===Ia?(localStorage.setItem("theme",t.payload),t.payload):e||null},Ta=a(30),Fa=a(679),Ba=a(188),Ma=a(370),La={overrides:{MuiTextField:{root:{width:"100%"}},RaFormInput:{input:{width:"100%"}}}},Ua=a(91),Qa=a.n(Ua),Pa={light:{palette:{primary:{main:"#4f3cc9"},secondary:{light:"#5f5fc4",main:"#283593",dark:"#001064",contrastText:"#fff"},background:{default:"#fcfcfe"},type:"light"},shape:{borderRadius:10},overrides:{RaMenuItemLink:{root:{borderLeft:"3px solid #fff"},active:{borderLeft:"3px solid #4f3cc9"}},MuiPaper:{elevation1:{boxShadow:"none"},root:{border:"1px solid #e0e0e3",backgroundClip:"padding-box"}},MuiButton:{contained:{backgroundColor:"#fff",color:"#4f3cc9",boxShadow:"none"}},MuiButtonBase:{root:{"&:hover:active::after":{content:'""',display:"block",width:"100%",height:"100%",position:"absolute",top:0,right:0,backgroundColor:"currentColor",opacity:.3,borderRadius:"inherit"}}},MuiAppBar:{colorSecondary:{color:"#808080",backgroundColor:"#fff"}},MuiLinearProgress:{colorPrimary:{backgroundColor:"#f5f5f5"},barColorPrimary:{backgroundColor:"#d7d7d7"}},MuiFilledInput:{root:{backgroundColor:"rgba(0, 0, 0, 0.04)","&$disabled":{backgroundColor:"rgba(0, 0, 0, 0.04)"}}},MuiSnackbarContent:{root:{border:"none"}}},props:{MuiButtonBase:{disableRipple:!0}}},dark:{palette:{primary:{main:"#90caf9"},secondary:{main:"#FBBA72"},type:"dark"},overrides:{MuiAppBar:{colorSecondary:{color:"#ffffffb3",backgroundColor:"#616161e6"}},MuiPaper:{root:{border:"1px solid #414141e6"}},MuiButtonBase:{root:{"&:hover:active::after":{content:'""',display:"block",width:"100%",height:"100%",position:"absolute",top:0,right:0,backgroundColor:"currentColor",opacity:.3,borderRadius:"inherit"}}}},props:{MuiButtonBase:{disableRipple:!0}}}};for(var Na in Pa)Pa[Na]=Qa()({},La,Pa[Na]);var Ya=Pa,Ra=Object(I.a)({label:{width:"10em",display:"inline-block"},button:{margin:"1em"}}),Ga=function(){var e=Object(Ye.a)(),t=Object(Ba.a)(),a=Object(Ma.a)(),n=Ra(),r=Da(),c=Object(Ea.e)();return Object(F.jsxs)(Le.a,{children:[Object(F.jsx)(Qe.a,{children:Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(A.a,{gutterBottom:!0,variant:"h5",component:"div",children:e("pos.theme.name")}),Object(F.jsx)(A.a,{children:Object.entries(Ya).map((function(t){return Object(F.jsx)(Fa.a,{variant:"contained",className:n.button,color:r===t[0]?"primary":"default",onClick:function(){return c(function(e){return{type:Ia,payload:e}}(t[0]))},children:e("pos.theme.".concat(t[0]))})}))})]})}),Object(F.jsx)(Qe.a,{children:Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(A.a,{gutterBottom:!0,variant:"h5",component:"div",children:e("pos.language")}),Object(F.jsx)(A.a,{children:Object.entries(yt).map((function(e){return Object(F.jsx)(Fa.a,{variant:"contained",className:n.button,color:t===e[0]?"primary":"default",onClick:function(){return function(e){if(e!=t)return localStorage.setItem("locale",e),T.a.locale(e),a(e)}(e[0])},children:e[1]})}))})]})})]})},qa=a(289),Wa=function(e){var t=ga().state,a=["channel","version","cloud","event"].filter((function(t){return e.values.hasOwnProperty(t)})),n=[12,12,6,4,6][a.length],r=Object(Ye.a)(),c=a.find((function(a){var n;return null===(n=fa.a.get(t.clientKeys[a],e.values[a]))||void 0===n?void 0:n._children}));return Object(F.jsxs)(D.a,{container:!0,spacing:3,children:[e.values.dayBegin?Object(F.jsx)(D.a,{item:!0,md:6,xs:12,children:Object(F.jsx)(qa.a,{id:"dayBegin",name:"dayBegin",onChange:e.onChange,type:"date",label:r("pos.dateFrom"),defaultValue:e.values.dayBegin,variant:"outlined",required:!0})}):null,e.values.dayEnd?Object(F.jsx)(D.a,{item:!0,md:6,xs:12,children:Object(F.jsx)(qa.a,{id:"dayEnd",name:"dayEnd",onChange:e.onChange,type:"date",label:r("pos.dateTo"),defaultValue:e.values.dayEnd,variant:"outlined",required:!0})}):null,a.map((function(a){var s=t.flatKeys[a],o=t.clientKeys[a],i=e.values[a];return Object(F.jsx)(D.a,{item:!0,md:n,xs:12,children:Object(F.jsxs)(qa.a,{fullWidth:!0,label:r("pos.select"+a.charAt(0).toUpperCase()+a.slice(1)),name:a,onChange:e.onChange,select:!0,SelectProps:{native:!0},value:i,variant:"outlined",children:["event"!=a?Object(F.jsx)("option",{value:""},""):null,s.map((function(e){var t=fa.a.get(o,e);return Object(F.jsxs)("option",{disabled:c&&c!=a&&(null===t||void 0===t?void 0:t._children),value:e,children:[(null===t||void 0===t?void 0:t._name)||e,(null===t||void 0===t?void 0:t._children)?"...":""]},e)}))]})})}))]})},Ka=function(e){var t=ga();if(!t.state.clientKeys)return Object(F.jsx)(Le.a,{});var a=Object.assign({dayBegin:T.a.utc().startOf("day").subtract(14,"days").format("YYYY-MM-DD"),dayEnd:T.a.utc().startOf("day").format("YYYY-MM-DD"),channel:"",version:"",cloud:""},ze.a.parse(e.location.search)),r=n.useState({chartData:[],series:[],tabs:void 0,series2:[],tabs2:void 0}),c=Object(Me.a)(r,2),s=c[0],i=c[1],u=function(){var t=Object(Be.a)(Te.a.mark((function t(n){return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a[n.target.name]=n.target.value,e.history.push(e.location.pathname+"?"+ze.a.stringify(a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var e=Object(Be.a)(Te.a.mark((function e(){var n,r,c,s,u,l,d,b,O,h,p,x,m,f;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="day",r=["new","active","login"],c=[1,2,3,4,5,6,7,14,30],s={},u={},["channel","version","cloud"].forEach((function(e){var n,r=a[e],c=null===(n=fa.a.get(t.state.clientKeys[e],r))||void 0===n?void 0:n._children;u[e]=r,c&&(s[e]=c)})),l=Object(o.a)(Object(o.a)({dayEnd:T.a.utc(a.dayEnd).unix()/86400,dayBegin:T.a.utc(a.dayBegin).unix()/86400,keys:[n].concat(Object(Fe.a)(Object.keys(s))),values:[].concat(r,Object(Fe.a)(c.map((function(e){return"new_d".concat(e)}))))},u),s),e.next=10,_e.post("analytics",l);case 10:(d=e.sent).forEach((function(e){c.forEach((function(t){e["d".concat(t)]=Math.min(1,(e["new_d".concat(t)]||0)/(e.new||1))}))})),b=r.map((function(e){return{name:j("pos.chart.".concat(e))||e,valueField:e}})),O=c.map((function(e){return{name:j("pos.retention.d".concat(e))||e,valueField:"d".concat(e)}})),(h=Object.keys(s)[0])?(p=[].concat(r,Object(Fe.a)(c.map((function(e){return"d".concat(e)})))),x=ra(d,p,n,h),m=u[h].length+1,f=s[h].map((function(e){var a;return{name:(null===(a=fa.a.get(t.state.clientKeys[h],e))||void 0===a?void 0:a._name)||e.substring(m),valueField:e}})),i({chartData:x,series:f,tabs:b,series2:f,tabs2:O})):i({chartData:d,series:b,series2:O});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.useEffect((function(){l()}),[t.state.clientKeys].concat(Object(Fe.a)(Object.values(a))));var j=Object(Ye.a)();return Object(F.jsx)(Le.a,{children:Object(F.jsxs)(Ue.a,{maxWidth:"xl",children:[Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsx)(Ne.a,{children:Object(F.jsx)(Wa,{onChange:u,values:a})})}),Object(F.jsx)(D.a,{container:!0,spacing:2,children:Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:j("pos.userTrend")}),Object(F.jsx)(Nt,{data:s.chartData,tabs:s.tabs,series:s.series,argumentFormat:function(e){return ta},tooltipTitleFormat:aa,category:"day"})]})})}),Object(F.jsx)(D.a,{container:!0,spacing:2,children:Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:j("pos.retentionTrend")}),Object(F.jsx)(Nt,{data:s.chartData,tabs:s.tabs2,series:s.series2,argumentFormat:function(e){return ta},valueFormat:function(e){return Object(bt.a)(".1%")},tooltipFormat:Object(bt.a)(".2%"),tooltipTitleFormat:aa,category:"day"})]})})})]})})},za=a(78),Ja=function(){var e,t=n.useState({realtime:[]}),a=Object(Me.a)(t,2),r=a[0],c=a[1],s=function(){var t=Object(Be.a)(Te.a.mark((function t(a){var n,r,s,o,i,u,l,j,d,b,O,h,p,x,m,f,v,g,y,A,w,k,C;return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=T()().startOf("hour").unix()/3600,t.next=3,_e.post("realtime",{hours:a});case 3:if(r=t.sent,e){s=Object(za.a)(r);try{for(i=function(){var t=o.value,a=e.findIndex((function(e){return e.hours==t.hours}));-1!=a?e.splice(a,1,t):e.push(t)},s.s();!(o=s.n()).done;)i()}catch(E){s.e(E)}finally{s.f()}}else e=r;for(u={login:[],new:[],active:[]},l=0;l<=24;++l)j=n-l,u.login[l]={hours:j},u.new[l]={hours:j},u.active[l]={hours:j};d=e.filter((function(e){return e.hours>=n-24})),b=Object(za.a)(d);try{for(b.s();!(O=b.n()).done;)h=O.value,p=n-h.hours,u.login[p].today=h.login,u.new[p].today=h.new,u.active[p].today=h.active}catch(E){b.e(E)}finally{b.f()}x=e.filter((function(e){return e.hours<=n-24&&e.hours>=n-48})),m=Object(za.a)(x);try{for(m.s();!(f=m.n()).done;)v=f.value,g=n-24-v.hours,u.login[g].yesterday=v.login,u.new[g].yesterday=v.new,u.active[g].yesterday=v.active}catch(E){m.e(E)}finally{m.f()}y=e.filter((function(e){return e.hours<=n-168&&e.hours>=n-192})),A=Object(za.a)(y);try{for(A.s();!(w=A.n()).done;)k=w.value,C=n-168-k.hours,u.login[C].lastWeek=k.login,u.new[C].lastWeek=k.new,u.active[C].lastWeek=k.active}catch(E){A.e(E)}finally{A.f()}c({realtime:u}),setTimeout((function(){}),5e3);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();n.useEffect((function(){var e=!1;return function(){var t=Object(Be.a)(Te.a.mark((function t(){var a,n,r,c;return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=[],n=T()().startOf("hour").unix()/3600,r=0;r<=48;++r)a.push(n-r);for(c=0;c<=48;++c)a.push(n-c-168);return t.next=6,s(a);case 6:if(e){t.next=13;break}return t.next=9,na(5e3);case 9:return t.next=11,s([T()().startOf("hour").unix()/3600]);case 11:t.next=6;break;case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[]);var o=Object(Ye.a)();return Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:o("pos.realtimeTrend")}),Object(F.jsx)(Nt,{data:r.realtime,tabs:[{name:o("pos.chart.login"),valueField:"login",argumentField:"hours"},{name:o("pos.chart.new"),valueField:"new",argumentField:"hours"},{name:o("pos.chart.active"),valueField:"active",argumentField:"hours"}],series:[{name:o("pos.chart.today"),valueField:"today",argumentField:"hours"},{name:o("pos.chart.yesterday"),valueField:"yesterday",argumentField:"hours"},{name:o("pos.chart.lastWeek"),valueField:"lastWeek",argumentField:"hours"}],argumentFormat:function(e){return function(e){return new Date(36e5*Number(e)).getHours().toString()}},tooltipTitleFormat:function(e){return new Date(36e5*Number(e)).getHours().toString()+":00"}})]})},_a=function(e){var t=ga();if(!t.state.clientKeys)return Object(F.jsx)(Le.a,{});var a=Object.assign({dayBegin:T.a.utc().startOf("day").subtract(14,"days").format("YYYY-MM-DD"),dayEnd:T.a.utc().startOf("day").format("YYYY-MM-DD"),channel:"",version:"",cloud:"",event:t.state.flatKeys.event[0]},ze.a.parse(e.location.search)),r=n.useState({chartData:[],series:[],tabs:void 0}),c=Object(Me.a)(r,2),s=c[0],i=c[1],u=function(){var t=Object(Be.a)(Te.a.mark((function t(n){return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a[n.target.name]=n.target.value,e.history.push(e.location.pathname+"?"+ze.a.stringify(a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var e=Object(Be.a)(Te.a.mark((function e(){var n,r,c,s,u,l,d,b,O,h,p,x,m,f,v,g,y;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="day",c=["channel","version","cloud"],s=["active"],u="event."+a.event,l={},d={},c.forEach((function(e){var n,r=a[e],c=null===(n=fa.a.get(t.state.clientKeys[e],r))||void 0===n?void 0:n._children;d[e]=r,c&&(l[e]=c)})),b=Object(o.a)(Object(o.a)({dayEnd:T.a.utc(a.dayEnd).unix()/86400,dayBegin:T.a.utc(a.dayBegin).unix()/86400,keys:[r].concat(Object(Fe.a)(Object.keys(l))),values:[].concat(s,[u])},d),l),O=null===(n=fa.a.get(t.state.clientKeys.event,a.event))||void 0===n?void 0:n._children,e.next=11,_e.post("analytics",b);case 11:h=e.sent,p=[{name:j("pos.chart.totalValue"),valueField:"value"},{name:j("pos.chart.totalTimes"),valueField:"count"},{name:j("pos.chart.active"),valueField:"active"},{name:j("pos.chart.valuePerTime"),valueField:"vpt"},{name:j("pos.chart.valuePerUser"),valueField:"vpu"},{name:j("pos.chart.timesPerUser"),valueField:"tpu"}],x=[],O?(l.event=O,d.event=a.event,h.forEach((function(e){var t=e.event,a=e.active,n=e[r];O.forEach((function(e){var c,s=fa.a.get(t,e);s&&x.push((c={},Object(Re.a)(c,r,n),Object(Re.a)(c,"event",e),Object(Re.a)(c,"value",s._value),Object(Re.a)(c,"count",s._count),Object(Re.a)(c,"active",a),Object(Re.a)(c,"vpt",s._value/s._count),Object(Re.a)(c,"vpu",s._value/a),Object(Re.a)(c,"tpu",s._count/a),c))}))}))):h.forEach((function(e){var t=e.event,n=Object(k.a)(e,["event"]),r=fa.a.get(t,a.event);r&&x.push(Object(o.a)(Object(o.a)({},n),{},{value:r._value,count:r._count,vpt:r._value/r._count,vpu:r._value/e.active,tpu:r._count/e.active}))})),(m=Object.keys(l)[0])?(v=ra(x,f=["value","count","active","vpt","vpu","tpu"],r,m),g=d[m].length+1,y=l[m].map((function(e){var a;return{name:(null===(a=fa.a.get(t.state.clientKeys[m],e))||void 0===a?void 0:a._name)||e.substring(g),valueField:e}})),console.log("xxxx",v,x,f,r,m),i({chartData:v,series:y,tabs:p})):i({chartData:x,series:p});case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.useEffect((function(){l()}),[t.state.clientKeys].concat(Object(Fe.a)(Object.values(a))));var j=Object(Ye.a)();return Object(F.jsx)(Le.a,{children:Object(F.jsxs)(Ue.a,{maxWidth:"xl",children:[Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsx)(Ne.a,{children:Object(F.jsx)(Wa,{onChange:u,values:a})})}),Object(F.jsx)(D.a,{container:!0,spacing:2,children:Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:j("pos.eventTrend")}),Object(F.jsx)(Nt,{data:s.chartData,tabs:s.tabs,series:s.series,argumentFormat:function(e){return ta},tooltipTitleFormat:aa,category:"day"})]})})})]})})},Ha=function(e){var t=ga();if(!t.state.clientKeys)return Object(F.jsx)(Le.a,{});var a=Object.assign({dayBegin:T.a.utc().startOf("day").subtract(14,"days").format("YYYY-MM-DD"),dayEnd:T.a.utc().startOf("day").format("YYYY-MM-DD"),channel:"",version:"",cloud:"",event:t.state.flatKeys.event[0]},ze.a.parse(e.location.search)),r=n.useState({chartData:[],series:[],tabs:void 0}),c=Object(Me.a)(r,2),s=c[0],o=(c[1],function(){var t=Object(Be.a)(Te.a.mark((function t(n){return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a[n.target.name]=n.target.value,e.history.push(e.location.pathname+"?"+ze.a.stringify(a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i=function(){var e=Object(Be.a)(Te.a.mark((function e(){var t;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"day",["channel","version","cloud"],t=["new","active","login"],{dayEnd:T.a.utc(a.dayEnd).unix()/86400,dayBegin:T.a.utc(a.dayBegin).unix()/86400,values:[].concat(t,["event"])};case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.useEffect((function(){i()}),[t.state.clientKeys].concat(Object(Fe.a)(Object.values(a))));var u=Object(Ye.a)();return Object(F.jsx)(Le.a,{children:Object(F.jsxs)(Ue.a,{maxWidth:"xl",children:[Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsx)(Ne.a,{children:Object(F.jsx)(Wa,{onChange:o,values:a})})}),Object(F.jsx)(D.a,{container:!0,spacing:2,children:Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:u("pos.funnelTrend")}),Object(F.jsx)(Nt,{data:s.chartData,tabs:s.tabs,series:s.series,argumentFormat:function(e){return ta},tooltipTitleFormat:aa})]})})})]})})},Va=function(e){var t=ga();if(!t.state.clientKeys)return Object(F.jsx)(Le.a,{});var a=Object.assign({dayBegin:T.a.utc().startOf("day").subtract(14,"days").format("YYYY-MM-DD"),dayEnd:T.a.utc().startOf("day").format("YYYY-MM-DD"),channel:"",version:"",cloud:""},ze.a.parse(e.location.search)),r=n.useState({chartData:[],chartData2:[],series:[],tabs:void 0,tabs2:void 0}),c=Object(Me.a)(r,2),s=c[0],i=c[1],u=function(){var t=Object(Be.a)(Te.a.mark((function t(n){return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a[n.target.name]=n.target.value,e.history.push(e.location.pathname+"?"+ze.a.stringify(a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var e=Object(Be.a)(Te.a.mark((function e(){var n,r,c,s,u,l,d,b,O,h,p,x,m;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=["active","new","login"],r={},c={},["channel","version","cloud"].forEach((function(e){var n,s=a[e],o=null===(n=fa.a.get(t.state.clientKeys[e],s))||void 0===n?void 0:n._children;c[e]=s,o&&(r[e]=o)})),s=Object(o.a)(Object(o.a)({dayEnd:T.a.utc(a.dayEnd).unix()/86400,dayBegin:T.a.utc(a.dayBegin).unix()/86400,keys:Object(Fe.a)(Object.keys(r)),values:["region","lang"]},c),r),e.next=8,_e.post("analytics",s);case 8:u=e.sent,l=[],d=[],u.forEach((function(e){var t=e.region,a=e.lang,n=Object(k.a)(e,["region","lang"]);Object.entries(t).forEach((function(e){l.push(Object(o.a)(Object(o.a)({},n),{},{region:e[0]},e[1]))})),Object.entries(a).forEach((function(e){d.push(Object(o.a)(Object(o.a)({},n),{},{lang:e[0]},e[1]))}))})),l.sort((function(e,t){return e.active-t.active})),d.sort((function(e,t){return e.active-t.active})),l.splice(0,l.length-32),d.splice(0,d.length-32),b=n.map((function(e){return{name:j("pos.chart.".concat(e))||e,valueField:e}})),(O=Object.keys(r)[0])?(console.log("chart",u),h=ra(l,n,"region",O),p=ra(d,n,"lang",O),x=c[O].length+1,m=r[O].map((function(e){var a;return{name:(null===(a=fa.a.get(t.state.clientKeys[O],e))||void 0===a?void 0:a._name)||e.substring(x),valueField:e}})),i({chartData:h,chartData2:p,series:m,tabs:b,tabs2:b})):i({chartData:l,chartData2:d,series:b});case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.useEffect((function(){l()}),[t.state.clientKeys].concat(Object(Fe.a)(Object.values(a))));var j=Object(Ye.a)();return Object(F.jsx)(Le.a,{children:Object(F.jsxs)(Ue.a,{maxWidth:"xl",children:[Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsx)(Ne.a,{children:Object(F.jsx)(Wa,{onChange:u,values:a})})}),Object(F.jsx)(D.a,{container:!0,spacing:2,children:Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:j("pos.regionDist")}),Object(F.jsx)(Nt,{data:s.chartData,tabs:s.tabs,series:s.series,argumentFormat:function(e){return ta},tooltipTitleFormat:aa,category:"region",type:"bar",rotated:!0})]})})}),Object(F.jsx)(D.a,{container:!0,spacing:2,children:Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:j("pos.languageDist")}),Object(F.jsx)(Nt,{data:s.chartData2,tabs:s.tabs2,series:s.series,argumentFormat:function(e){return ta},tooltipTitleFormat:aa,category:"lang",type:"bar",rotated:!0})]})})})]})})},Xa=a(226),Za=a.n(Xa),$a=a(141),en=a.n($a),tn=function(){var e=ga(),t=e.state,a=(e.setDefaultApp,e.setApps,e.setKeys),r=n.useState(!1),c=Object(Me.a)(r,2),s=c[0],o=c[1],i=n.useRef(null),u=function(){var e=Object(Be.a)(Te.a.mark((function e(){var t;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.current,console.log(t),e.next=4,_e.post("setKeys",{keys:t});case 4:a(t),o(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(e){console.log(i.current),i.current=e.updated_src,console.log(i.current),o(!0)},j=Object(Ye.a)();return Object(F.jsx)(Le.a,{children:Object(F.jsx)(Ue.a,{maxWidth:"xl",children:Object(F.jsx)(D.a,{container:!0,spacing:2,children:Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:j("pos.keysEdit"),action:Object(F.jsx)(Fa.a,{variant:"contained",color:"primary",size:"large",onClick:u,disabled:!s,startIcon:Object(F.jsx)(en.a,{}),children:" Save "})}),Object(F.jsx)(Ne.a,{children:Object(F.jsx)(Za.a,{src:t.keys,theme:"railscasts",onEdit:function(e){return l(e)},onAdd:function(e){return l(e)},onDelete:function(e){return l(e)},displayDataTypes:!1,collapsed:1})})]})})})})})},an=function(){var e=ga(),t=e.state,a=e.setConfig,r=n.useState(!1),c=Object(Me.a)(r,2),s=c[0],o=c[1],i=n.useRef(null),u=function(){var e=Object(Be.a)(Te.a.mark((function e(){var t;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.current,console.log(t),e.next=4,_e.post("setConfig",{config:t});case 4:a(t),o(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(e){console.log(i.current),i.current=e.updated_src,console.log(i.current),o(!0)},j=Object(Ye.a)();return Object(F.jsx)(Le.a,{children:Object(F.jsx)(Ue.a,{maxWidth:"xl",children:Object(F.jsx)(D.a,{container:!0,spacing:2,children:Object(F.jsx)(D.a,{item:!0,xs:12,children:Object(F.jsxs)(Qe.a,{children:[Object(F.jsx)(Pe.a,{title:j("pos.appConfigEdit"),action:Object(F.jsx)(Fa.a,{variant:"contained",color:"primary",size:"large",onClick:u,disabled:!s,startIcon:Object(F.jsx)(en.a,{}),children:" Save "})}),Object(F.jsx)(Ne.a,{children:Object(F.jsx)(Za.a,{src:t.config,theme:"railscasts",onEdit:function(e){return l(e)},onAdd:function(e){return l(e)},onDelete:function(e){return l(e)},displayDataTypes:!1,collapsed:1})})]})})})})})},nn=[Object(F.jsx)(Ta.b,{exact:!0,path:"/configuration",render:function(){return Object(F.jsx)(Ga,{})}}),Object(F.jsx)(Ta.b,{exact:!0,path:"/appConfig",render:function(){return Object(F.jsx)(an,{})}}),Object(F.jsx)(Ta.b,{exact:!0,path:"/analytics/users",render:function(e){return Object(F.jsx)(Ka,Object(o.a)({},e))}}),Object(F.jsx)(Ta.b,{exact:!0,path:"/analytics/realtime",render:function(e){return Object(F.jsx)(Ja,Object(o.a)({},e))}}),Object(F.jsx)(Ta.b,{exact:!0,path:"/analytics/events",render:function(e){return Object(F.jsx)(_a,Object(o.a)({},e))}}),Object(F.jsx)(Ta.b,{exact:!0,path:"/analytics/funnels",render:function(e){return Object(F.jsx)(Ha,Object(o.a)({},e))}}),Object(F.jsx)(Ta.b,{exact:!0,path:"/analytics/personas",render:function(e){return Object(F.jsx)(Va,Object(o.a)({},e))}}),Object(F.jsx)(Ta.b,{exact:!0,path:"/analytics/keys",render:function(){return Object(F.jsx)(tn,{})}})],rn=a(434),cn=a(789),sn=a(432),on=a(681),un=a(410),ln=a.n(un),jn=a(100),dn=a.n(jn),bn=function(){var e,t=n.useState(null),a=Object(Me.a)(t,2),r=a[0],c=a[1],s=ga(),o=s.state,i=s.setDefaultApp,u=s.setApps,l=s.setKeys,j=s.setConfig,d=function(){var e=Object(Be.a)(Te.a.mark((function e(){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_e.token){e.next=2;break}return e.abrupt("return");case 2:return e.t0=u,e.next=5,_e.post("appList");case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=l,e.next=10,_e.post("getKeys");case 10:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=j,e.next=15,_e.post("getConfig");case 15:e.t5=e.sent,(0,e.t4)(e.t5);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.useEffect(d,[]),Object(F.jsxs)("div",{children:[Object(F.jsxs)(Fa.a,{"aria-controls":"apps-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){return c(e.currentTarget)},children:[Object(F.jsx)(ln.a,{}),o.defaultApp,Object(F.jsx)(dn.a,{})]}),Object(F.jsx)(sn.a,{id:"apps-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){return c(null)},children:null===(e=o.apps)||void 0===e?void 0:e.map((function(e){return Object(F.jsx)(on.a,{onClick:function(){c(null),i(e.name),window.location.reload()},selected:o.defaultApp===e.name,children:e.name})}))})]})},On=a(227),hn=a(287),pn=a(430),xn=Object(I.a)({title:{flex:"1",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},spacer:{flex:1}}),mn=Object(n.forwardRef)((function(e,t){var a=Object(Ye.a)();return Object(F.jsx)(On.a,{ref:t,to:"/configuration",primaryText:a("pos.configuration"),leftIcon:Object(F.jsx)(Ee.a,{}),onClick:e.onClick,sidebarIsOpen:!0})})),fn=function(e){return Object(F.jsx)(hn.a,Object(o.a)(Object(o.a)({},e),{},{children:Object(F.jsx)(mn,{})}))},vn=function(e){var t=xn();return Object(F.jsxs)(pn.a,Object(o.a)(Object(o.a)({},e),{},{elevation:1,userMenu:Object(F.jsx)(fn,{}),children:[Object(F.jsx)(A.a,{className:t.title,variant:"h6",id:"react-admin-title"}),Object(F.jsx)("span",{className:t.spacer}),Object(F.jsx)(bn,{})]}))},gn=a(414),yn=a(684),An=a(291),wn=a(772),kn=a(738),Cn=Object(I.a)((function(e){return{icon:{minWidth:e.spacing(5)},sidebarIsOpen:{"& a":{paddingLeft:e.spacing(4),transition:"padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms"}},sidebarIsClosed:{"& a":{paddingLeft:e.spacing(2),transition:"padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms"}}}})),En=function(e){var t=e.handleToggle,a=e.isOpen,r=e.name,c=e.icon,s=e.children,o=e.dense,i=Object(Ye.a)(),u=Cn(),l=Object(Ea.f)((function(e){return e.admin.ui.sidebarOpen})),j=Object(F.jsxs)(on.a,{dense:o,button:!0,onClick:t,children:[Object(F.jsx)(yn.a,{className:u.icon,children:a?Object(F.jsx)(dn.a,{}):c}),Object(F.jsx)(A.a,{variant:"inherit",color:"textSecondary",children:i(r)})]});return Object(F.jsxs)(n.Fragment,{children:[l||a?j:Object(F.jsx)(An.a,{title:i(r),placement:"right",children:j}),Object(F.jsx)(wn.a,{in:a,timeout:"auto",unmountOnExit:!0,children:Object(F.jsx)(kn.a,{dense:o,component:"div",disablePadding:!0,className:l?u.sidebarIsOpen:u.sidebarIsClosed,children:s})})]})},In=a(416),Dn=a.n(In),Sn=a(418),Tn=a.n(Sn),Fn=a(417),Bn=a.n(Fn),Mn=a(419),Ln=a.n(Mn),Un=a(215),Qn=a.n(Un),Pn=a(420),Nn=a.n(Pn),Yn=a(421),Rn=a.n(Yn),Gn=Object(I.a)((function(e){return{root:{marginTop:e.spacing(1)}}})),qn=function(e){var t=e.dense,a=void 0!==t&&t,r=ga().state,c=Object(n.useState)({menuCatalog:!0,menuSales:!0,menuCustomers:!0,menuAnalytics:!0,menuData:!0,menuAi:!0,menuLogs:!0}),s=Object(Me.a)(c,2),i=s[0],u=s[1],l=Object(Ye.a)();Object(Ea.f)((function(e){return e.theme}));var j=Gn(),d=function(e){u((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(Re.a)({},e,!t[e]))}))};return Object(F.jsxs)("div",{className:j.root,children:[" ",Object(F.jsx)(gn.a,{}),Object(F.jsxs)(En,{handleToggle:function(){return d("menuAnalytics")},isOpen:i.menuAnalytics,name:"pos.menu.analytics",icon:Object(F.jsx)(Dn.a,{}),dense:a,children:[Object(F.jsx)(On.a,{to:"/analytics/realtime",primaryText:l("analytics.realtime.name",{smart_count:2}),leftIcon:Object(F.jsx)(Bn.a,{}),dense:a}),Object(F.jsx)(On.a,{to:"/analytics/users",primaryText:l("analytics.users.name",{smart_count:2}),leftIcon:Object(F.jsx)(Tn.a,{}),dense:a}),Object(F.jsx)(On.a,{to:"/analytics/events",primaryText:l("analytics.events.name",{smart_count:2}),leftIcon:Object(F.jsx)(Ln.a,{}),dense:a}),Object(F.jsx)(On.a,{to:"/analytics/funnels",primaryText:l("analytics.funnels.name",{smart_count:2}),leftIcon:Object(F.jsx)(Qn.a,{}),dense:a}),Object(F.jsx)(On.a,{to:"/analytics/personas",primaryText:l("analytics.personas.name",{smart_count:2}),leftIcon:Object(F.jsx)(Nn.a,{}),dense:a}),Object(F.jsx)(On.a,{to:"/analytics/keys",primaryText:l("analytics.keys.name",{smart_count:2}),leftIcon:Object(F.jsx)(Rn.a,{}),dense:a})]}),r.config.roomConsoleUrl?Object(F.jsxs)(En,{handleToggle:function(){return d("menuData")},isOpen:i.menuData,name:"pos.menu.data",icon:Object(F.jsx)(W.icon,{}),dense:a,children:[Object(F.jsx)(On.a,{to:"/".concat(W.name),primaryText:l("resources.".concat(W.name,".name"),{smart_count:2}),leftIcon:Object(F.jsx)(W.icon,{}),dense:a}),Object(F.jsx)(On.a,{to:"/".concat(ee.name),primaryText:l("resources.".concat(ee.name,".name"),{smart_count:2}),leftIcon:Object(F.jsx)(ee.icon,{}),dense:a}),Object(F.jsx)(On.a,{to:"/".concat(oe.name),primaryText:l("resources.".concat(oe.name,".name"),{smart_count:2}),leftIcon:Object(F.jsx)(oe.icon,{}),dense:a}),Object(F.jsx)(On.a,{to:"/".concat(be.name),primaryText:l("resources.".concat(be.name,".name"),{smart_count:2}),leftIcon:Object(F.jsx)(be.icon,{}),dense:a}),Object(F.jsx)(On.a,{to:"/".concat(fe.name),primaryText:l("resources.".concat(fe.name,".name"),{smart_count:2}),leftIcon:Object(F.jsx)(fe.icon,{}),dense:a}),Object(F.jsx)(On.a,{to:"/".concat(ke.name),primaryText:l("resources.".concat(ke.name,".name"),{smart_count:2}),leftIcon:Object(F.jsx)(ke.icon,{}),dense:a})]}):null,Object(F.jsx)(On.a,{to:"/appConfig",primaryText:l("pos.menu.appConfig",{smart_count:2}),leftIcon:Object(F.jsx)(De.icon,{}),dense:a}),Object(F.jsx)(En,{handleToggle:function(){return d("menuLogs")},isOpen:i.menuLogs,name:"pos.menu.logs",icon:Object(F.jsx)(ke.icon,{}),dense:a})]})},Wn=function(e){return Object(F.jsx)(rn.a,Object(o.a)(Object(o.a)({},e),{},{size:200}))},Kn=function(e){var t=Ya[Da()]||Ya.light;return Object(F.jsx)(cn.a,Object(o.a)(Object(o.a)({},e),{},{appBar:vn,sidebar:Wn,menu:qn,theme:t}))},zn=function(){return Object(F.jsx)(ya,{children:Object(F.jsxs)(i.a,{customReducers:{theme:Sa},customRoutes:nn,i18nProvider:kt,dashboard:ka,authProvider:Ca,dataProvider:$e,layout:Kn,disableTelemetry:!0,children:[Object(F.jsx)(u.a,Object(o.a)({},W)),Object(F.jsx)(u.a,Object(o.a)({},ee)),Object(F.jsx)(u.a,Object(o.a)({},oe)),Object(F.jsx)(u.a,Object(o.a)({},be)),Object(F.jsx)(u.a,Object(o.a)({},fe)),Object(F.jsx)(u.a,Object(o.a)({},ke)),Object(F.jsx)(u.a,Object(o.a)({},De))]})})},Jn=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,800)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(zn,{})}),document.getElementById("root")),Jn()}},[[668,1,2]]]);
//# sourceMappingURL=main.d51ddac7.chunk.js.map