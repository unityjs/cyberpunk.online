import{c as L,a as z,ag as K,ah as V,d as O,u as Y,g as M,ai as q,h as k,aj as Q,ak as X,i as Z,al as ee,l as y,am as te,T as se,a2 as ne,A as ae,O as oe,a1 as ie,r as I,B as P,C as R,J as s,Q as n,S as l,D as e,N as D,W as d,ab as _,ac as b,R as le,_ as N,an as re,I as ce,a8 as ue,ao as de,P as U,ap as pe,$ as me,F as W,U as j,aq as fe,ar as ve,as as A,at as he,au as ge}from"./index-59c1ef77.js";const ye=L([L("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),z("spin-container",{position:"relative"},[z("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[K()])]),z("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),z("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[V("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),z("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),z("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[V("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),_e={small:20,medium:18,large:16},be=Object.assign(Object.assign({},M.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),ke=O({name:"Spin",props:be,setup(r){const{mergedClsPrefixRef:p,inlineThemeDisabled:i}=Y(r),a=M("Spin","-spin",ye,q,r,p),m=k(()=>{const{size:t}=r,{common:{cubicBezierEaseInOut:v},self:h}=a.value,{opacitySpinning:g,color:x,textColor:$}=h,C=typeof t=="number"?Q(t):h[X("size",t)];return{"--n-bezier":v,"--n-opacity-spinning":g,"--n-size":C,"--n-color":x,"--n-text-color":$}}),f=i?Z("spin",k(()=>{const{size:t}=r;return typeof t=="number"?String(t):t[0]}),m,r):void 0;return{mergedClsPrefix:p,compitableShow:ee(r,["spinning","show"]),mergedStrokeWidth:k(()=>{const{strokeWidth:t}=r;if(t!==void 0)return t;const{size:v}=r;return _e[typeof v=="number"?"medium":v]}),cssVars:i?void 0:m,themeClass:f==null?void 0:f.themeClass,onRender:f==null?void 0:f.onRender}},render(){var r,p;const{$slots:i,mergedClsPrefix:a,description:m}=this,f=i.icon&&this.rotate,t=(m||i.description)&&y("div",{class:`${a}-spin-description`},m||((r=i.description)===null||r===void 0?void 0:r.call(i))),v=i.icon?y("div",{class:[`${a}-spin-body`,this.themeClass]},y("div",{class:[`${a}-spin`,f&&`${a}-spin--rotate`],style:i.default?"":this.cssVars},i.icon()),t):y("div",{class:[`${a}-spin-body`,this.themeClass]},y(te,{clsPrefix:a,style:i.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${a}-spin`}),t);return(p=this.onRender)===null||p===void 0||p.call(this),i.default?y("div",{class:[`${a}-spin-container`,this.themeClass],style:this.cssVars},y("div",{class:[`${a}-spin-content`,this.compitableShow&&`${a}-spin-content--spinning`]},i),y(se,{name:"fade-in-transition"},{default:()=>this.compitableShow?v:null})):v}});function xe(){const r=new Date,p=r.getDate(),i=r.getMonth()+1;return`${r.getFullYear()}-${i}-${p}`}const $e={class:"p-4 space-y-5 min-h-[200px]"},Ce={class:"space-y-6"},we={class:"flex items-center space-x-4"},Se={class:"flex-shrink-0 w-[100px]"},ze={class:"flex-1"},Ne={class:"flex items-center space-x-4"},Ie={class:"flex-shrink-0 w-[100px]"},Pe={class:"w-[200px]"},Be={class:"flex items-center space-x-4"},Te={class:"flex-shrink-0 w-[100px]"},Ue={class:"flex-1"},Re={class:"flex-shrink-0 w-[100px]"},Oe={class:"flex flex-wrap items-center gap-4"},De={class:"flex items-center space-x-4"},Le={class:"flex-shrink-0 w-[100px]"},Ve={class:"flex flex-wrap items-center gap-4"},je={class:"flex items-center space-x-4"},Ae={class:"flex-shrink-0 w-[100px]"},Me={class:"flex flex-wrap items-center gap-4"},We={class:"flex items-center space-x-4"},Ee={class:"flex-shrink-0 w-[100px]"},Fe=O({__name:"General",setup(r){const p=ne(),i=ae(),{isMobile:a}=oe(),m=ie(),f=k(()=>p.theme),t=k(()=>i.userInfo),v=I(t.value.avatar??""),h=I(t.value.name??""),g=I(t.value.description??""),x=k({get(){return p.language},set(o){p.setLanguage(o)}}),$=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],C=[{label:"简体中文",key:"zh-CN",value:"zh-CN"},{label:"繁體中文",key:"zh-TW",value:"zh-TW"},{label:"English",key:"en-US",value:"en-US"}];function w(o){i.updateUserInfo(o),m.success(U("common.success"))}function E(){i.resetUserInfo(),m.success(U("common.success")),window.location.reload()}function F(){const o=xe(),c=localStorage.getItem("chatStorage")||"{}",u=JSON.stringify(JSON.parse(c),null,2),S=new Blob([u],{type:"application/json"}),T=URL.createObjectURL(S),B=document.createElement("a");B.href=T,B.download=`chat-store_${o}.json`,document.body.appendChild(B),B.click(),document.body.removeChild(B)}function G(o){const c=o.target;if(!c||!c.files)return;const u=c.files[0];if(!u)return;const S=new FileReader;S.onload=()=>{try{const T=JSON.parse(S.result);localStorage.setItem("chatStorage",JSON.stringify(T)),m.success(U("common.success")),location.reload()}catch{m.error(U("common.invalidFileFormat"))}},S.readAsText(u)}function J(){localStorage.removeItem("chatStorage"),location.reload()}function H(){const o=document.getElementById("fileInput");o&&o.click()}return(o,c)=>(P(),R("div",$e,[s("div",Ce,[s("div",we,[s("span",Se,n(o.$t("setting.avatarLink")),1),s("div",ze,[l(e(D),{value:v.value,"onUpdate:value":c[0]||(c[0]=u=>v.value=u),placeholder:""},null,8,["value"])]),l(e(b),{size:"tiny",text:"",type:"primary",onClick:c[1]||(c[1]=u=>w({avatar:v.value}))},{default:d(()=>[_(n(o.$t("common.save")),1)]),_:1})]),s("div",Ne,[s("span",Ie,n(o.$t("setting.name")),1),s("div",Pe,[l(e(D),{value:h.value,"onUpdate:value":c[2]||(c[2]=u=>h.value=u),placeholder:""},null,8,["value"])]),l(e(b),{size:"tiny",text:"",type:"primary",onClick:c[3]||(c[3]=u=>w({name:h.value}))},{default:d(()=>[_(n(o.$t("common.save")),1)]),_:1})]),s("div",Be,[s("span",Te,n(o.$t("setting.description")),1),s("div",Ue,[l(e(D),{value:g.value,"onUpdate:value":c[4]||(c[4]=u=>g.value=u),placeholder:""},null,8,["value"])]),l(e(b),{size:"tiny",text:"",type:"primary",onClick:c[5]||(c[5]=u=>w({description:g.value}))},{default:d(()=>[_(n(o.$t("common.save")),1)]),_:1})]),s("div",{class:le(["flex items-center space-x-4",e(a)&&"items-start"])},[s("span",Re,n(o.$t("setting.chatHistory")),1),s("div",Oe,[l(e(b),{size:"small",onClick:F},{icon:d(()=>[l(e(N),{icon:"ri:download-2-fill"})]),default:d(()=>[_(" "+n(o.$t("common.export")),1)]),_:1}),s("input",{id:"fileInput",type:"file",style:{display:"none"},onChange:G},null,32),l(e(b),{size:"small",onClick:H},{icon:d(()=>[l(e(N),{icon:"ri:upload-2-fill"})]),default:d(()=>[_(" "+n(o.$t("common.import")),1)]),_:1}),l(e(re),{placement:"bottom",onPositiveClick:J},{trigger:d(()=>[l(e(b),{size:"small"},{icon:d(()=>[l(e(N),{icon:"ri:close-circle-line"})]),default:d(()=>[_(" "+n(o.$t("common.clear")),1)]),_:1})]),default:d(()=>[_(" "+n(o.$t("chat.clearHistoryConfirm")),1)]),_:1})])],2),s("div",De,[s("span",Le,n(o.$t("setting.theme")),1),s("div",Ve,[(P(),R(ce,null,ue($,u=>l(e(b),{key:u.key,size:"small",type:u.key===e(f)?"primary":void 0,onClick:S=>e(p).setTheme(u.key)},{icon:d(()=>[l(e(N),{icon:u.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])]),s("div",je,[s("span",Ae,n(o.$t("setting.language")),1),s("div",Me,[l(e(de),{style:{width:"140px"},value:e(x),options:C,onUpdateValue:c[6]||(c[6]=u=>e(p).setLanguage(u))},null,8,["value"])])]),s("div",We,[s("span",Ee,n(o.$t("setting.resetUserInfo")),1),l(e(b),{size:"small",onClick:E},{default:d(()=>[_(n(o.$t("common.reset")),1)]),_:1})])])]))}}),Ge={class:"p-4 space-y-4"},Je={key:0},He={key:1},Ke=O({__name:"About",setup(r){const p=pe(),i=I(!1),a=I(),m=k(()=>!!p.isChatGPTAPI);async function f(){try{i.value=!0;const{data:t}=await fe();a.value=t}finally{i.value=!1}}return me(()=>{f()}),(t,v)=>(P(),W(e(ke),{show:i.value},{default:d(()=>{var h,g,x,$,C,w;return[s("div",Ge,[s("p",null,n(t.$t("setting.api"))+"："+n(((h=a.value)==null?void 0:h.apiModel)??"-"),1),e(m)?(P(),R("p",Je,n(t.$t("setting.balance"))+"："+n(((g=a.value)==null?void 0:g.balance)??"-"),1)):j("",!0),e(m)?j("",!0):(P(),R("p",He,n(t.$t("setting.reverseProxy"))+"："+n(((x=a.value)==null?void 0:x.reverseProxy)??"-"),1)),s("p",null,n(t.$t("setting.timeout"))+"："+n((($=a.value)==null?void 0:$.timeoutMs)??"-"),1),s("p",null,n(t.$t("setting.socks"))+"："+n(((C=a.value)==null?void 0:C.socksProxy)??"-"),1),s("p",null,n(t.$t("setting.httpsProxy"))+"："+n(((w=a.value)==null?void 0:w.httpsProxy)??"-"),1)])]}),_:1},8,["show"]))}}),Ye={class:"ml-2"},qe={class:"min-h-[100px]"},Qe={class:"ml-2"},Ze=O({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(r,{emit:p}){const i=r,a=I("General"),m=k({get(){return i.visible},set(f){p("update:visible",f)}});return(f,t)=>(P(),W(e(ge),{show:e(m),"onUpdate:show":t[1]||(t[1]=v=>he(m)?m.value=v:null),"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:d(()=>[s("div",null,[l(e(ve),{value:a.value,"onUpdate:value":t[0]||(t[0]=v=>a.value=v),type:"line",animated:""},{default:d(()=>[l(e(A),{name:"General",tab:"General"},{tab:d(()=>[l(e(N),{class:"text-lg",icon:"ri:file-user-line"}),s("span",Ye,n(f.$t("setting.general")),1)]),default:d(()=>[s("div",qe,[l(Fe)])]),_:1}),l(e(A),{name:"Config",tab:"Config"},{tab:d(()=>[l(e(N),{class:"text-lg",icon:"ri:list-settings-line"}),s("span",Qe,n(f.$t("setting.config")),1)]),default:d(()=>[l(Ke)]),_:1})]),_:1},8,["value"])])]),_:1},8,["show"]))}});export{Ze as default};
